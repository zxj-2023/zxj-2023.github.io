<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-bounce.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="æ„å»ºlanggraphèŠå¤©æœºå™¨äººçš„åŸºæœ¬æµç¨‹ åˆ›å»ºä¸€ä¸ª StateGraph é¦–å…ˆåˆ›å»ºä¸€ä¸ª StateGraphã€‚ä¸€ä¸ª StateGraph å¯¹è±¡å°†æˆ‘ä»¬çš„èŠå¤©æœºå™¨äººç»“æ„å®šä¹‰ä¸ºâ€œçŠ¶æ€æœºâ€ã€‚æˆ‘ä»¬å°†æ·»åŠ  èŠ‚ç‚¹ æ¥è¡¨ç¤º LLM å’ŒèŠå¤©æœºå™¨äººå¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼Œå¹¶æ·»åŠ  è¾¹ æ¥æŒ‡å®šæœºå™¨äººåº”å¦‚ä½•åœ¨è¿™äº›å‡½æ•°ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ 12345678910111213from typing import Annotat">
<meta property="og:type" content="article">
<meta property="og:title" content="LangGraphå­¦ä¹ â€”â€”å¿«é€Ÿå…¥é—¨">
<meta property="og:url" content="http://example.com/2025/07/15/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langgraph%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Zhang XiJun">
<meta property="og:description" content="æ„å»ºlanggraphèŠå¤©æœºå™¨äººçš„åŸºæœ¬æµç¨‹ åˆ›å»ºä¸€ä¸ª StateGraph é¦–å…ˆåˆ›å»ºä¸€ä¸ª StateGraphã€‚ä¸€ä¸ª StateGraph å¯¹è±¡å°†æˆ‘ä»¬çš„èŠå¤©æœºå™¨äººç»“æ„å®šä¹‰ä¸ºâ€œçŠ¶æ€æœºâ€ã€‚æˆ‘ä»¬å°†æ·»åŠ  èŠ‚ç‚¹ æ¥è¡¨ç¤º LLM å’ŒèŠå¤©æœºå™¨äººå¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼Œå¹¶æ·»åŠ  è¾¹ æ¥æŒ‡å®šæœºå™¨äººåº”å¦‚ä½•åœ¨è¿™äº›å‡½æ•°ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚ 12345678910111213from typing import Annotat">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-07-14T16:00:00.000Z">
<meta property="article:modified_time" content="2025-07-18T08:31:23.184Z">
<meta property="article:author" content="å¼ ç†™æµš">
<meta property="article:tag" content="langgraph">
<meta property="article:tag" content="fastapi">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2025/07/15/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langgraph%E5%AD%A6%E4%B9%A0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://example.com/2025/07/15/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langgraph%E5%AD%A6%E4%B9%A0/","path":"2025/07/15/å­¦ä¹ /aiæ¡†æ¶/langgraphå­¦ä¹ /","title":"LangGraphå­¦ä¹ â€”â€”å¿«é€Ÿå…¥é—¨"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>LangGraphå­¦ä¹ â€”â€”å¿«é€Ÿå…¥é—¨ | Zhang XiJun</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Zhang XiJun</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">BLOGS</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="æœç´¢..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%84%E5%BB%BAlanggraph%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">æ„å»ºlanggraphèŠå¤©æœºå™¨äººçš„åŸºæœ¬æµç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-stategraph"><span class="nav-number">1.1.</span> <span class="nav-text">åˆ›å»ºä¸€ä¸ª StateGraph</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E8%81%8A%E5%A4%A9%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.2.</span> <span class="nav-text">å®šä¹‰ä¸€ä¸ªèŠå¤©æ¨¡å‹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E8%8A%82%E7%82%B9"><span class="nav-number">1.3.</span> <span class="nav-text">æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA-%E5%85%A5%E5%8F%A3-%E7%82%B9"><span class="nav-number">1.4.</span> <span class="nav-text">æ·»åŠ ä¸€ä¸ª å…¥å£ ç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%9B%BE"><span class="nav-number">1.5.</span> <span class="nav-text">ç¼–è¯‘å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE"><span class="nav-number">1.6.</span> <span class="nav-text">å¯è§†åŒ–å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA"><span class="nav-number">1.7.</span> <span class="nav-text">è¿è¡ŒèŠå¤©æœºå™¨äºº</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%BD%91%E9%A1%B5%E6%90%9C%E7%B4%A2%E5%B7%A5%E5%85%B7"><span class="nav-number">2.</span> <span class="nav-text">æ·»åŠ ç½‘é¡µæœç´¢å·¥å…·</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96tavily-api"><span class="nav-number">2.1.</span> <span class="nav-text">è·å–Tavily api</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%B7%A5%E5%85%B7"><span class="nav-number">2.2.</span> <span class="nav-text">æ·»åŠ å·¥å…·</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E5%9B%BE"><span class="nav-number">2.3.</span> <span class="nav-text">å®šä¹‰å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%BF%90%E8%A1%8C%E5%B7%A5%E5%85%B7%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">2.4.</span> <span class="nav-text">åˆ›å»ºä¸€ä¸ªè¿è¡Œå·¥å…·çš„å‡½æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89conditional_edges"><span class="nav-number">2.5.</span> <span class="nav-text">å®šä¹‰conditional_edges</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE-1"><span class="nav-number">2.6.</span> <span class="nav-text">å¯è§†åŒ–å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%91%E6%9C%BA%E5%99%A8%E4%BA%BA%E6%8F%90%E9%97%AE"><span class="nav-number">2.7.</span> <span class="nav-text">å‘æœºå™¨äººæé—®</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E8%AE%B0%E5%BF%86%E5%8A%9F%E8%83%BD"><span class="nav-number">3.</span> <span class="nav-text">æ·»åŠ è®°å¿†åŠŸèƒ½</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-memorysaver-%E6%A3%80%E6%9F%A5%E7%82%B9"><span class="nav-number">3.1.</span> <span class="nav-text">åˆ›å»º MemorySaver
æ£€æŸ¥ç‚¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%9B%BE-1"><span class="nav-number">3.2.</span> <span class="nav-text">ç¼–è¯‘å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8E%E6%82%A8%E7%9A%84%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E4%BA%92%E5%8A%A8"><span class="nav-number">3.3.</span> <span class="nav-text">ä¸æ‚¨çš„èŠå¤©æœºå™¨äººäº’åŠ¨</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E4%BA%BA%E5%B7%A5%E5%B9%B2%E9%A2%84"><span class="nav-number">4.</span> <span class="nav-text">æ·»åŠ äººå·¥å¹²é¢„</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0human_assistance%E5%B7%A5%E5%85%B7"><span class="nav-number">4.1.</span> <span class="nav-text">æ·»åŠ human_assistanceå·¥å…·</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89chatbot"><span class="nav-number">4.2.</span> <span class="nav-text">å®šä¹‰chatbot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E8%AF%91%E5%9B%BE-2"><span class="nav-number">4.3.</span> <span class="nav-text">ç¼–è¯‘å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%B9%B6%E4%B8%AD%E6%96%AD"><span class="nav-number">4.4.</span> <span class="nav-text">è°ƒç”¨èŠå¤©æœºå™¨äººå¹¶ä¸­æ–­</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%81%A2%E5%A4%8D%E6%89%A7%E8%A1%8C"><span class="nav-number">4.5.</span> <span class="nav-text">æ¢å¤æ‰§è¡Œ</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%8A%B6%E6%80%81"><span class="nav-number">5.</span> <span class="nav-text">è‡ªå®šä¹‰çŠ¶æ€</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%91%E7%8A%B6%E6%80%81%E6%B7%BB%E5%8A%A0%E9%94%AE"><span class="nav-number">5.1.</span> <span class="nav-text">å‘çŠ¶æ€æ·»åŠ é”®</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%B7%A5%E5%85%B7%E5%86%85%E9%83%A8%E6%9B%B4%E6%96%B0%E7%8A%B6%E6%80%81"><span class="nav-number">5.2.</span> <span class="nav-text">åœ¨å·¥å…·å†…éƒ¨æ›´æ–°çŠ¶æ€</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%90%E7%A4%BA%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%B0%83%E7%94%A8%E4%BA%BA%E5%B7%A5%E5%AE%A1%E6%9F%A5"><span class="nav-number">5.3.</span> <span class="nav-text">æç¤ºèŠå¤©æœºå™¨äººè°ƒç”¨äººå·¥å®¡æŸ¥</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E4%BA%BA%E5%B7%A5%E5%8D%8F%E5%8A%A9"><span class="nav-number">5.4.</span> <span class="nav-text">æ·»åŠ äººå·¥ååŠ©</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E5%8A%9F%E8%83%BD%E4%BB%8E%E4%B9%8B%E5%89%8D%E7%9A%84%E6%9F%90%E4%B8%AA%E7%8A%B6%E6%80%81%E5%BC%80%E5%A7%8B"><span class="nav-number">6.</span> <span class="nav-text">æ—¶é—´åŠŸèƒ½ï¼ˆä»ä¹‹å‰çš„æŸä¸ªçŠ¶æ€å¼€å§‹ï¼‰</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9B%9E%E6%BA%AF%E6%82%A8%E7%9A%84%E5%9B%BE"><span class="nav-number">6.1.</span> <span class="nav-text">å›æº¯æ‚¨çš„å›¾</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%8E%E7%89%B9%E5%AE%9A%E6%97%B6%E9%97%B4%E7%82%B9%E5%8A%A0%E8%BD%BD%E7%8A%B6%E6%80%81"><span class="nav-number">6.2.</span> <span class="nav-text">ä»ç‰¹å®šæ—¶é—´ç‚¹åŠ è½½çŠ¶æ€</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E6%9C%AC%E5%9C%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">7.</span> <span class="nav-text">è¿è¡Œæœ¬åœ°æœåŠ¡å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-langgraph-cli"><span class="nav-number">7.1.</span> <span class="nav-text">å®‰è£… LangGraph CLI</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-langgraph-%E5%BA%94%E7%94%A8"><span class="nav-number">7.2.</span> <span class="nav-text">åˆ›å»º LangGraph åº”ç”¨ ğŸŒ±</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8uv%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E9%A1%B9"><span class="nav-number">7.3.</span> <span class="nav-text">ä½¿ç”¨uvå®‰è£…ä¾èµ–é¡¹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-.env-%E6%96%87%E4%BB%B6"><span class="nav-number">7.4.</span> <span class="nav-text">åˆ›å»ºä¸€ä¸ª .env æ–‡ä»¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8-langgraph-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">7.5.</span> <span class="nav-text">å¯åŠ¨ LangGraph æœåŠ¡å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8-langgraph-studio-%E4%B8%AD%E6%B5%8B%E8%AF%95%E6%82%A8%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="nav-number">7.6.</span> <span class="nav-text">åœ¨ LangGraph Studio
ä¸­æµ‹è¯•æ‚¨çš„åº”ç”¨ç¨‹åº</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-number">8.</span> <span class="nav-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å¼ ç†™æµš"
      src="/images/zxjavatar.gif">
  <p class="site-author-name" itemprop="name">å¼ ç†™æµš</p>
  <div class="site-description" itemprop="description">zxj Blogs</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">105</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">38</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zxj-2023" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;zxj-2023" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://wpa.qq.com/msgrd?v=3&uin=2902065320&site=qq&menu=yes" title="QQ â†’ http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;2902065320&amp;site&#x3D;qq&amp;menu&#x3D;yes" rel="noopener me" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          é“¾æ¥
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://zxj-2023.github.io/" title="https:&#x2F;&#x2F;zxj-2023.github.io" rel="noopener" target="_blank">Zhang XiJun</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://theme-next.js.org/" title="https:&#x2F;&#x2F;theme-next.js.org" rel="noopener" target="_blank">NexT</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/07/15/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langgraph%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="LangGraphå­¦ä¹ â€”â€”å¿«é€Ÿå…¥é—¨ | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          LangGraphå­¦ä¹ â€”â€”å¿«é€Ÿå…¥é—¨
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-07-15 00:00:00" itemprop="dateCreated datePublished" datetime="2025-07-15T00:00:00+08:00">2025-07-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-07-18 16:31:23" itemprop="dateModified" datetime="2025-07-18T16:31:23+08:00">2025-07-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ai%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">aiæ¡†æ¶</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ai%E6%A1%86%E6%9E%B6/langgraph/" itemprop="url" rel="index"><span itemprop="name">langgraph</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="æœ¬æ–‡æ€»é˜…è¯»é‡ far fa-eye æ¬¡"></i>
      </span>
      <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h3 id="æ„å»ºlanggraphèŠå¤©æœºå™¨äººçš„åŸºæœ¬æµç¨‹">æ„å»ºlanggraphèŠå¤©æœºå™¨äººçš„åŸºæœ¬æµç¨‹</h3>
<h4 id="åˆ›å»ºä¸€ä¸ª-stategraph">åˆ›å»ºä¸€ä¸ª <code>StateGraph</code></h4>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª <code>StateGraph</code>ã€‚ä¸€ä¸ª <code>StateGraph</code>
å¯¹è±¡å°†æˆ‘ä»¬çš„èŠå¤©æœºå™¨äººç»“æ„å®šä¹‰ä¸ºâ€œçŠ¶æ€æœºâ€ã€‚æˆ‘ä»¬å°†æ·»åŠ  <code>èŠ‚ç‚¹</code>
æ¥è¡¨ç¤º LLM å’ŒèŠå¤©æœºå™¨äººå¯ä»¥è°ƒç”¨çš„å‡½æ•°ï¼Œå¹¶æ·»åŠ  <code>è¾¹</code>
æ¥æŒ‡å®šæœºå™¨äººåº”å¦‚ä½•åœ¨è¿™äº›å‡½æ•°ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Annotated</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> typing_extensions <span class="keyword">import</span> TypedDict</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langgraph.graph <span class="keyword">import</span> StateGraph, START</span><br><span class="line"><span class="keyword">from</span> langgraph.graph.message <span class="keyword">import</span> add_messages</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">State</span>(<span class="title class_ inherited__">TypedDict</span>):</span><br><span class="line">    messages: Annotated[<span class="built_in">list</span>, add_messages]</span><br><span class="line"></span><br><span class="line"><span class="comment">#å®šä¹‰çŠ¶æ€</span></span><br><span class="line">graph_builder = StateGraph(State)</span><br></pre></td></tr></table></figure>
<p>åœ¨ langgraph
ä¸­ï¼ŒçŠ¶æ€ä¼šåœ¨å›¾çš„å„ä¸ªèŠ‚ç‚¹ä¹‹é—´ä¼ é€’ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹äº§ç”Ÿæ–°çš„æ¶ˆæ¯æ—¶ï¼Œå®ƒä¼šæ›´æ–°
State ä¸­çš„ messages å­—æ®µã€‚</p>
<p>æˆ‘ä»¬çš„å›¾ç°åœ¨å¯ä»¥å¤„ç†ä¸¤ä¸ªå…³é”®ä»»åŠ¡</p>
<ol type="1">
<li>æ¯ä¸ª <code>èŠ‚ç‚¹</code> éƒ½å¯ä»¥æ¥æ”¶å½“å‰ <code>çŠ¶æ€</code>
ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºçŠ¶æ€çš„æ›´æ–°ã€‚</li>
<li>å¯¹ <code>æ¶ˆæ¯</code> çš„æ›´æ–°å°†è¿½åŠ åˆ°ç°æœ‰åˆ—è¡¨è€Œä¸æ˜¯è¦†ç›–å®ƒï¼Œè¿™å¾—ç›Šäºä¸
<code>Annotated</code> è¯­æ³•ä¸€èµ·ä½¿ç”¨çš„é¢„æ„å»º <a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/reference/graphs/?h=add+messages#add_messages"><code>add_messages</code></a>
å‡½æ•°ã€‚</li>
</ol>
<blockquote>
<p>langgraphä¸­æ¯ä¸ªæ¶ˆæ¯å¯¹è±¡é€šå¸¸åŒ…å«ä»¥ä¸‹å…³é”®å±æ€§ï¼š</p>
<ul>
<li>role : ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ ‡è¯†æ¶ˆæ¯çš„å‘é€è€…ï¼ˆä¾‹å¦‚ â€˜humanâ€™ , â€˜aiâ€™ , â€˜systemâ€™
ï¼‰ã€‚</li>
<li>content :
æ¶ˆæ¯çš„å…·ä½“å†…å®¹ï¼Œé€šå¸¸æ˜¯å­—ç¬¦ä¸²ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯æ›´å¤æ‚çš„ç»“æ„ï¼ˆä¾‹å¦‚ï¼Œç”¨äºå¤šæ¨¡æ€è¾“å…¥ï¼‰ã€‚</li>
<li>id : ä¸€ä¸ªå¯é€‰çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li>
</ul>
<p>Annotated çš„ä½œç”¨ : é€šè¿‡ä½¿ç”¨ Annotated[list, add_messages]
ï¼Œä½ æ”¹å˜äº†è¿™ä¸ªé»˜è®¤è¡Œä¸ºã€‚ add_messages å‡½æ•°ï¼ˆç”± langgraph
æä¾›æˆ–ç”±ä½ è‡ªå®šä¹‰ï¼‰çš„é€»è¾‘æ˜¯ è¿½åŠ 
è€Œä¸æ˜¯è¦†ç›–ã€‚æ‰€ä»¥ï¼Œå½“ä¸€ä¸ªæ–°èŠ‚ç‚¹è¿”å›æ¶ˆæ¯æ—¶ï¼Œ langgraph ä¼šè°ƒç”¨ add_messages
å‡½æ•°ï¼Œå°†æ–°æ¶ˆæ¯ è¿½åŠ  åˆ°ç°æœ‰ messages åˆ—è¡¨çš„æœ«å°¾ã€‚</p>
</blockquote>
<h4 id="å®šä¹‰ä¸€ä¸ªèŠå¤©æ¨¡å‹">å®šä¹‰ä¸€ä¸ªèŠå¤©æ¨¡å‹</h4>
<p>ä¸¤ç§æ–¹æ³•ï¼š</p>
<p>1.ä½¿ç”¨ <code>init_chat_model</code>(é€šç”¨é«˜å±‚å°è£…)
è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„è¾…åŠ©å‡½æ•°ï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£æ¥åˆå§‹åŒ–æ¥è‡ª ä¸åŒæä¾›å•†
çš„èŠå¤©æ¨¡å‹ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://python.langchain.com/api_reference/langchain/chat_models/langchain.chat_models.base.init_chat_model.html">init_chat_model
â€” ğŸ¦œğŸ”— LangChain æ–‡æ¡£ â€” init_chat_model â€” ğŸ¦œğŸ”— LangChain
documentation</a></p>
<p>2.ä½¿ç”¨å¦‚ChatOpenAI (ç‰¹å®šäºæä¾›å•†çš„ç±») è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º OpenAI API
è®¾è®¡çš„ç±»ï¼Œæä¾›äº†å¯¹ OpenAI æ¨¡å‹æ‰€æœ‰åŠŸèƒ½çš„å®Œå…¨è®¿é—®ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from langchain.chat_models import init_chat_model</span><br><span class="line"></span><br><span class="line">os.environ[&quot;OPENAI_API_KEY&quot;] = &quot;sk-&quot;</span><br><span class="line">#ä½¿ç”¨â€˜&#123;model_provider&#125;:&#123;model&#125;â€™æ ¼å¼åœ¨å•ä¸ªå‚æ•°ä¸­æŒ‡å®šæ¨¡å‹å’Œæ¨¡å‹æä¾›è€…ï¼Œä¾‹å¦‚â€œopenai:o1â€</span><br><span class="line">llm = init_chat_model(&quot;openai:qwen-plus-2025-04-28&quot;,</span><br><span class="line">                      base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span><br><span class="line">                      )</span><br></pre></td></tr></table></figure>
<h4 id="æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹">æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹</h4>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å°†èŠå¤©æ¨¡å‹é›†æˆåˆ°ä¸€ä¸ªç®€å•çš„èŠ‚ç‚¹ä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#å®šä¹‰èŠ‚ç‚¹chatbot</span><br><span class="line">def chatbot(state: State):</span><br><span class="line">    return &#123;&quot;messages&quot;: [llm.invoke(state[&quot;messages&quot;])]&#125;</span><br><span class="line"></span><br><span class="line">graph_builder.add_node(&quot;chatbot&quot;, chatbot)</span><br></pre></td></tr></table></figure>
<p><code>chatbot</code> èŠ‚ç‚¹å‡½æ•°å¦‚ä½•å°†å½“å‰ <code>çŠ¶æ€</code>
ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ›´æ–°çš„ <code>æ¶ˆæ¯</code>
åˆ—è¡¨çš„å­—å…¸ï¼Œé”®ä¸ºâ€œmessagesâ€ã€‚è¿™æ˜¯æ‰€æœ‰ LangGraph èŠ‚ç‚¹å‡½æ•°çš„åŸºæœ¬æ¨¡å¼ã€‚</p>
<p>æˆ‘ä»¬ <code>çŠ¶æ€</code> ä¸­çš„ <code>add_messages</code> å‡½æ•°ä¼šå°† LLM
çš„å“åº”æ¶ˆæ¯è¿½åŠ åˆ°çŠ¶æ€ä¸­å·²æœ‰çš„æ¶ˆæ¯ä¹‹åã€‚</p>
<h4 id="æ·»åŠ ä¸€ä¸ª-å…¥å£-ç‚¹">æ·»åŠ ä¸€ä¸ª <code>å…¥å£</code> ç‚¹</h4>
<p>æ·»åŠ ä¸€ä¸ª <code>å…¥å£</code>
ç‚¹ï¼Œä»¥å‘Šè¯‰å›¾æ¯æ¬¡è¿è¡Œæ—¶<strong>ä»ä½•å¤„å¼€å§‹å·¥ä½œ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">graph_builder.add_edge(START, &quot;chatbot&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–è¯‘å›¾">ç¼–è¯‘å›¾</h4>
<p>åœ¨è¿è¡Œå›¾ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œç¼–è¯‘ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å›¾æ„å»ºå™¨ä¸Šè°ƒç”¨
<code>compile()</code> æ¥å®Œæˆã€‚è¿™å°†åˆ›å»ºä¸€ä¸ª
<code>CompiledGraph</code>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„çŠ¶æ€ä¸Šè°ƒç”¨å®ƒã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">graph = graph_builder.compile()</span><br></pre></td></tr></table></figure>
<h4 id="å¯è§†åŒ–å›¾">å¯è§†åŒ–å›¾</h4>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>get_graph</code> æ–¹æ³•å’Œå…¶ä¸­ä¸€ä¸ªâ€œç»˜å›¾â€æ–¹æ³•ï¼ˆä¾‹å¦‚
<code>draw_ascii</code> æˆ– <code>draw_png</code>ï¼‰æ¥å¯è§†åŒ–å›¾ã€‚è¿™äº›
<code>draw</code> æ–¹æ³•éƒ½éœ€è¦é¢å¤–çš„ä¾èµ–é¡¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from IPython.display import Image, display</span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    display(Image(graph.get_graph().draw_mermaid_png()))</span><br><span class="line">except Exception:</span><br><span class="line">    # This requires some extra dependencies and is optional</span><br><span class="line">    pass</span><br></pre></td></tr></table></figure>
<h4 id="è¿è¡ŒèŠå¤©æœºå™¨äºº">è¿è¡ŒèŠå¤©æœºå™¨äºº</h4>
<p>è¿è¡ŒèŠå¤©æœºå™¨äºº</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">stream_graph_updates</span>(<span class="params">user_input: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="keyword">for</span> event <span class="keyword">in</span> graph.stream(&#123;<span class="string">&quot;messages&quot;</span>: [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_input&#125;]&#125;):</span><br><span class="line">        <span class="built_in">print</span>(event)</span><br><span class="line">        <span class="comment">#stream è¿”å›çš„æ¯ä¸ª event é€šå¸¸æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œé”®æ˜¯å›¾ä¸­èŠ‚ç‚¹çš„åç§°ï¼Œå€¼æ˜¯è¯¥èŠ‚ç‚¹å®Œæˆåçš„çŠ¶æ€æ›´æ–°ã€‚</span></span><br><span class="line">        <span class="keyword">for</span> value <span class="keyword">in</span> event.values():</span><br><span class="line">            <span class="comment">#æ¶ˆæ¯åˆ—è¡¨ä¸­çš„æœ€åä¸€æ¡æ¶ˆæ¯çš„æ–‡æœ¬å†…å®¹</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Assistant:&quot;</span>, value[<span class="string">&quot;messages&quot;</span>][-<span class="number">1</span>].content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        user_input = <span class="built_in">input</span>(<span class="string">&quot;User: &quot;</span>)</span><br><span class="line">        <span class="comment">#é€€å‡º</span></span><br><span class="line">        <span class="keyword">if</span> user_input.lower() <span class="keyword">in</span> [<span class="string">&quot;quit&quot;</span>, <span class="string">&quot;exit&quot;</span>, <span class="string">&quot;q&quot;</span>]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Goodbye!&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment">#è°ƒç”¨</span></span><br><span class="line">        stream_graph_updates(user_input)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="comment"># fallback if input() is not available</span></span><br><span class="line">        user_input = <span class="string">&quot;What do you know about LangGraph?&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;User: &quot;</span> + user_input)</span><br><span class="line">        stream_graph_updates(user_input)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>graph.stream() æ˜¯ LangGraph
çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚å®ƒä¼šæ‰§è¡Œæ•´ä¸ªå›¾ï¼ˆGraphï¼‰ï¼Œä½†ä¸æ˜¯ä¸€æ¬¡æ€§è¿”å›æœ€ç»ˆç»“æœï¼Œè€Œæ˜¯åƒè§†é¢‘æµä¸€æ ·ï¼Œä¸€æ­¥ä¸€æ­¥åœ°è¿”å›ä¸­é—´è¿‡ç¨‹çš„æ›´æ–°ã€‚è¿™ä½¿å¾—æ‚¨å¯ä»¥å®æ—¶çœ‹åˆ°æ¨¡å‹ç”Ÿæˆå†…å®¹çš„æ¯ä¸€ä¸ªéƒ¨åˆ†ã€‚</p>
</blockquote>
<h3 id="æ·»åŠ ç½‘é¡µæœç´¢å·¥å…·">æ·»åŠ ç½‘é¡µæœç´¢å·¥å…·</h3>
<h4 id="è·å–tavily-api">è·å–Tavily api</h4>
<p><a target="_blank" rel="noopener" href="https://tavily.com/">Tavily çš„æœç´¢ API</a> æ˜¯ä¸€æ¬¾ä¸“ä¸º AI
ä»£ç† (LLM) æ„å»ºçš„æœç´¢å¼•æ“ï¼Œèƒ½å¤Ÿå¿«é€Ÿæä¾›å®æ—¶ã€å‡†ç¡®å’ŒåŸºäºäº‹å®çš„ç»“æœã€‚</p>
<p>æ¯æœˆ 1,000 æ¬¡å…è´¹æœç´¢</p>
<p><a target="_blank" rel="noopener" href="https://python.langchain.ac.cn/docs/integrations/tools/tavily_search/">Tavily
Search | ğŸ¦œï¸ğŸ”— LangChain æ¡†æ¶</a></p>
<p>è·å–api<a target="_blank" rel="noopener" href="https://app.tavily.com/home">Tavily AI â€” Tavily
AI</a></p>
<h4 id="æ·»åŠ å·¥å…·">æ·»åŠ å·¥å…·</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from langchain_tavily import TavilySearch</span><br><span class="line"></span><br><span class="line">tool = TavilySearch(</span><br><span class="line">    tavily_api_key=&quot;tvly-dev-&quot;,</span><br><span class="line">    max_results=2)</span><br><span class="line">tools = [tool]</span><br><span class="line">tool.invoke(&quot;æè¶…æ˜¯è°?&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="å®šä¹‰å›¾">å®šä¹‰å›¾</h4>
<p>åœ¨LLMä¸Šæ·»åŠ <code>bind_tools</code>ã€‚è¿™è®©LLMçŸ¥é“å¦‚æœå®ƒæƒ³ä½¿ç”¨æœç´¢å¼•æ“ï¼Œåº”ä½¿ç”¨æ­£ç¡®çš„JSONæ ¼å¼ã€‚</p>
<p>å®šä¹‰èŠå¤©æ¨¡å‹llmï¼ˆä»£ç åŒä¸Šï¼‰</p>
<p>å°†toolsæ•´åˆåˆ°<code>StateGraph</code>ä¸­</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Annotated</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> typing_extensions <span class="keyword">import</span> TypedDict</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> langgraph.graph <span class="keyword">import</span> StateGraph, START, END</span><br><span class="line"><span class="keyword">from</span> langgraph.graph.message <span class="keyword">import</span> add_messages</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">State</span>(<span class="title class_ inherited__">TypedDict</span>):</span><br><span class="line">    messages: Annotated[<span class="built_in">list</span>, add_messages]</span><br><span class="line"></span><br><span class="line">graph_builder = StateGraph(State)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ä¸€ä¸ªæˆ–å¤šä¸ª**å·¥å…·ï¼ˆtoolsï¼‰ ç»‘å®šåˆ°ä¸€ä¸ª å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰**ä¸Šï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªæ–°çš„ã€å…·å¤‡å·¥å…·è°ƒç”¨èƒ½åŠ›çš„ LLM å®ä¾‹</span></span><br><span class="line">llm_with_tools = llm.bind_tools(tools)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chatbot</span>(<span class="params">state: State</span>):</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;messages&quot;</span>: [llm_with_tools.invoke(state[<span class="string">&quot;messages&quot;</span>])]&#125;</span><br><span class="line"></span><br><span class="line">graph_builder.add_node(<span class="string">&quot;chatbot&quot;</span>, chatbot)</span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºä¸€ä¸ªè¿è¡Œå·¥å…·çš„å‡½æ•°">åˆ›å»ºä¸€ä¸ªè¿è¡Œå·¥å…·çš„å‡½æ•°</h4>
<p>ç°åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥è¿è¡Œè¢«è°ƒç”¨çš„å·¥å…·ã€‚é€šè¿‡å°†å·¥å…·æ·»åŠ åˆ°ä¸€ä¸ªåä¸º<code>BasicToolNode</code>çš„æ–°èŠ‚ç‚¹æ¥å®Œæˆï¼Œè¯¥èŠ‚ç‚¹æ£€æŸ¥çŠ¶æ€ä¸­çš„æœ€æ–°æ¶ˆæ¯ï¼Œå¦‚æœæ¶ˆæ¯åŒ…å«<code>tool_calls</code>ï¼Œåˆ™è°ƒç”¨å·¥å…·ã€‚å®ƒä¾èµ–äºLLMçš„<code>tool_calling</code>æ”¯æŒï¼Œè¯¥æ”¯æŒåœ¨Anthropicã€OpenAIã€Google
Geminiä»¥åŠè®¸å¤šå…¶ä»–LLMæä¾›å•†ä¸­å¯ç”¨ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ __call__ æ–¹æ³•ï¼Œè®©è¿™ä¸ªç±»çš„å®ä¾‹å¯ä»¥åƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨</span></span><br><span class="line"><span class="comment"># inputs æ˜¯ langgraph ä¼ è¿›æ¥çš„å½“å‰çŠ¶æ€ï¼Œæ˜¯ä¸€ä¸ªå­—å…¸</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, inputs: <span class="built_in">dict</span></span>):</span><br><span class="line">    <span class="comment"># 1. ä»çŠ¶æ€ä¸­è·å–æœ€æ–°çš„æ¶ˆæ¯</span></span><br><span class="line">    <span class="comment"># ä½¿ç”¨äº†â€œæµ·è±¡æ“ä½œç¬¦â€ :=ï¼Œå…ˆä» inputs ä¸­è·å– &#x27;messages&#x27; åˆ—è¡¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›ç©ºåˆ—è¡¨ []</span></span><br><span class="line">    <span class="comment"># ç„¶åæ£€æŸ¥åˆ—è¡¨æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™å–å‡ºæœ€åä¸€æ¡æ¶ˆæ¯ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> messages := inputs.get(<span class="string">&quot;messages&quot;</span>, []):</span><br><span class="line">        message = messages[-<span class="number">1</span>]  <span class="comment"># é€šå¸¸ï¼Œæœ€åä¸€æ¡æ¶ˆæ¯æ˜¯ AI å‘å‡ºçš„ï¼Œå…¶ä¸­åŒ…å«å·¥å…·è°ƒç”¨è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># å¦‚æœæ²¡æœ‰æ¶ˆæ¯ï¼Œå°±æŠ¥é”™ï¼Œå› ä¸ºè¿™ä¸ªèŠ‚ç‚¹ä¸çŸ¥é“è¯¥åšä»€ä¹ˆ</span></span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;No message found in input&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2. å‡†å¤‡ä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨æ¥å­˜æ”¾æ‰€æœ‰å·¥å…·çš„æ‰§è¡Œç»“æœ</span></span><br><span class="line">    outputs = []</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. éå† AI æ¶ˆæ¯ä¸­è¯·æ±‚çš„æ‰€æœ‰å·¥å…·è°ƒç”¨</span></span><br><span class="line">    <span class="keyword">for</span> tool_call <span class="keyword">in</span> message.tool_calls:</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># 4. æ‰§è¡Œå·¥å…·</span></span><br><span class="line">        <span class="comment"># a. tool_call[&quot;name&quot;] è·å–å·¥å…·åç§° (ä¾‹å¦‚ &#x27;tavily_search_results_json&#x27;)</span></span><br><span class="line">        <span class="comment"># b. self.tools_by_name[...] ä»é¢„å­˜çš„å·¥å…·å­—å…¸ä¸­æ‰¾åˆ°å¯¹åº”çš„å·¥å…·å¯¹è±¡</span></span><br><span class="line">        <span class="comment"># c. .invoke(tool_call[&quot;args&quot;]) ä½¿ç”¨ LLM æä¾›çš„å‚æ•°æ¥è°ƒç”¨è¯¥å·¥å…·</span></span><br><span class="line">        tool_result = <span class="variable language_">self</span>.tools_by_name[tool_call[<span class="string">&quot;name&quot;</span>]].invoke(</span><br><span class="line">            tool_call[<span class="string">&quot;args&quot;</span>]</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 5. å°†å·¥å…·æ‰§è¡Œç»“æœæ‰“åŒ…æˆ ToolMessage</span></span><br><span class="line">        <span class="comment"># è¿™æ˜¯ langgraph/langchain çš„æ ‡å‡†æ ¼å¼ï¼Œç”¨äºå‘Šè¯‰ LLM å·¥å…·æ‰§è¡Œçš„ç»“æœæ˜¯ä»€ä¹ˆ</span></span><br><span class="line">        outputs.append(</span><br><span class="line">            ToolMessage(</span><br><span class="line">                content=json.dumps(tool_result),  <span class="comment"># å·¥å…·ç»“æœå¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç”¨ json.dumps åºåˆ—åŒ–</span></span><br><span class="line">                name=tool_call[<span class="string">&quot;name&quot;</span>],  <span class="comment"># å‘Šè¯‰ LLM è¿™æ˜¯å“ªä¸ªå·¥å…·çš„ç»“æœ</span></span><br><span class="line">                tool_call_id=tool_call[<span class="string">&quot;id&quot;</span>],  <span class="comment"># å¿…é¡»æä¾›åŸå§‹è¯·æ±‚çš„ IDï¼Œä»¥ä¾¿ LLM çŸ¥é“è¿™ä¸ªç»“æœå¯¹åº”å“ªä¸ªè¯·æ±‚</span></span><br><span class="line">            )</span><br><span class="line">        )</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 6. è¿”å›ç»“æœï¼Œæ›´æ–°å›¾çš„çŠ¶æ€</span></span><br><span class="line">    <span class="comment"># è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­ &#x27;messages&#x27; é”®å¯¹åº”ç€åŒ…å«æ‰€æœ‰ ToolMessage çš„åˆ—è¡¨</span></span><br><span class="line">    <span class="comment"># langgraph ä¼šå°†è¿™ä¸ªåˆ—è¡¨ä¸­çš„æ¶ˆæ¯è¿½åŠ åˆ°ä¸»çŠ¶æ€çš„ &#x27;messages&#x27; åˆ—è¡¨ä¸­</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;messages&quot;</span>: outputs&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>call</strong> æ˜¯ Python ä¸­ä¸€ä¸ªéå¸¸ç‰¹æ®Šçš„â€œé­”æœ¯æ–¹æ³•â€ï¼ˆmagic
methodï¼‰ã€‚å®ƒçš„ä½œç”¨æ˜¯ è®©ä¸€ä¸ªç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰èƒ½å¤Ÿåƒå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ ã€‚</p>
<p>è¿™åœ¨ langgraph ä¸­æ˜¯ä¸€ç§å¸¸è§ä¸”æ ¸å¿ƒçš„è®¾è®¡æ¨¡å¼ã€‚å®ƒçš„å«ä¹‰æ˜¯ï¼š</p>
<ol type="1">
<li>èŠ‚ç‚¹å³å‡½æ•° ï¼š BasicToolNode çš„å®ä¾‹ï¼ˆæ¯”å¦‚ tool_node
ï¼‰æœ¬èº«å°±ä»£è¡¨äº†å›¾ä¸­çš„ä¸€ä¸ªå¯æ‰§è¡ŒèŠ‚ç‚¹ã€‚</li>
<li>æ‰§è¡Œé€»è¾‘ ï¼šå½“ langgraph çš„çŠ¶æ€æœºè¿è¡Œåˆ°è¿™ä¸ª tool_node
èŠ‚ç‚¹æ—¶ï¼Œå®ƒä¼šç›´æ¥â€œè°ƒç”¨â€è¿™ä¸ªèŠ‚ç‚¹å¯¹è±¡ï¼Œå¹¶æŠŠå½“å‰çš„çŠ¶æ€ï¼ˆ inputs
å­—å…¸ï¼‰ä¼ é€’ç»™å®ƒ</li>
</ol>
</blockquote>
<p>å¯ä»¥ä½¿ç”¨LangGraphé¢„æ„å»ºçš„<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/reference/agents/#langgraph.prebuilt.tool_node.ToolNode">ToolNode</a>ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langgraph.prebuilt <span class="keyword">import</span> ToolNode</span><br><span class="line"></span><br><span class="line">tool_node = ToolNode(tools=[tool])</span><br><span class="line">graph_builder.add_node(<span class="string">&quot;tools&quot;</span>, tool_node)</span><br></pre></td></tr></table></figure>
<h4 id="å®šä¹‰conditional_edges">å®šä¹‰<code>conditional_edges</code></h4>
<p>æ·»åŠ äº†å·¥å…·èŠ‚ç‚¹åï¼Œç°åœ¨æ‚¨å¯ä»¥å®šä¹‰<code>conditional_edges</code>ã€‚</p>
<p><strong>è¾¹ï¼ˆEdgesï¼‰</strong>å°†æ§åˆ¶æµä»ä¸€ä¸ªèŠ‚ç‚¹è·¯ç”±åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚<strong>æ¡ä»¶è¾¹ï¼ˆConditional
edgesï¼‰</strong>ä»å•ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œé€šå¸¸åŒ…å«â€œifâ€è¯­å¥ï¼Œæ ¹æ®å½“å‰å›¾çŠ¶æ€è·¯ç”±åˆ°ä¸åŒçš„èŠ‚ç‚¹ã€‚è¿™äº›å‡½æ•°æ¥æ”¶å½“å‰çš„å›¾<code>state</code>å¹¶è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‡ç¤ºæ¥ä¸‹æ¥è¦è°ƒç”¨å“ªä¸ªï¼ˆæˆ–å“ªäº›ï¼‰èŠ‚ç‚¹ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå®šä¹‰ä¸€ä¸ªåä¸º<code>route_tools</code>çš„è·¯ç”±å‡½æ•°ï¼Œå®ƒæ£€æŸ¥èŠå¤©æœºå™¨äººè¾“å‡ºä¸­çš„<code>tool_calls</code>ã€‚é€šè¿‡è°ƒç”¨<code>add_conditional_edges</code>å°†æ­¤å‡½æ•°æä¾›ç»™å›¾ï¼Œè¿™ä¼šå‘Šè¯‰å›¾ï¼Œæ— è®ºä½•æ—¶<code>chatbot</code>èŠ‚ç‚¹å®Œæˆï¼Œéƒ½è¦æ£€æŸ¥æ­¤å‡½æ•°ä»¥ç¡®å®šä¸‹ä¸€æ­¥å»å“ªé‡Œã€‚</p>
<p>å¦‚æœå­˜åœ¨å·¥å…·è°ƒç”¨ï¼Œæ¡ä»¶å°†è·¯ç”±åˆ°<code>tools</code>ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è·¯ç”±åˆ°<code>END</code>ã€‚ç”±äºæ¡ä»¶å¯ä»¥è¿”å›<code>END</code>ï¼Œå› æ­¤è¿™æ¬¡æ‚¨ä¸éœ€è¦æ˜ç¡®è®¾ç½®<code>finish_point</code>ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">route_tools</span>(<span class="params"></span></span><br><span class="line"><span class="params">     state: State,</span></span><br><span class="line"><span class="params"> </span>):</span><br><span class="line">     <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">     ç”¨äº conditional_edge çš„è·¯ç”±å‡½æ•°ï¼š</span></span><br><span class="line"><span class="string">     - å¦‚æœæœ€åä¸€æ¡æ¶ˆæ¯åŒ…å«å·¥å…·è°ƒç”¨ï¼Œåˆ™è·¯ç”±åˆ° ToolNode</span></span><br><span class="line"><span class="string">     - å¦åˆ™è·¯ç”±åˆ°ç»“æŸèŠ‚ç‚¹</span></span><br><span class="line"><span class="string">     &quot;&quot;&quot;</span></span><br><span class="line">     <span class="comment"># å¤„ç† state ä¸ºåˆ—è¡¨çš„æƒ…å†µï¼ˆå¯èƒ½æ˜¯æ¶ˆæ¯åˆ—è¡¨ï¼‰</span></span><br><span class="line">     <span class="keyword">if</span> <span class="built_in">isinstance</span>(state, <span class="built_in">list</span>):</span><br><span class="line">         ai_message = state[-<span class="number">1</span>]  <span class="comment"># è·å–æœ€åä¸€æ¡æ¶ˆæ¯</span></span><br><span class="line">     <span class="comment"># å¤„ç† state ä¸ºå­—å…¸çš„æƒ…å†µï¼ˆåŒ…å« messages å­—æ®µï¼‰</span></span><br><span class="line">     <span class="keyword">elif</span> messages := state.get(<span class="string">&quot;messages&quot;</span>, []):</span><br><span class="line">         ai_message = messages[-<span class="number">1</span>]  <span class="comment"># è·å–æœ€åä¸€æ¡æ¶ˆæ¯</span></span><br><span class="line">     <span class="keyword">else</span>:</span><br><span class="line">         <span class="keyword">raise</span> ValueError(<span class="string">f&quot;è¾“å…¥çŠ¶æ€ä¸­æ²¡æœ‰æ‰¾åˆ°æ¶ˆæ¯: <span class="subst">&#123;state&#125;</span>&quot;</span>)</span><br><span class="line">     </span><br><span class="line">     <span class="comment"># æ£€æŸ¥æ¶ˆæ¯æ˜¯å¦æœ‰å·¥å…·è°ƒç”¨</span></span><br><span class="line">     <span class="keyword">if</span> <span class="built_in">hasattr</span>(ai_message, <span class="string">&quot;tool_calls&quot;</span>) <span class="keyword">and</span> <span class="built_in">len</span>(ai_message.tool_calls) &gt; <span class="number">0</span>:</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;tools&quot;</span>  <span class="comment"># æœ‰å·¥å…·è°ƒç”¨ï¼Œè¿”å› &quot;tools&quot; è·¯ç”±åˆ°å·¥å…·èŠ‚ç‚¹</span></span><br><span class="line">     <span class="keyword">return</span> END  <span class="comment"># æ²¡æœ‰å·¥å…·è°ƒç”¨ï¼Œè¿”å› END ç»“æŸæµç¨‹</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨é¢„æ„å»ºçš„<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/reference/prebuilt/#tools_condition">tools_condition</a>ä»£æ›¿route_toolsä»¥ä½¿å…¶æ›´ç®€æ´ã€‚</p>
<blockquote>
<p><code>tools_condition</code> å‡½æ•°åœ¨èŠå¤©æœºå™¨äººéœ€è¦ä½¿ç”¨å·¥å…·æ—¶è¿”å›
â€œtoolsâ€ï¼Œå¦‚æœå¯ä»¥ä¸ä½¿ç”¨å“åº”åˆ™è¿”å› â€œENDâ€ã€‚</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langgraph.prebuilt <span class="keyword">import</span> tools_condition</span><br><span class="line">graph_builder.add_conditional_edges(</span><br><span class="line">    <span class="string">&quot;chatbot&quot;</span>,</span><br><span class="line">    tools_condition,</span><br><span class="line">    &#123;<span class="string">&quot;tools&quot;</span>: <span class="string">&quot;tools&quot;</span>, END: END&#125;,</span><br><span class="line">)</span><br><span class="line">graph_builder.add_edge(<span class="string">&quot;tools&quot;</span>, <span class="string">&quot;chatbot&quot;</span>)</span><br><span class="line">graph_builder.add_edge(START, <span class="string">&quot;chatbot&quot;</span>)</span><br><span class="line">graph = graph_builder.<span class="built_in">compile</span>()</span><br></pre></td></tr></table></figure>
<h4 id="å¯è§†åŒ–å›¾-1">å¯è§†åŒ–å›¾</h4>
<p>å¦‚ä¸Š</p>
<h4 id="å‘æœºå™¨äººæé—®">å‘æœºå™¨äººæé—®</h4>
<p>ç°åœ¨æ‚¨å¯ä»¥å‘èŠå¤©æœºå™¨äººæå‡ºè¶…å‡ºå…¶è®­ç»ƒæ•°æ®èŒƒå›´çš„é—®é¢˜ã€‚</p>
<p>å¦‚ä¸Š</p>
<h3 id="æ·»åŠ è®°å¿†åŠŸèƒ½">æ·»åŠ è®°å¿†åŠŸèƒ½</h3>
<p>LangGraph
é€šè¿‡<strong>æŒä¹…æ€§æ£€æŸ¥ç‚¹</strong>è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœæ‚¨åœ¨ç¼–è¯‘å›¾æ—¶æä¾›ä¸€ä¸ª<code>checkpointer</code>ï¼Œå¹¶åœ¨è°ƒç”¨å›¾æ—¶æä¾›ä¸€ä¸ª<code>thread_id</code>ï¼ŒLangGraph
ä¼šåœ¨æ¯ä¸€æ­¥ä¹‹åè‡ªåŠ¨ä¿å­˜çŠ¶æ€ã€‚å½“æ‚¨ä½¿ç”¨ç›¸åŒçš„<code>thread_id</code>å†æ¬¡è°ƒç”¨å›¾æ—¶ï¼Œå›¾ä¼šåŠ è½½å…¶ä¿å­˜çš„çŠ¶æ€ï¼Œå…è®¸èŠå¤©æœºå™¨äººä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ç»§ç»­ã€‚</p>
<p>æˆ‘ä»¬ç¨åä¼šçœ‹åˆ°ï¼Œ<strong>æ£€æŸ¥ç‚¹</strong>æ¯”ç®€å•çš„èŠå¤©è®°å¿†åŠŸèƒ½<em>å¼ºå¤§å¾—å¤š</em>â€”â€”å®ƒå…è®¸æ‚¨éšæ—¶ä¿å­˜å’Œæ¢å¤å¤æ‚çŠ¶æ€ï¼Œç”¨äºé”™è¯¯æ¢å¤ã€äººå·¥å¹²é¢„å·¥ä½œæµã€æ—¶é—´æ—…è¡Œäº¤äº’ç­‰ã€‚ä½†é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ·»åŠ æ£€æŸ¥ç‚¹ä»¥å®ç°å¤šè½®å¯¹è¯ã€‚</p>
<h4 id="åˆ›å»º-memorysaver-æ£€æŸ¥ç‚¹">åˆ›å»º <code>MemorySaver</code>
æ£€æŸ¥ç‚¹</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> langgraph.checkpoint.memory <span class="keyword">import</span> MemorySaver</span><br><span class="line"></span><br><span class="line">memory = MemorySaver()</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ªå†…å­˜ä¸­çš„æ£€æŸ¥ç‚¹ï¼Œæ–¹ä¾¿æœ¬æ•™ç¨‹ä½¿ç”¨ã€‚ç„¶è€Œï¼Œåœ¨ç”Ÿäº§åº”ç”¨ç¨‹åºä¸­ï¼Œæ‚¨å¯èƒ½ä¼šå°†å…¶æ›´æ”¹ä¸ºä½¿ç”¨
<code>SqliteSaver</code> æˆ– <code>PostgresSaver</code>
å¹¶è¿æ¥æ•°æ®åº“ã€‚</p>
<h4 id="ç¼–è¯‘å›¾-1">ç¼–è¯‘å›¾</h4>
<p>ä½¿ç”¨æä¾›çš„æ£€æŸ¥ç‚¹ç¼–è¯‘å›¾ï¼Œå›¾åœ¨éå†æ¯ä¸ªèŠ‚ç‚¹æ—¶å°†å¯¹ <code>State</code>
è¿›è¡Œæ£€æŸ¥ç‚¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">graph = graph_builder.compile(checkpointer=memory)</span><br></pre></td></tr></table></figure>
<h4 id="ä¸æ‚¨çš„èŠå¤©æœºå™¨äººäº’åŠ¨">ä¸æ‚¨çš„èŠå¤©æœºå™¨äººäº’åŠ¨</h4>
<ol type="1">
<li><p>é€‰æ‹©ä¸€ä¸ªçº¿ç¨‹ä½œä¸ºæ­¤å¯¹è¯çš„é”®ã€‚</p>
<p>thread_idå†³å®šå¯¹è¯çª—å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config = &#123;&quot;configurable&quot;: &#123;&quot;thread_id&quot;: &quot;1&quot;&#125;&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>è°ƒç”¨æ‚¨çš„èŠå¤©æœºå™¨äºº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">user_input = &quot;æˆ‘æ˜¯è°&quot;</span><br><span class="line"></span><br><span class="line"># The config is the **second positional argument** to stream() or invoke()!</span><br><span class="line">events = graph.stream(</span><br><span class="line">    &#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_input&#125;]&#125;,</span><br><span class="line">    config,</span><br><span class="line">    stream_mode=&quot;values&quot;,</span><br><span class="line">)</span><br><span class="line">for event in events:</span><br><span class="line">    event[&quot;messages&quot;][-1].pretty_print()</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="æ·»åŠ äººå·¥å¹²é¢„">æ·»åŠ äººå·¥å¹²é¢„</h3>
<p>ä»£ç†å¯èƒ½ä¸å¯é ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦äººå·¥è¾“å…¥æ‰èƒ½æˆåŠŸå®Œæˆä»»åŠ¡ã€‚åŒæ ·ï¼Œå¯¹äºæŸäº›æ“ä½œï¼Œæ‚¨å¯èƒ½éœ€è¦åœ¨è¿è¡Œå‰è¦æ±‚äººå·¥æ‰¹å‡†ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡æŒ‰é¢„æœŸè¿è¡Œã€‚</p>
<p>LangGraph çš„<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/concepts/persistence/">æŒä¹…åŒ–</a>å±‚æ”¯æŒ<strong>äººå·¥å¹²é¢„</strong>å·¥ä½œæµï¼Œå…è®¸æ ¹æ®ç”¨æˆ·åé¦ˆæš‚åœå’Œæ¢å¤æ‰§è¡Œã€‚æ­¤åŠŸèƒ½çš„ä¸»è¦æ¥å£æ˜¯<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/how-tos/human_in_the_loop/add-human-in-the-loop/"><code>interrupt</code></a>å‡½æ•°ã€‚åœ¨èŠ‚ç‚¹å†…è°ƒç”¨<code>interrupt</code>å°†æš‚åœæ‰§è¡Œã€‚é€šè¿‡ä¼ å…¥<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/concepts/low_level/#command">Command</a>ï¼Œå¯ä»¥æ¢å¤æ‰§è¡Œå¹¶æ¥æ”¶æ¥è‡ªäººå·¥çš„æ–°è¾“å…¥ã€‚<code>interrupt</code>åœ¨åŠŸèƒ½ä¸Šç±»ä¼¼äº
Python çš„å†…ç½®<code>input()</code>ï¼Œ<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/how-tos/human_in_the_loop/add-human-in-the-loop/">ä½†æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹</a>ã€‚</p>
<h4 id="æ·»åŠ human_assistanceå·¥å…·">æ·»åŠ <code>human_assistance</code>å·¥å…·</h4>
<p>å°†<code>human_assistance</code>å·¥å…·æ·»åŠ åˆ°èŠå¤©æœºå™¨äººã€‚æ­¤å·¥å…·ä½¿ç”¨<code>interrupt</code>ä»äººå·¥æ¥æ”¶ä¿¡æ¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># æ·»åŠ äººå·¥å¹²é¢„åŠŸèƒ½</span><br><span class="line"># å¯¼å…¥LangGraphçš„ä¸­æ–­æœºåˆ¶å’Œå‘½ä»¤ç±»å‹</span><br><span class="line">from langgraph.types import Command, interrupt</span><br><span class="line"># å¯¼å…¥LangChainçš„å·¥å…·è£…é¥°å™¨</span><br><span class="line">from langchain_core.tools import tool</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨@toolè£…é¥°å™¨å°†å‡½æ•°æ ‡è®°ä¸ºå¯è¢«LLMè°ƒç”¨çš„å·¥å…·</span><br><span class="line">@tool</span><br><span class="line">def human_assistance(query: str) -&gt; str:</span><br><span class="line">    &quot;&quot;&quot;è¯·æ±‚äººå·¥ååŠ©çš„å·¥å…·å‡½æ•°ã€‚</span><br><span class="line">    å½“LLMé‡åˆ°éœ€è¦äººå·¥åˆ¤æ–­æˆ–å¸®åŠ©çš„æƒ…å†µæ—¶ï¼Œä¼šè°ƒç”¨æ­¤å·¥å…·ã€‚</span><br><span class="line">    è¯¥å‡½æ•°ä¼šæš‚åœå›¾çš„æ‰§è¡Œï¼Œç­‰å¾…äººå·¥æ“ä½œå‘˜æä¾›å“åº”ã€‚</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # interrupt()å‡½æ•°ä¼šæš‚åœå›¾çš„æ‰§è¡Œï¼Œç­‰å¾…äººå·¥è¾“å…¥</span><br><span class="line">    # ä¼ å…¥çš„å­—å…¸åŒ…å«æŸ¥è¯¢ä¿¡æ¯ï¼Œäººå·¥æ“ä½œå‘˜ä¼šçœ‹åˆ°è¿™ä¸ªæŸ¥è¯¢</span><br><span class="line">    human_response = interrupt(&#123;&quot;query&quot;: query&#125;)</span><br><span class="line">    </span><br><span class="line">    # ä»äººå·¥å“åº”ä¸­æå–æ•°æ®å¹¶è¿”å›ç»™LLM</span><br><span class="line">    # human_responseæ˜¯ä¸€ä¸ªå­—å…¸ï¼Œ&quot;data&quot;å­—æ®µåŒ…å«äººå·¥æä¾›çš„å®é™…å“åº”</span><br><span class="line">    return human_response[&quot;data&quot;]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ç®€å•æ¥è¯´ï¼Œ
<strong>è°ƒç”¨å“ªä¸ªå·¥å…·ï¼Œä»¥åŠä½•æ—¶è°ƒç”¨ï¼Œå®Œå…¨æ˜¯ç”±å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ ¹æ®ä½ ç»™å®ƒçš„æŒ‡ä»¤ï¼ˆPromptï¼‰æ¥å†³å®šçš„ã€‚</strong></p>
</blockquote>
<h4 id="å®šä¹‰chatbot">å®šä¹‰chatbot</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def chatbot(state: State):</span><br><span class="line">    # è°ƒç”¨ç»‘å®šäº†å·¥å…·çš„LLMï¼ˆllm_with_toolsï¼‰ï¼Œä¼ å…¥å½“å‰çš„æ¶ˆæ¯å†å²</span><br><span class="line">    # LLMä¼šæ ¹æ®æœ€æ–°çš„æ¶ˆæ¯å†³å®šæ˜¯ç”Ÿæˆæ–‡æœ¬å›å¤ï¼Œè¿˜æ˜¯è°ƒç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå·¥å…·</span><br><span class="line">    message = llm_with_tools.invoke(state[&quot;messages&quot;])</span><br><span class="line">    </span><br><span class="line">    # --- å…³é”®æ–­è¨€é€»è¾‘ ---</span><br><span class="line">    assert len(message.tool_calls) &lt;= 1</span><br><span class="line">    </span><br><span class="line">    # å°†LLMç”Ÿæˆçš„æ–°æ¶ˆæ¯ï¼ˆå¯èƒ½æ˜¯æ–‡æœ¬å›å¤ï¼Œä¹Ÿå¯èƒ½æ˜¯å·¥å…·è°ƒç”¨è¯·æ±‚ï¼‰è¿”å›</span><br><span class="line">    # è¿™ä¸ªè¿”å›å€¼ä¼šä»¥å­—å…¸çš„å½¢å¼æ›´æ–°åˆ°çŠ¶æ€ï¼ˆStateï¼‰å¯¹è±¡ä¸­</span><br><span class="line">    return &#123;&quot;messages&quot;: [message]&#125;</span><br><span class="line"></span><br><span class="line"># å°† chatbot å‡½æ•°ä½œä¸ºåä¸º &quot;chatbot&quot; çš„èŠ‚ç‚¹æ·»åŠ åˆ°å›¾æ„å»ºå™¨ä¸­</span><br><span class="line">graph_builder.add_node(&quot;chatbot&quot;, chatbot)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸­æ–­å®‰å…¨æ€§çš„æ–­è¨€ ( assert ) : assert len(message.tool_calls) &lt;= 1
æ˜¯åœ¨å®ç°äººå·¥å¹²é¢„æ—¶ä¸€ä¸ªéå¸¸é‡è¦çš„ å®‰å…¨æªæ–½ ã€‚</p>
<ul>
<li>é—®é¢˜ : ç°ä»£ LLM
æ”¯æŒå¹¶è¡Œå·¥å…·è°ƒç”¨ï¼ˆä¸€æ¬¡è¯·æ±‚æ‰§è¡Œå¤šä¸ªå·¥å…·ï¼‰ã€‚ä½†å¦‚æœå…¶ä¸­ä¸€ä¸ªå·¥å…·æ˜¯
human_assistance
å¹¶è§¦å‘äº†ä¸­æ–­ï¼Œæ•´ä¸ªå›¾ä¼šæš‚åœã€‚å½“äººå·¥æ“ä½œå®Œæˆåï¼Œå›¾ä¼šä»ä¸­æ–­ç‚¹æ¢å¤ã€‚æ­¤æ—¶ï¼Œå¦‚æœä¸å¯¹å·¥å…·è°ƒç”¨æ•°é‡åšé™åˆ¶ï¼ŒLangGraph
å¯èƒ½ä¼šé‡æ–°å°è¯•æ‰§è¡Œæ‰€æœ‰åœ¨ä¸­æ–­å‰è¯·æ±‚çš„å·¥å…·ï¼Œå¯¼è‡´å·²ç»æ‰§è¡Œè¿‡çš„å·¥å…·è¢«å†æ¬¡è°ƒç”¨ã€‚</li>
<li>è§£å†³æ–¹æ¡ˆ : è¿™ä¸ªæ–­è¨€å¼ºåˆ¶è¦æ±‚ LLM
åœ¨æ¯ä¸€æ­¥æœ€å¤šåªèƒ½è¯·æ±‚è°ƒç”¨ä¸€ä¸ªå·¥å…·ã€‚è¿™æ ·å°±ä¿è¯äº†å½“ä¸­æ–­å‘ç”Ÿå¹¶æ¢å¤åï¼Œä¸ä¼šæœ‰é‡å¤æ‰§è¡Œå·¥å…·çš„é£é™©ï¼Œç¡®ä¿äº†æµç¨‹çš„ç¨³å®šæ€§å’Œå¯é¢„æµ‹æ€§ã€‚</li>
</ul>
</blockquote>
<h4 id="ç¼–è¯‘å›¾-2">ç¼–è¯‘å›¾</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">memory = MemorySaver()</span><br><span class="line"></span><br><span class="line">graph = graph_builder.compile(checkpointer=memory)</span><br></pre></td></tr></table></figure>
<h4 id="è°ƒç”¨èŠå¤©æœºå™¨äººå¹¶ä¸­æ–­">è°ƒç”¨èŠå¤©æœºå™¨äººå¹¶ä¸­æ–­</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">user_input = &quot;æˆ‘éœ€è¦ä¸€äº›å…³äºæ„å»º AI ä»£ç†çš„ä¸“å®¶æŒ‡å¯¼ã€‚ä½ èƒ½å¸®æˆ‘è¯·æ±‚ååŠ©å—ï¼Ÿ&quot;</span><br><span class="line">config = &#123;&quot;configurable&quot;: &#123;&quot;thread_id&quot;: &quot;1&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">events = graph.stream(</span><br><span class="line">    &#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_input&#125;]&#125;,</span><br><span class="line">    config,</span><br><span class="line">    #å®ƒçš„ä½œç”¨æ˜¯æŒ‡å®šåœ¨è¿›è¡Œæµå¼å¤„ç†æ—¶ï¼Œä½ å¸Œæœ›æ¥æ”¶åˆ°çš„æ•°æ®æ˜¯ä»¥ å®Œæ•´çš„ã€ç´¯ç§¯çš„å€¼ çš„å½¢å¼è¿”å›ï¼Œè€Œä¸æ˜¯ä»¥å¢é‡çš„ã€ç‰‡æ®µçš„å½¢å¼è¿”å›ã€‚</span><br><span class="line">    stream_mode=&quot;values&quot;,</span><br><span class="line">)</span><br><span class="line">for event in events:</span><br><span class="line">    if &quot;messages&quot; in event:</span><br><span class="line">        event[&quot;messages&quot;][-1].pretty_print()</span><br></pre></td></tr></table></figure>
<p>èŠå¤©æœºå™¨äººç”Ÿæˆäº†ä¸€ä¸ªå·¥å…·è°ƒç”¨ï¼Œä½†éšåæ‰§è¡Œè¢«ä¸­æ–­ã€‚å¦‚æœæ‚¨æ£€æŸ¥å›¾çŠ¶æ€ï¼Œæ‚¨ä¼šçœ‹åˆ°å®ƒåœæ­¢åœ¨å·¥å…·èŠ‚ç‚¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">snapshot = graph.get_state(config)</span><br><span class="line">snapshot.next</span><br></pre></td></tr></table></figure>
<h4 id="æ¢å¤æ‰§è¡Œ">æ¢å¤æ‰§è¡Œ</h4>
<p>è¦æ¢å¤æ‰§è¡Œï¼Œè¯·ä¼ å…¥ä¸€ä¸ªåŒ…å«å·¥å…·æ‰€éœ€æ•°æ®çš„<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/concepts/low_level/#command"><code>Command</code></a>å¯¹è±¡ã€‚æ­¤æ•°æ®çš„æ ¼å¼å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè‡ªå®šä¹‰ã€‚å¯¹äºæœ¬ç¤ºä¾‹ï¼Œè¯·ä½¿ç”¨ä¸€ä¸ªå¸¦æœ‰é”®<code>"data"</code>çš„å­—å…¸ï¼ˆç”±human_assistanceå†³å®šï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">human_response = (</span><br><span class="line">&quot;æˆ‘ä»¬ä¸“å®¶åœ¨æ­¤ä¸ºæ‚¨æä¾›å¸®åŠ©ï¼æˆ‘ä»¬å»ºè®®æ‚¨æŸ¥çœ‹ LangGraph æ¥æ„å»ºæ‚¨çš„ä»£ç†ã€‚å®ƒæ¯”ç®€å•çš„è‡ªä¸»ä»£ç†æ›´å¯é ã€æ›´å…·å¯æ‰©å±•æ€§ã€‚&quot;</span><br><span class="line">)   </span><br><span class="line">#ä»æš‚åœçŠ¶æ€æ¢å¤æ‰§è¡Œ</span><br><span class="line">human_command = Command(resume=&#123;&quot;data&quot;: human_response&#125;)</span><br><span class="line"></span><br><span class="line">events = graph.stream(human_command, config, stream_mode=&quot;values&quot;)</span><br><span class="line">for event in events:</span><br><span class="line">    if &quot;messages&quot; in event:</span><br><span class="line">        event[&quot;messages&quot;][-1].pretty_print()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>1.å·¥å…·çš„å®šä¹‰ ( human_assistance function):</p>
<ul>
<li>å½“ LLM è°ƒç”¨ human_assistance å·¥å…·æ—¶ï¼Œè¿™ä¸ªå‡½æ•°è¢«æ‰§è¡Œã€‚</li>
<li>å‡½æ•°å†…éƒ¨ï¼Œ interrupt() è¢«è°ƒç”¨ï¼Œå¯¼è‡´å›¾æš‚åœï¼Œå¹¶ç­‰å¾…äººå·¥è¾“å…¥ã€‚</li>
<li>åœ¨å›¾æ¢å¤åï¼Œ interrupt() å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œè¿™ä¸ªå€¼å°±æ˜¯æ‚¨é€šè¿‡
Command(resume=â€¦) æ³¨å…¥çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ {â€œdataâ€: human_response} ã€‚</li>
<li>å› æ­¤ï¼Œ human_assistance å‡½æ•°ä¸­çš„ human_response å˜é‡å®é™…ä¸Šå°±ç­‰äº
{â€œdataâ€: human_response} ã€‚</li>
<li>æœ€åï¼Œ return human_response[â€œdataâ€] ä»è¿™ä¸ªå­—å…¸ä¸­æå–å‡º â€œdataâ€
é”®å¯¹åº”çš„å€¼ ï¼Œå¹¶å°†å…¶ä½œä¸º human_assistance å·¥å…·çš„æœ€ç»ˆè¿”å›ç»“æœã€‚</li>
</ul>
<p>2.æ¢å¤æŒ‡ä»¤ ( Command(resume=â€¦) ):</p>
<ul>
<li>å½“æ‚¨æ„å»º Command(resume={â€œdataâ€: human_response})
æ—¶ï¼Œæ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ªç¬¦åˆ human_assistance å‡½æ•°æœŸæœ›çš„ç»“æ„ã€‚</li>
<li>æ‚¨å°†äººå·¥å›å¤åŒ…è£…åœ¨ä¸€ä¸ªå­—å…¸é‡Œï¼Œå¹¶ä½¿ç”¨ â€œdataâ€ ä½œä¸ºé”®ã€‚</li>
<li>è¿™ä¸ªç»“æ„è¢«ä¼ é€’å› interrupt() ï¼Œç„¶åè¢« human_assistance
å‡½æ•°æ¥æ”¶å’Œè§£æã€‚</li>
</ul>
<p>å› ä¸º human_assistance å‡½æ•°çš„ return è¯­å¥æœŸæœ›ä»è¿”å›çš„å­—å…¸ä¸­è®¿é—® â€œdataâ€
é”®ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ¢å¤æ‰§è¡Œæ—¶å¿…é¡»æä¾›ä¸€ä¸ªå…·æœ‰ç›¸åŒç»“æ„çš„å­—å…¸ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æ•°æ®èƒ½å¤Ÿæ­£ç¡®åœ°åœ¨ä¸­æ–­å’Œæ¢å¤çš„è¿‡ç¨‹ä¸­ä¼ é€’ã€‚</p>
</blockquote>
<h3 id="è‡ªå®šä¹‰çŠ¶æ€">è‡ªå®šä¹‰çŠ¶æ€</h3>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å‘çŠ¶æ€æ·»åŠ é¢å¤–å­—æ®µï¼Œä»¥å®šä¹‰å¤æ‚è¡Œä¸ºï¼Œè€Œæ— éœ€ä¾èµ–æ¶ˆæ¯åˆ—è¡¨ã€‚èŠå¤©æœºå™¨äººå°†ä½¿ç”¨å…¶æœç´¢å·¥å…·æŸ¥æ‰¾ç‰¹å®šä¿¡æ¯ï¼Œå¹¶å°†å…¶è½¬å‘ç»™äººå·¥è¿›è¡Œå®¡æŸ¥ã€‚</p>
<h4 id="å‘çŠ¶æ€æ·»åŠ é”®">å‘çŠ¶æ€æ·»åŠ é”®</h4>
<p>é€šè¿‡å‘çŠ¶æ€æ·»åŠ  <code>name</code> å’Œ <code>birthday</code>
é”®ï¼Œæ›´æ–°èŠå¤©æœºå™¨äººä»¥ç ”ç©¶å®ä½“çš„ç”Ÿæ—¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class State(TypedDict):</span><br><span class="line">    messages: Annotated[list, add_messages]</span><br><span class="line">    name: str</span><br><span class="line">    birthday: str</span><br></pre></td></tr></table></figure>
<p>å°†æ­¤ä¿¡æ¯æ·»åŠ åˆ°çŠ¶æ€ä¸­ï¼Œå¯ä»¥ä½¿å…¶è½»æ¾è¢«å…¶ä»–å›¾èŠ‚ç‚¹ï¼ˆä¾‹å¦‚å­˜å‚¨æˆ–å¤„ç†ä¿¡æ¯çš„ä¸‹æ¸¸èŠ‚ç‚¹ï¼‰ä»¥åŠå›¾çš„æŒä¹…å±‚è®¿é—®ã€‚</p>
<h4 id="åœ¨å·¥å…·å†…éƒ¨æ›´æ–°çŠ¶æ€">åœ¨å·¥å…·å†…éƒ¨æ›´æ–°çŠ¶æ€</h4>
<p>ç°åœ¨ï¼Œåœ¨ <code>human_assistance</code>
å·¥å…·å†…éƒ¨å¡«å……çŠ¶æ€é”®ã€‚è¿™å…è®¸äººå·¥åœ¨ä¿¡æ¯å­˜å‚¨åˆ°çŠ¶æ€ä¹‹å‰å¯¹å…¶è¿›è¡Œå®¡æŸ¥ã€‚ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/concepts/low_level/#using-inside-tools"><code>Command</code></a>
ä»<strong>å·¥å…·å†…éƒ¨</strong>å‘å‡ºçŠ¶æ€æ›´æ–°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"># ä» langchain_core.messages å¯¼å…¥ ToolMessageï¼Œç”¨äºåˆ›å»ºå·¥å…·è°ƒç”¨çš„å“åº”æ¶ˆæ¯</span><br><span class="line">from langchain_core.messages import ToolMessage </span><br><span class="line"># ä» langchain_core.tools å¯¼å…¥ InjectedToolCallIdï¼ˆç”¨äºè‡ªåŠ¨æ³¨å…¥å·¥å…·è°ƒç”¨IDï¼‰å’Œ toolï¼ˆå·¥å…·è£…é¥°å™¨ï¼‰</span><br><span class="line">from langchain_core.tools import InjectedToolCallId, tool </span><br><span class="line"></span><br><span class="line"># ä» langgraph.types å¯¼å…¥ Commandï¼ˆç”¨äºå‘å›¾å‘é€æŒ‡ä»¤ï¼‰å’Œ interruptï¼ˆç”¨äºä¸­æ–­å›¾çš„æ‰§è¡Œï¼‰</span><br><span class="line">from langgraph.types import Command, interrupt </span><br><span class="line">from typing import Annotated</span><br><span class="line"># @tool è£…é¥°å™¨å°†è¿™ä¸ªå‡½æ•°å£°æ˜ä¸ºä¸€ä¸ªå¯ä¾› LLM è°ƒç”¨çš„å·¥å…·</span><br><span class="line">@tool </span><br><span class="line">def human_assistance(</span><br><span class="line">    name: str, </span><br><span class="line">    birthday: str, </span><br><span class="line">    # tool_call_id è¿™ä¸ªå‚æ•°éå¸¸ç‰¹æ®Šã€‚Annotated[...] å’Œ InjectedToolCallId å‘Šè¯‰ LangGraphï¼š</span><br><span class="line">    # 1. è¿™ä¸ªå‚æ•°ä¸åº”æš´éœ²ç»™ LLMï¼ŒLLM åœ¨è°ƒç”¨æ­¤å·¥å…·æ—¶ä¸éœ€è¦æä¾›å®ƒã€‚</span><br><span class="line">    # 2. LangGraph åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šè‡ªåŠ¨å°†è§¦å‘æ­¤å·¥å…·çš„é‚£ä¸ªå·¥å…·è°ƒç”¨çš„ ID æ³¨å…¥åˆ°è¿™ä¸ªå‚æ•°ä¸­ã€‚</span><br><span class="line">    # è¿™ä¸ª ID å¯¹äºåˆ›å»ºä¸åŸå§‹è¯·æ±‚ç›¸å…³è”çš„ ToolMessage è‡³å…³é‡è¦ã€‚</span><br><span class="line">    tool_call_id: Annotated[str, InjectedToolCallId]</span><br><span class="line">) -&gt; str: </span><br><span class="line">    &quot;&quot;&quot;å½“éœ€è¦äººå·¥ç¡®è®¤æˆ–æ›´æ­£ä¿¡æ¯æ—¶ï¼Œè¯·æ±‚äººç±»ååŠ©ã€‚&quot;&quot;&quot; </span><br><span class="line">    # è°ƒç”¨ interrupt() æ¥æš‚åœå›¾çš„æ‰§è¡Œï¼Œå¹¶å‘äººç±»å®¡æ ¸è€…å‘ˆç°ä¸€ä¸ªåŒ…å«é—®é¢˜å’Œå¾…ç¡®è®¤æ•°æ®çš„å­—å…¸ã€‚</span><br><span class="line">    # å›¾ä¼šåœ¨æ­¤å¤„æš‚åœï¼Œç›´åˆ°äººç±»é€šè¿‡ resume æŒ‡ä»¤æä¾›äº†å“åº”ã€‚</span><br><span class="line">    human_response = interrupt( </span><br><span class="line">        &#123; </span><br><span class="line">            &quot;question&quot;: &quot;Is this correct?&quot;, </span><br><span class="line">            &quot;name&quot;: name, </span><br><span class="line">            &quot;birthday&quot;: birthday, </span><br><span class="line">        &#125;,</span><br><span class="line">    ) </span><br><span class="line">    # æ£€æŸ¥äººç±»çš„å“åº”ã€‚å¦‚æœå“åº”ä¸­ &#x27;correct&#x27; é”®çš„å€¼æ˜¯ &#x27;yes&#x27; æˆ– &#x27;y&#x27; å¼€å¤´ï¼Œ</span><br><span class="line">    # åˆ™è®¤ä¸ºä¿¡æ¯æ˜¯æ­£ç¡®çš„ã€‚</span><br><span class="line">    if human_response.get(&quot;correct&quot;, &quot;&quot;).lower().startswith(&quot;y&quot;): </span><br><span class="line">        # å¦‚æœä¿¡æ¯æ­£ç¡®ï¼Œç›´æ¥ä½¿ç”¨ä» LLM è·å–çš„åŸå§‹ä¿¡æ¯ã€‚</span><br><span class="line">        verified_name = name </span><br><span class="line">        verified_birthday = birthday </span><br><span class="line">        response = &quot;Correct&quot; </span><br><span class="line">    # å¦åˆ™ï¼Œè®¤ä¸ºäººç±»å®¡æ ¸è€…æä¾›äº†æ›´æ­£åçš„ä¿¡æ¯ã€‚</span><br><span class="line">    else: </span><br><span class="line">        # ä»äººç±»çš„å“åº”ä¸­è·å–æ›´æ­£åçš„å§“åå’Œç”Ÿæ—¥ã€‚</span><br><span class="line">        # å¦‚æœäººç±»æ²¡æœ‰æä¾›æ–°çš„å€¼ï¼Œåˆ™ä½¿ç”¨ .get() çš„é»˜è®¤å€¼ï¼Œå³åŸå§‹å€¼ã€‚</span><br><span class="line">        verified_name = human_response.get(&quot;name&quot;, name) </span><br><span class="line">        verified_birthday = human_response.get(&quot;birthday&quot;, birthday) </span><br><span class="line">        response = f&quot;Made a correction: &#123;human_response&#125;&quot; </span><br><span class="line"></span><br><span class="line">    # åœ¨å·¥å…·å†…éƒ¨ç›´æ¥æ„é€ ä¸€ä¸ªç”¨äºæ›´æ–°å›¾çŠ¶æ€çš„å­—å…¸ã€‚</span><br><span class="line">    state_update = &#123; </span><br><span class="line">        &quot;name&quot;: verified_name, # æ›´æ–°çŠ¶æ€ä¸­çš„ &#x27;name&#x27; å­—æ®µ</span><br><span class="line">        &quot;birthday&quot;: verified_birthday, # æ›´æ–°çŠ¶æ€ä¸­çš„ &#x27;birthday&#x27; å­—æ®µ</span><br><span class="line">        # åˆ›å»ºä¸€ä¸ª ToolMessageï¼Œå°†å…¶æ·»åŠ åˆ°çŠ¶æ€çš„ &#x27;messages&#x27; åˆ—è¡¨ä¸­ã€‚</span><br><span class="line">        # è¿™ä¸ªæ¶ˆæ¯å°†ä½œä¸ºæ­¤å·¥å…·è°ƒç”¨çš„æ­£å¼â€œç­”å¤â€å‡ºç°åœ¨å¯¹è¯å†å²ä¸­ã€‚</span><br><span class="line">        # tool_call_id æ˜¯å¿…éœ€çš„ï¼Œç”¨äºå°†æ­¤ç­”å¤ä¸ LLM çš„åŸå§‹å·¥å…·è°ƒç”¨è¯·æ±‚å…³è”èµ·æ¥ã€‚</span><br><span class="line">        &quot;messages&quot;: [ToolMessage(response, tool_call_id=tool_call_id)], </span><br><span class="line">    &#125; </span><br><span class="line">    # è¿™ä¸ªå·¥å…·ä¸è¿”å›ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª Command å¯¹è±¡ã€‚</span><br><span class="line">    # Command(update=...) æ˜¯ä¸€ä¸ªæ˜ç¡®çš„æŒ‡ä»¤ï¼Œå‘Šè¯‰ LangGraph æ‰§è¡Œå™¨ï¼š</span><br><span class="line">    # â€œè¯·ä¸è¦å°†æˆ‘çš„è¿”å›å€¼å½“ä½œæ™®é€šå·¥å…·è¾“å‡ºï¼Œè€Œæ˜¯ç”¨ state_update å­—å…¸é‡Œçš„å†…å®¹æ¥ç›´æ¥æ›´æ–°å½“å‰çš„å›¾çŠ¶æ€ã€‚â€</span><br><span class="line">    return Command(update=state_update) </span><br></pre></td></tr></table></figure>
<p>å›¾çš„å…¶ä½™éƒ¨åˆ†ä¿æŒä¸å˜ã€‚</p>
<h4 id="æç¤ºèŠå¤©æœºå™¨äººè°ƒç”¨äººå·¥å®¡æŸ¥">æç¤ºèŠå¤©æœºå™¨äººè°ƒç”¨äººå·¥å®¡æŸ¥</h4>
<p>æç¤ºèŠå¤©æœºå™¨äººæŸ¥æ‰¾ LangGraph
åº“çš„â€œç”Ÿæ—¥â€ï¼Œå¹¶åœ¨å…¶è·å–æ‰€éœ€ä¿¡æ¯åï¼ŒæŒ‡ç¤ºèŠå¤©æœºå™¨äººä½¿ç”¨
<code>human_assistance</code> å·¥å…·ã€‚é€šè¿‡åœ¨å·¥å…·å‚æ•°ä¸­è®¾ç½®
<code>name</code> å’Œ
<code>birthday</code>ï¼Œæ‚¨å°†å¼ºåˆ¶èŠå¤©æœºå™¨äººä¸ºè¿™äº›å­—æ®µç”Ÿæˆæè®®ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">user_input = (</span><br><span class="line">    &quot;ä½ èƒ½æŸ¥ä¸€ä¸‹ LangGraph æ˜¯ä»€ä¹ˆæ—¶å€™å‘å¸ƒçš„å—ï¼Ÿ &quot;</span><br><span class="line">    &quot;å½“ä½ æœ‰äº†ç­”æ¡ˆåï¼Œä½¿ç”¨ human_assistance å·¥å…·è¿›è¡Œå®¡æŸ¥ã€‚&quot;</span><br><span class="line">)</span><br><span class="line">config = &#123;&quot;configurable&quot;: &#123;&quot;thread_id&quot;: &quot;1&quot;&#125;&#125;</span><br><span class="line"></span><br><span class="line">events = graph.stream(</span><br><span class="line">    &#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_input&#125;]&#125;,</span><br><span class="line">    config,</span><br><span class="line">    stream_mode=&quot;values&quot;,</span><br><span class="line">)</span><br><span class="line">for event in events:</span><br><span class="line">    if &quot;messages&quot; in event:</span><br><span class="line">        event[&quot;messages&quot;][-1].pretty_print()</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å†æ¬¡åœ¨ <code>human_assistance</code> å·¥å…·ä¸­è§¦å‘äº†
<code>interrupt</code>ã€‚</p>
<h4 id="æ·»åŠ äººå·¥ååŠ©">æ·»åŠ äººå·¥ååŠ©</h4>
<p>èŠå¤©æœºå™¨äººæœªèƒ½è¯†åˆ«æ­£ç¡®çš„æ—¥æœŸï¼Œå› æ­¤ä¸ºå…¶æä¾›ä¿¡æ¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">human_command = Command(</span><br><span class="line">    resume=&#123;</span><br><span class="line">        &quot;name&quot;: &quot;LangGraph&quot;,</span><br><span class="line">        &quot;birthday&quot;: &quot;Jan 17, 2024&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">events = graph.stream(human_command, config, stream_mode=&quot;values&quot;)</span><br><span class="line">for event in events:</span><br><span class="line">    if &quot;messages&quot; in event:</span><br><span class="line">        event[&quot;messages&quot;][-1].pretty_print()</span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„ï¼Œè¿™äº›å­—æ®µç°åœ¨å·²åæ˜ åœ¨çŠ¶æ€ä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">snapshot = graph.get_state(config)</span><br><span class="line"></span><br><span class="line">&#123;k: v for k, v in snapshot.values.items() if k in (&quot;name&quot;, &quot;birthday&quot;)&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ä½¿å¾—ä¸‹æ¸¸èŠ‚ç‚¹ï¼ˆä¾‹å¦‚ï¼Œè¿›ä¸€æ­¥å¤„ç†æˆ–å­˜å‚¨ä¿¡æ¯çš„èŠ‚ç‚¹ï¼‰å¯ä»¥è½»æ¾è®¿é—®å®ƒä»¬ã€‚</p>
<h3 id="æ—¶é—´åŠŸèƒ½ä»ä¹‹å‰çš„æŸä¸ªçŠ¶æ€å¼€å§‹">æ—¶é—´åŠŸèƒ½ï¼ˆä»ä¹‹å‰çš„æŸä¸ªçŠ¶æ€å¼€å§‹ï¼‰</h3>
<p>åœ¨å…¸å‹çš„èŠå¤©æœºå™¨äººå·¥ä½œæµç¨‹ä¸­ï¼Œç”¨æˆ·ä¸æœºå™¨äººè¿›è¡Œä¸€æ¬¡æˆ–å¤šæ¬¡äº¤äº’ä»¥å®Œæˆä»»åŠ¡ã€‚<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/tutorials/get-started/3-add-memory/">è®°å¿†</a>å’Œ<a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/tutorials/get-started/4-human-in-the-loop/">äººå·¥å¹²é¢„</a>åŠŸèƒ½å¯ä»¥ä¸ºå›¾çŠ¶æ€å¯ç”¨æ£€æŸ¥ç‚¹å¹¶æ§åˆ¶æœªæ¥çš„å“åº”ã€‚</p>
<p>å¦‚æœæ‚¨å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿä»ä¹‹å‰çš„å“åº”å¼€å§‹å¹¶æ¢ç´¢ä¸åŒçš„ç»“æœï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿæˆ–è€…ï¼Œå¦‚æœæ‚¨å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿå›æº¯èŠå¤©æœºå™¨äººçš„å·¥ä½œä»¥çº æ­£é”™è¯¯æˆ–å°è¯•ä¸åŒçš„ç­–ç•¥ï¼Œè¿™åœ¨è‡ªä¸»è½¯ä»¶å·¥ç¨‹å¸ˆç­‰åº”ç”¨ç¨‹åºä¸­å¾ˆå¸¸è§ï¼Œé‚£åˆè¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>æ‚¨å¯ä»¥ä½¿ç”¨ LangGraph
å†…ç½®çš„<strong>æ—¶å…‰æ—…è¡Œ</strong>åŠŸèƒ½åˆ›å»ºè¿™äº›ç±»å‹çš„ä½“éªŒã€‚</p>
<h4 id="å›æº¯æ‚¨çš„å›¾">å›æº¯æ‚¨çš„å›¾</h4>
<p>é€šè¿‡ä½¿ç”¨å›¾çš„<code>get_state_history</code>æ–¹æ³•è·å–æ£€æŸ¥ç‚¹æ¥å›æº¯æ‚¨çš„å›¾ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ä»ä¹‹å‰çš„è¿™ä¸ªæ—¶é—´ç‚¹æ¢å¤æ‰§è¡Œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># åˆå§‹åŒ–ä¸€ä¸ªå˜é‡ to_replay ä¸º Noneï¼Œå®ƒå°†ç”¨äºå­˜å‚¨æˆ‘ä»¬æƒ³è¦â€œæ—¶é—´æ—…è¡Œâ€å›å»çš„ç‰¹å®šçŠ¶æ€ã€‚</span><br><span class="line"># to_replay å°†åœ¨å¾ªç¯ä¸­è¢«èµ‹å€¼ä¸ºæˆ‘ä»¬æ„Ÿå…´è¶£çš„é‚£ä¸ªå†å²çŠ¶æ€å¿«ç…§ã€‚</span><br><span class="line">to_replay = None</span><br><span class="line"></span><br><span class="line"># éå† `graph` åœ¨ç»™å®š `config` ä¸‹çš„æ‰€æœ‰å†å²çŠ¶æ€ã€‚</span><br><span class="line"># `graph.get_state_history(config)` ä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå…¶ä¸­åŒ…å«äº†ä»å¼€å§‹åˆ°å½“å‰çš„æ‰€æœ‰çŠ¶æ€å¿«ç…§ã€‚</span><br><span class="line">for state in graph.get_state_history(config):</span><br><span class="line">    # æ‰“å°å½“å‰çŠ¶æ€å¿«ç…§ä¸­çš„ä¸€äº›ä¿¡æ¯ï¼Œä»¥ä¾¿æˆ‘ä»¬è§‚å¯Ÿå’Œé€‰æ‹©ã€‚</span><br><span class="line">    # `len(state.values[&quot;messages&quot;])` æ˜¾ç¤ºäº†åˆ°è¯¥çŠ¶æ€ä¸ºæ­¢ï¼Œå¯¹è¯å†å²ä¸­çš„æ¶ˆæ¯æ€»æ•°ã€‚</span><br><span class="line">    # `state.next` æ˜¾ç¤ºäº†åœ¨è¯¥çŠ¶æ€ä¹‹åï¼Œå›¾å°†è¦æ‰§è¡Œçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æˆ–æ­¥éª¤çš„åç§°ã€‚</span><br><span class="line">    print(&quot;Num Messages: &quot;, len(state.values[&quot;messages&quot;]), &quot;Next: &quot;, state.next)</span><br><span class="line">    </span><br><span class="line">    # æ‰“å°ä¸€æ¡åˆ†éš”çº¿ï¼Œä½¿è¾“å‡ºæ›´æ˜“è¯»ã€‚</span><br><span class="line">    print(&quot;-&quot; * 80)</span><br><span class="line">    </span><br><span class="line">    # è¿™é‡Œæ˜¯é€‰æ‹©â€œæ—¶é—´æ—…è¡Œâ€ç›®æ ‡ç‚¹çš„å…³é”®é€»è¾‘ã€‚</span><br><span class="line">    # æˆ‘ä»¬è®¾å®šä¸€ä¸ªæ¡ä»¶ï¼šå½“å¯¹è¯å†å²ä¸­çš„æ¶ˆæ¯æ•°é‡æ­£å¥½ç­‰äº4æ—¶ï¼Œæˆ‘ä»¬å°±æ‰¾åˆ°äº†æƒ³è¦å›åˆ°çš„é‚£ä¸ªç‚¹ã€‚</span><br><span class="line">    # è¿™æ˜¯ä¸€ä¸ªä¸ºäº†æ¼”ç¤ºè€Œè®¾å®šçš„ä»»æ„æ¡ä»¶ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦è®¾ç½®æ›´å¤æ‚çš„é€‰æ‹©é€»è¾‘ã€‚</span><br><span class="line">    if len(state.values[&quot;messages&quot;]) == 4:</span><br><span class="line">        # We are somewhat arbitrarily selecting a specific state based on the number of chat messages in the state.</span><br><span class="line">        # å°†å½“å‰è¿™ä¸ªç¬¦åˆæ¡ä»¶çš„çŠ¶æ€ï¼ˆstateï¼‰ä¿å­˜åˆ° to_replay å˜é‡ä¸­ã€‚</span><br><span class="line">        # å¾ªç¯ç»“æŸåï¼Œto_replay å˜é‡å°†æŒæœ‰æˆ‘ä»¬é€‰ä¸­çš„é‚£ä¸ªå†å²æ—¶åˆ»çš„å®Œæ•´çŠ¶æ€ï¼Œ</span><br><span class="line">        # ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç”¨å®ƒæ¥æ¢å¤æˆ–ä¿®æ”¹æ‰§è¡Œæµç¨‹ã€‚</span><br><span class="line">        to_replay = state</span><br></pre></td></tr></table></figure>
<p>å›¾çš„æ¯ä¸€æ­¥éƒ½ä¼šä¿å­˜æ£€æŸ¥ç‚¹ã€‚è¿™<strong>è·¨è¶Šäº†è°ƒç”¨</strong>ï¼Œå› æ­¤æ‚¨å¯ä»¥å›æº¯æ•´ä¸ªçº¿ç¨‹çš„å†å²ã€‚</p>
<h4 id="ä»ç‰¹å®šæ—¶é—´ç‚¹åŠ è½½çŠ¶æ€">ä»ç‰¹å®šæ—¶é—´ç‚¹åŠ è½½çŠ¶æ€</h4>
<p>ä»<code>to_replay</code>çŠ¶æ€æ¢å¤ã€‚ä»è¿™ä¸€ç‚¹æ¢å¤å°†æ¥ä¸‹æ¥è°ƒç”¨<strong>action</strong>èŠ‚ç‚¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(to_replay.next)</span><br><span class="line">print(to_replay.config)</span><br></pre></td></tr></table></figure>
<p>æ£€æŸ¥ç‚¹çš„<code>to_replay.config</code>åŒ…å«ä¸€ä¸ª<code>checkpoint_id</code>æ—¶é—´æˆ³ã€‚æä¾›æ­¤<code>checkpoint_id</code>å€¼ä¼šå‘Šè¯‰
LangGraph çš„æ£€æŸ¥ç‚¹å™¨ä»è¯¥æ—¶é—´ç‚¹<strong>åŠ è½½</strong>çŠ¶æ€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for event in graph.stream(None, to_replay.config, stream_mode=&quot;values&quot;):</span><br><span class="line">    if &quot;messages&quot; in event:</span><br><span class="line">        event[&quot;messages&quot;][-1].pretty_print()</span><br></pre></td></tr></table></figure>
<h3 id="è¿è¡Œæœ¬åœ°æœåŠ¡å™¨">è¿è¡Œæœ¬åœ°æœåŠ¡å™¨</h3>
<h4 id="å®‰è£…-langgraph-cli">å®‰è£… LangGraph CLI</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Python &gt;= 3.11 is required.</span><br><span class="line"></span><br><span class="line">pip install --upgrade &quot;langgraph-cli[inmem]&quot;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»º-langgraph-åº”ç”¨">åˆ›å»º LangGraph åº”ç”¨ ğŸŒ±</h4>
<p>ä» <a target="_blank" rel="noopener" href="https://github.com/langchain-ai/new-langgraph-project"><code>new-langgraph-project-python</code>
æ¨¡æ¿</a> æˆ– <a target="_blank" rel="noopener" href="https://github.com/langchain-ai/new-langgraphjs-project"><code>new-langgraph-project-js</code>
æ¨¡æ¿</a>
åˆ›å»ºä¸€ä¸ªæ–°åº”ç”¨ã€‚æ­¤æ¨¡æ¿å±•ç¤ºäº†ä¸€ä¸ªå•èŠ‚ç‚¹åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„é€»è¾‘è¿›è¡Œæ‰©å±•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">langgraph new . --template new-langgraph-project-python</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä½¿ç”¨ <code>langgraph new</code>
è€Œä¸æŒ‡å®šæ¨¡æ¿ï¼Œç³»ç»Ÿå°†æ˜¾ç¤ºä¸€ä¸ªäº¤äº’å¼èœå•ï¼Œæ‚¨å¯ä»¥ä»ä¸­é€‰æ‹©å¯ç”¨çš„æ¨¡æ¿åˆ—è¡¨ã€‚</p>
</blockquote>
<h4 id="ä½¿ç”¨uvå®‰è£…ä¾èµ–é¡¹">ä½¿ç”¨uvå®‰è£…ä¾èµ–é¡¹</h4>
<p>uv æ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„æé€Ÿ Python åŒ…å’Œé¡¹ç›®ç®¡ç†å™¨ ã€‚å®ƒæ—¨åœ¨è§£å†³ä¼ ç»Ÿ
Python åŒ…ç®¡ç†å·¥å…·ï¼ˆå¦‚ pip ã€ poetry
ç­‰ï¼‰åœ¨é€Ÿåº¦å’Œæ•ˆç‡æ–¹é¢çš„ç—›ç‚¹ï¼Œæä¾›æ›´å¿«çš„å®‰è£…ã€ä¾èµ–è§£æå’Œç¯å¢ƒç®¡ç†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install uv#å®‰è£…uv</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ<code>uv sync</code>ä¼šæ ¹æ®
<code>pyproject.toml</code>çš„ä¾èµ–åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–</p>
<blockquote>
<p><code>pyproject.toml</code> æ–‡ä»¶æ˜¯ Python
é¡¹ç›®ä¸­ç”¨äºç»Ÿä¸€é…ç½®é¡¹ç›®å…ƒæ•°æ®ã€æ„å»ºç³»ç»Ÿã€ä¾èµ–ç®¡ç†å’Œå„ç§å·¥å…·è®¾ç½®çš„æ ‡å‡†åŒ–æ–‡ä»¶ã€‚å®ƒé€šå¸¸ç”¨äºæ›¿ä»£æ—§çš„
requirements.txt æ–‡ä»¶ï¼Œæä¾›æ›´ç°ä»£å’Œé›†ä¸­çš„é¡¹ç›®é…ç½®æ–¹å¼ã€‚</p>
</blockquote>
<h4 id="åˆ›å»ºä¸€ä¸ª-.env-æ–‡ä»¶">åˆ›å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶</h4>
<p>æ‚¨å°†åœ¨æ–° LangGraph åº”ç”¨çš„æ ¹ç›®å½•ä¸‹æ‰¾åˆ°ä¸€ä¸ª <code>.env.example</code>
æ–‡ä»¶ã€‚åœ¨æ–° LangGraph åº”ç”¨çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>.env</code> æ–‡ä»¶ï¼Œå¹¶å°†
<code>.env.example</code> æ–‡ä»¶çš„å†…å®¹å¤åˆ¶åˆ°å…¶ä¸­ï¼Œå¡«å…¥æ‰€éœ€çš„ API
å¯†é’¥ã€‚</p>
<p>æ·»åŠ ç¯å¢ƒå˜é‡å¦‚LANGSMITH_API_KEYï¼ŒOPENAI_API_KEYç­‰</p>
<h4 id="å¯åŠ¨-langgraph-æœåŠ¡å™¨">å¯åŠ¨ LangGraph æœåŠ¡å™¨</h4>
<p>åœ¨æœ¬åœ°å¯åŠ¨ LangGraph API æœåŠ¡å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">langgraph dev</span><br></pre></td></tr></table></figure>
<p>ç¤ºä¾‹è¾“å‡º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;    Ready!</span><br><span class="line">&gt;</span><br><span class="line">&gt;    - API: [https://:2024](https://:2024/)</span><br><span class="line">&gt;</span><br><span class="line">&gt;    - Docs: https://:2024/docs</span><br><span class="line">&gt;</span><br><span class="line">&gt;    - LangGraph Studio Web UI: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024</span><br></pre></td></tr></table></figure>
<p>LangGraph æœåŠ¡å™¨ï¼ˆå¦‚æ‚¨é€šè¿‡ langgraph dev
å‘½ä»¤å¯åŠ¨çš„æœåŠ¡å™¨ï¼‰çš„ä¸»è¦ä½œç”¨æ˜¯æä¾›ä¸€ä¸ªè¿è¡Œç¯å¢ƒå’Œæ¥å£ï¼Œç”¨äºå¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å’Œç®¡ç†åŸºäº
LangGraph æ„å»ºçš„ AI ä»£ç†å’Œåº”ç”¨ç¨‹åºã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªä¸»è¦ç”¨é€”ï¼š</p>
<ol type="1">
<li><p>API æ¥å£æš´éœ² ï¼šå®ƒå°†æ‚¨ç”¨ LangGraph
å®šä¹‰çš„å¤æ‚ä»£ç†é€»è¾‘ï¼ˆå³å›¾ç»“æ„ï¼‰é€šè¿‡æ ‡å‡†çš„ RESTful API
æ¥å£æš´éœ²å‡ºæ¥ã€‚è¿™æ„å‘³ç€å…¶ä»–åº”ç”¨ç¨‹åºã€å‰ç«¯ç•Œé¢æˆ–è€…å…¶ä»–æœåŠ¡å¯ä»¥é€šè¿‡ HTTP
è¯·æ±‚ä¸æ‚¨çš„ LangGraph ä»£ç†è¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€ç›´æ¥é›†æˆ LangGraph çš„ Python
ä»£ç ã€‚</p></li>
<li><p>ç®€åŒ–éƒ¨ç½² ï¼šé€šè¿‡å°† LangGraph
åº”ç”¨ç¨‹åºæ‰“åŒ…æˆä¸€ä¸ªå¯è¿è¡Œçš„æœåŠ¡ï¼Œæ‚¨å¯ä»¥æ›´å®¹æ˜“åœ°å°†å…¶éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ã€å®¹å™¨ï¼ˆå¦‚
Dockerï¼‰æˆ–å…¶ä»–ç”Ÿäº§ç¯å¢ƒä¸­ã€‚è¿™ä½¿å¾— LangGraph
ä»£ç†å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å¾®æœåŠ¡è¿è¡Œï¼Œæ–¹ä¾¿æ‰©å±•å’Œç®¡ç†ã€‚</p></li>
<li><p>å¼€å‘å’Œè°ƒè¯•ä¾¿åˆ© ï¼š</p>
<ul>
<li>å®æ—¶é¢„è§ˆå’Œè°ƒè¯• ï¼šæœåŠ¡å™¨é€šå¸¸ä¼šæä¾›ä¸€ä¸ª Studio UIï¼ˆå¦‚æ‚¨åœ¨
http://127.0.0.1:2024/studio
çœ‹åˆ°çš„ï¼‰ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå¯è§†åŒ–åœ°æŸ¥çœ‹ä»£ç†çš„å›¾ç»“æ„ã€æ‰§è¡Œæµç¨‹ã€çŠ¶æ€å˜åŒ–å’Œä¸­é—´æ­¥éª¤ï¼Œè¿™å¯¹äºç†è§£å’Œè°ƒè¯•å¤æ‚çš„ä»£ç†è¡Œä¸ºè‡³å…³é‡è¦ã€‚</li>
<li>API æ–‡æ¡£ ï¼šè‡ªåŠ¨ç”Ÿæˆçš„ API æ–‡æ¡£ï¼ˆå¦‚ http://127.0.0.1:2024/docs
ï¼‰æä¾›äº†æ‰€æœ‰å¯ç”¨æ¥å£çš„è¯¦ç»†è¯´æ˜å’Œäº¤äº’å¼æµ‹è¯•åŠŸèƒ½ï¼Œæå¤§åœ°åŠ é€Ÿäº†å¼€å‘å’Œé›†æˆè¿‡ç¨‹ã€‚</li>
</ul></li>
<li><p>çŠ¶æ€ç®¡ç†å’ŒæŒä¹…åŒ– ï¼šLangGraph
ä»£ç†é€šå¸¸æ¶‰åŠå¤æ‚çš„çŠ¶æ€ç®¡ç†ã€‚æœåŠ¡å™¨å¯ä»¥è´Ÿè´£å¤„ç†è¿™äº›çŠ¶æ€çš„æŒä¹…åŒ–ï¼Œç¡®ä¿ä»£ç†åœ¨å¤šæ¬¡äº¤äº’ä¹‹é—´èƒ½å¤Ÿè®°ä½ä¸Šä¸‹æ–‡å’Œå†å²ä¿¡æ¯ã€‚</p></li>
</ol>
<h4 id="åœ¨-langgraph-studio-ä¸­æµ‹è¯•æ‚¨çš„åº”ç”¨ç¨‹åº">åœ¨ LangGraph Studio
ä¸­æµ‹è¯•æ‚¨çš„åº”ç”¨ç¨‹åº</h4>
<p><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/concepts/langgraph_studio/">LangGraph
Studio</a> æ˜¯ä¸€ä¸ªä¸“é—¨çš„ UIï¼Œæ‚¨å¯ä»¥è¿æ¥åˆ° LangGraph API
æœåŠ¡å™¨ï¼Œä»¥ä¾¿åœ¨æœ¬åœ°å¯è§†åŒ–ã€äº¤äº’å’Œè°ƒè¯•æ‚¨çš„åº”ç”¨ç¨‹åºã€‚é€šè¿‡è®¿é—®
<code>langgraph dev</code> å‘½ä»¤è¾“å‡ºä¸­æä¾›çš„ URLï¼Œåœ¨ LangGraph Studio
ä¸­æµ‹è¯•æ‚¨çš„å›¾ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;    - LangGraph Studio Web UI: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024</span><br></pre></td></tr></table></figure>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langgraph/tutorials/get-started/1-build-basic-chatbot/#1-install-packages">æ„å»ºä¸€ä¸ªåŸºæœ¬èŠå¤©æœºå™¨äºº
- LangChain æ¡†æ¶</a></p>
<p>å®˜æ–¹æ•™ç¨‹ï¼Œä½†æ˜¯è‹±æ–‡https://academy.langchain.com/collections</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1AY4aeRETY/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">3.5
å°æ—¶å‡ºè¯ï¼LangGraph å®˜æ–¹è¯¾ç¨‹ ğŸ†“ é‡ç£…ä¸Šçº¿ğŸ”¥ğŸ”¥ğŸ”¥_å“”å“©å“”å“©_bilibili</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>è¯·æˆ‘ä¸€æ¯å’–å•¡å§ï¼</div>
  <button>
    èµèµ
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.png" alt="å¼ ç†™æµš å¾®ä¿¡">
        <span>å¾®ä¿¡</span>
      </div>
      <div>
        <img src="/images/alipay.png" alt="å¼ ç†™æµš æ”¯ä»˜å®">
        <span>æ”¯ä»˜å®</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/langgraph/" rel="tag"># langgraph</a>
              <a href="/tags/fastapi/" rel="tag"># fastapi</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/07/14/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/LangGraphChatBot/" rel="prev" title="LangGraphChatBot">
                  <i class="fa fa-angle-left"></i> LangGraphChatBot
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/07/15/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langsmith/" rel="next" title="Langsmith">
                  Langsmith <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">å¼ ç†™æµš</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="æœ¬ç«™è®¿é—®æ•° fa fa-user æ¬¡"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="æœ¬ç«™æ€»è®¿é—®é‡ fa fa-eye æ¬¡"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="400" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
