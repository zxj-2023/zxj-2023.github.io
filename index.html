<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-bounce.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="zxj Blogs">
<meta property="og:type" content="website">
<meta property="og:title" content="Zhang XiJun">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Zhang XiJun">
<meta property="og:description" content="zxj Blogs">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="张熙浚">
<meta property="article:tag" content="zxj">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Zhang XiJun</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zhang XiJun</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">BLOGS</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="张熙浚"
      src="/images/zxjavatar.gif">
  <p class="site-author-name" itemprop="name">张熙浚</p>
  <div class="site-description" itemprop="description">zxj Blogs</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">155</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">60</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zxj-2023" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zxj-2023" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://wpa.qq.com/msgrd?v=3&uin=2902065320&site=qq&menu=yes" title="QQ → http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;2902065320&amp;site&#x3D;qq&amp;menu&#x3D;yes" rel="noopener me" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://zxj-2023.github.io/" title="https:&#x2F;&#x2F;zxj-2023.github.io" rel="noopener" target="_blank">Zhang XiJun</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://theme-next.js.org/" title="https:&#x2F;&#x2F;theme-next.js.org" rel="noopener" target="_blank">NexT</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/19/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/10/19/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/python%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">python设计模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-10-19 00:00:00 / 修改时间：14:48:06" itemprop="dateCreated datePublished" datetime="2025-10-19T00:00:00+08:00">2025-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">python相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="为什么要有设计模式"><a href="#为什么要有设计模式" class="headerlink" title="为什么要有设计模式"></a>为什么要有设计模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">class DatabaseConnection:</span><br><span class="line">    def __init__(self, host, port, username, password):</span><br><span class="line">        self.host = host</span><br><span class="line">        self.port = port</span><br><span class="line">        self.username = username</span><br><span class="line">        self.password = password</span><br><span class="line"></span><br><span class="line">    def connect(self):</span><br><span class="line">        return f&quot;Connecting to database at &#123;self.host&#125;:&#123;self.port&#125; with username &#x27;&#123;self.username&#125;&#x27;&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def client():</span><br><span class="line">    main_db = DatabaseConnection(&#x27;localhost&#x27;, 3306, &#x27;root&#x27;, &#x27;password123&#x27;)</span><br><span class="line">    analytics_db = DatabaseConnection(&#x27;192.168.1.1&#x27;, 5432, &#x27;admin&#x27;, &#x27;securepass&#x27;)</span><br><span class="line">    cache_db = DatabaseConnection(&#x27;10.0.0.1&#x27;, 27017, &#x27;cacheuser&#x27;, &#x27;cachepass&#x27;)</span><br><span class="line"></span><br><span class="line">    print(main_db.connect())</span><br><span class="line">    print(analytics_db.connect())</span><br><span class="line">    print(cache_db.connect())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">client()</span><br></pre></td></tr></table></figure>
<p>这是数据库连接类的范例，其存在以下问题</p>
<ol>
<li>数据库连接信息（主机、端口、用户名、密码）直接写在代码中，缺乏配置管理，难以在不同环境间切换，如果要更改数据库的信息，就要更改项目中每一处的连接数据库的参数，难以维护</li>
<li>每次都需要手动传入相同类型的参数，增加出错的风险</li>
</ol>
<h3 id="工厂模式（Factory-Pattern）"><a href="#工厂模式（Factory-Pattern）" class="headerlink" title="工厂模式（Factory Pattern）"></a>工厂模式（Factory Pattern）</h3><p><strong>工厂模式</strong> 是一种创建型设计模式，它提供了一种<strong>创建对象的接口</strong>，但让子类决定实例化哪一个类。换句话说：<strong>把对象的创建过程封装起来</strong>，调用者不需要关心具体创建的是哪个类，只需要知道“我要一个某种类型的东西”。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">def connection_factory(db_type):</span><br><span class="line">    db_configs = &#123;</span><br><span class="line">        &#x27;main&#x27;: &#123;</span><br><span class="line">            &#x27;host&#x27;: &#x27;localhost&#x27;,</span><br><span class="line">            &#x27;port&#x27;: 3306,</span><br><span class="line">            &#x27;username&#x27;: &#x27;root&#x27;,</span><br><span class="line">            &#x27;password&#x27;: &#x27;password123&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x27;analytics&#x27;: &#123;</span><br><span class="line">            &#x27;host&#x27;: &#x27;192.168.1.1&#x27;,</span><br><span class="line">            &#x27;port&#x27;: 5432,</span><br><span class="line">            &#x27;username&#x27;: &#x27;admin&#x27;,</span><br><span class="line">            &#x27;password&#x27;: &#x27;securepass&#x27;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x27;cache&#x27;: &#123;</span><br><span class="line">            &#x27;host&#x27;: &#x27;10.0.0.1&#x27;,</span><br><span class="line">            &#x27;port&#x27;: 27017,</span><br><span class="line">            &#x27;username&#x27;: &#x27;cacheuser&#x27;,</span><br><span class="line">            &#x27;password&#x27;: &#x27;cachepass&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return DatabaseConnection(**db_configs[db_type])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 测试工厂模式</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 使用工厂函数创建不同类型的数据库连接</span><br><span class="line">    main_db = connection_factory(&#x27;main&#x27;)</span><br><span class="line">    analytics_db = connection_factory(&#x27;analytics&#x27;)</span><br><span class="line">    cache_db = connection_factory(&#x27;cache&#x27;)</span><br><span class="line">    </span><br><span class="line">    # 测试连接</span><br><span class="line">    print(main_db.connect())</span><br><span class="line">    print(analytics_db.connect())</span><br><span class="line">    print(cache_db.connect())</span><br></pre></td></tr></table></figure>
<p>将数据库的配置信息提取到config.py</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#factory_pattern.py</span><br><span class="line">def connection_factory(db_type):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    工厂函数：根据数据库类型创建相应的数据库连接</span><br><span class="line">    </span><br><span class="line">    Args:</span><br><span class="line">        db_type (str): 数据库类型 (&#x27;main&#x27;, &#x27;analytics&#x27;, &#x27;cache&#x27;)</span><br><span class="line">    </span><br><span class="line">    Returns:</span><br><span class="line">        DatabaseConnection: 数据库连接实例</span><br><span class="line">    </span><br><span class="line">    Raises:</span><br><span class="line">        KeyError: 当提供的数据库类型不存在时</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    from config import DATABASE_CONFIGS</span><br><span class="line">    if db_type not in DATABASE_CONFIGS:</span><br><span class="line">        raise ValueError(f&quot;Unknown database type: &#123;db_type&#125;. Available types: &#123;list(DATABASE_CONFIGS.keys())&#125;&quot;)</span><br><span class="line">    </span><br><span class="line">    return DatabaseConnection(**DATABASE_CONFIGS[db_type])</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#config.py</span><br><span class="line"># 数据库配置字典</span><br><span class="line">DATABASE_CONFIGS = &#123;</span><br><span class="line">    &#x27;main&#x27;: &#123;</span><br><span class="line">        &#x27;host&#x27;: &#x27;localhost&#x27;,</span><br><span class="line">        &#x27;port&#x27;: 3306,</span><br><span class="line">        &#x27;username&#x27;: &#x27;root&#x27;,</span><br><span class="line">        &#x27;password&#x27;: &#x27;password123&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x27;analytics&#x27;: &#123;</span><br><span class="line">        &#x27;host&#x27;: &#x27;192.168.1.1&#x27;,</span><br><span class="line">        &#x27;port&#x27;: 5432,</span><br><span class="line">        &#x27;username&#x27;: &#x27;admin&#x27;,</span><br><span class="line">        &#x27;password&#x27;: &#x27;securepass&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x27;cache&#x27;: &#123;</span><br><span class="line">        &#x27;host&#x27;: &#x27;10.0.0.1&#x27;,</span><br><span class="line">        &#x27;port&#x27;: 27017,</span><br><span class="line">        &#x27;username&#x27;: &#x27;cacheuser&#x27;,</span><br><span class="line">        &#x27;password&#x27;: &#x27;cachepass&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为什么要这么做</p>
<ul>
<li>所有配置信息都在一个地方，便于统一管理和维护</li>
<li>易于修改 ：配置变更不需要修改业务逻辑代码</li>
</ul>
<p>工厂模式的核心就是工厂函数</p>
<p><strong>工厂函数</strong>是一个<strong>返回对象的函数</strong>（而不是类），它封装了对象的创建逻辑，根据输入参数决定返回哪种具体对象。 </p>
<h3 id="建造者模式（Builder-Pattern）"><a href="#建造者模式（Builder-Pattern）" class="headerlink" title="建造者模式（Builder Pattern）"></a>建造者模式（Builder Pattern）</h3><p>当你需要创建一个有很多属性、配置步骤繁多的对象时（比如一辆汽车、一个 HTTP 请求、一个数据库连接配置），直接用构造函数会非常混乱。<br><strong>建造者模式通过“分步构建 + 最终组装”的方式，让创建过程清晰、灵活、可读性强。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">class DatabaseConnectionBuilder:</span><br><span class="line">    &quot;&quot;&quot;数据库连接建造者类&quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    def __init__(self,host,port,username,password):</span><br><span class="line">        self._config = &#123;</span><br><span class="line">            &#x27;host&#x27;: host,</span><br><span class="line">            &#x27;port&#x27;: port,</span><br><span class="line">            &#x27;username&#x27;: username,</span><br><span class="line">            &#x27;password&#x27;: password,</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    def set_max_connections(self, max_connections):</span><br><span class="line">        &quot;&quot;&quot;设置最大连接数&quot;&quot;&quot;</span><br><span class="line">        if max_connections is not None and max_connections &lt;= 0:</span><br><span class="line">            raise ValueError(&quot;Max connections must be positive&quot;)</span><br><span class="line">        self._config[&#x27;max_connections&#x27;] = max_connections</span><br><span class="line">        return self</span><br><span class="line">    </span><br><span class="line">    def set_timeout(self, timeout):</span><br><span class="line">        &quot;&quot;&quot;设置超时时间&quot;&quot;&quot;</span><br><span class="line">        if timeout is not None and timeout &lt;= 0:</span><br><span class="line">            raise ValueError(&quot;Connect timeout must be positive&quot;)</span><br><span class="line">        self._config[&#x27;timeout&#x27;] = timeout</span><br><span class="line">        return self</span><br><span class="line">        </span><br><span class="line">    def build(self):</span><br><span class="line">        &quot;&quot;&quot;构建最终的数据库连接对象&quot;&quot;&quot;  </span><br><span class="line">        return DatabaseConnection(**self._config)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"># 演示建造者模式的使用</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    # 创建一个数据库连接建造者</span><br><span class="line">    builder = DatabaseConnectionBuilder(</span><br><span class="line">        host=&#x27;localhost&#x27;,</span><br><span class="line">        port=3306,</span><br><span class="line">        username=&#x27;root&#x27;,</span><br><span class="line">        password=&#x27;password123&#x27;</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    # 使用建造者模式构建数据库连接</span><br><span class="line">    connection = builder.set_max_connections(100) \</span><br><span class="line">                        .set_timeout(30) \</span><br><span class="line">                        .enable_ssl() \</span><br><span class="line">                        .set_connection_pool(&#x27;my_pool&#x27;) \</span><br><span class="line">                        .set_retry_attempts(3) \</span><br><span class="line">                        .enable_compression() \</span><br><span class="line">                        .set_read_preference(&#x27;secondaryPreferred&#x27;) \</span><br><span class="line">                        .build()</span><br></pre></td></tr></table></figure>
<h3 id="单例模式（Singleton-Pattern）"><a href="#单例模式（Singleton-Pattern）" class="headerlink" title="单例模式（Singleton Pattern）"></a>单例模式（Singleton Pattern）</h3><blockquote>
<p><strong>单例模式</strong>确保一个类<strong>只有一个实例</strong>，并提供一个<strong>全局访问点</strong>来获取该实例。 </p>
</blockquote>
<p>换句话说：<br>无论你调用多少次“创建对象”，返回的始终是<strong>同一个对象</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">class DatabaseConnection:</span><br><span class="line">    &quot;&quot;&quot;数据库连接单例类&quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    _instance = None</span><br><span class="line">    _lock = threading.Lock()  # 线程锁，确保线程安全</span><br><span class="line">    </span><br><span class="line">    def __new__(cls, *args, **kwargs):</span><br><span class="line">        &quot;&quot;&quot;重写__new__方法实现单例模式&quot;&quot;&quot;</span><br><span class="line">        if cls._instance is None:</span><br><span class="line">            with cls._lock:  # 使用双重检查锁定</span><br><span class="line">                if cls._instance is None:</span><br><span class="line">                    cls._instance = super().__new__(cls)</span><br><span class="line">        return cls._instance</span><br><span class="line">    </span><br><span class="line">    def __init__(self, host, port, username, password):</span><br><span class="line">        &quot;&quot;&quot;初始化数据库连接参数&quot;&quot;&quot;</span><br><span class="line">        # 防止重复初始化</span><br><span class="line">        if hasattr(self, &#x27;_initialized&#x27;):</span><br><span class="line">            return</span><br><span class="line">        </span><br><span class="line">        self.host = host</span><br><span class="line">        self.port = port</span><br><span class="line">        self.username = username</span><br><span class="line">        self.password = password</span><br><span class="line">        self._initialized = True</span><br><span class="line">    </span><br><span class="line">    def connect(self):</span><br><span class="line">        &quot;&quot;&quot;连接数据库&quot;&quot;&quot;</span><br><span class="line">        return f&quot;Connecting to database at &#123;self.host&#125;:&#123;self.port&#125; with username &#x27;&#123;self.username&#125;&#x27;&quot;</span><br><span class="line"></span><br><span class="line">def client():</span><br><span class="line">    db1 = DatabaseConnection(host=&#x27;localhost&#x27;, port=3306, username=&#x27;root&#x27;, password=&#x27;password&#x27;)</span><br><span class="line">    db2 = DatabaseConnection(host=&#x27;localhost&#x27;, port=3306, username=&#x27;root&#x27;, password=&#x27;password&#x27;)</span><br><span class="line">    print(db1 is db2)</span><br><span class="line"></span><br><span class="line">client()</span><br></pre></td></tr></table></figure>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV131421876N/?spm_id_from=333.337.search-card.all.click&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">【设计模式 inPy】一个视频搞懂三种设计模式：工厂、建造者和单例_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1j7HLzkE6q/?spm_id_from=333.337.search-card.all.click&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">为什么你应该忘掉设计模式？_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV19E42137eX/?spm_id_from=333.337.search-card.all.click&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">【设计模式inPython】策略模式：不要再用一个类装所有方法啦！_哔哩哔哩_bilibili</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/18/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%89%93%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/10/18/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%89%93%E5%8C%85/" class="post-title-link" itemprop="url">Python项目结构和打包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-10-18 00:00:00 / 修改时间：20:28:17" itemprop="dateCreated datePublished" datetime="2025-10-18T00:00:00+08:00">2025-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">python相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="Python项目结构和打包"><a href="#Python项目结构和打包" class="headerlink" title="Python项目结构和打包"></a>Python项目结构和打包</h3><h4 id="pip-install-的本质"><a href="#pip-install-的本质" class="headerlink" title="pip install 的本质"></a>pip install 的本质</h4><p>从 <a target="_blank" rel="noopener" href="https://pypi.org/">PyPI </a>（默认）或其他源（如私有仓库、本地文件）查找指定名称的包，下载对应的<code>.whl</code>文件</p>
<h4 id="whl文件"><a href="#whl文件" class="headerlink" title="whl文件"></a>whl文件</h4><ul>
<li><code>.whl</code> 是 <strong>Wheel</strong> 的缩写，是 Python 的一种标准打包格式（PEP 427 定义）。</li>
<li>它本质上是一个 <strong>ZIP 格式的压缩包</strong>，扩展名改为 <code>.whl</code>。</li>
</ul>
<p>安装 .whl 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install package_name.whl</span><br></pre></td></tr></table></figure>
<h4 id="hachling"><a href="#hachling" class="headerlink" title="hachling"></a>hachling</h4><p><code>hatchling</code> 是 Python 生态中一个<strong>现代的、轻量级的构建后端（build backend）</strong>，主要用于将 Python 项目打包成可分发的格式（如 <code>.whl</code> 或源码包）。它是 <a target="_blank" rel="noopener" href="https://hatch.pypa.io/">Hatch </a>项目的一部分，由 PyPA（Python Packaging Authority）推荐使用。</p>
<p>在pyproject.toml添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[build-system]</span><br><span class="line">requires = [&quot;hatchling&quot;]</span><br><span class="line">build-backend = &quot;hatchling.build&quot;</span><br></pre></td></tr></table></figure>
<p>当你运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install .</span><br><span class="line"># 或</span><br><span class="line">python -m build</span><br></pre></td></tr></table></figure>
<p>如果项目配置了 <code>hatchling</code> 作为构建后端，<code>pip</code> 或 <code>build</code> 工具就会调用 <code>hatchling</code> 来完成打包和安装。</p>
<p>例如以下项目结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">my_project/</span><br><span class="line">├── pyproject.toml</span><br><span class="line">├── src/</span><br><span class="line">│   └── my_utils/               ← 你写的包</span><br><span class="line">│       ├── __init__.py</span><br><span class="line">│       └── math.py</span><br><span class="line">├── scripts/</span><br><span class="line">│   └── run_demo.py             ← 想在这里用 my_utils</span><br></pre></td></tr></table></figure>
<p><strong>想让项目的其他文件使用自己编写的包</strong>，在pyproject.toml增加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 👇 新增：显式声明包位置</span><br><span class="line">[tool.hatch.build.targets.wheel]</span><br><span class="line">packages = [&quot;src/my_utils&quot;]</span><br></pre></td></tr></table></figure>
<p>在项目根目录（<code>my_project/</code>）执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv pip install -e .</span><br></pre></td></tr></table></figure>
<blockquote>
<p>✅ 这会把 <code>src/my_utils/</code> 注册为一个可导入的包。 </p>
</blockquote>
<h4 id="src-layout"><a href="#src-layout" class="headerlink" title="src layout"></a>src layout</h4><p><code>src layout</code>（也称为 <strong>src 布局</strong> 或 <strong>src 目录结构</strong>）是 Python 项目中一种<strong>推荐的源代码组织方式</strong>，其核心思想是：<strong>将你的 Python 包（package）放在一个名为 <code>src/</code> 的子目录下，而不是直接放在项目根目录中。</strong></p>
<p>❌ 传统布局（不推荐）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">my_project/</span><br><span class="line">├── my_package/</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   └── module.py</span><br><span class="line">├── tests/</span><br><span class="line">├── setup.py</span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>
<p>✅ <strong>src 布局（推荐）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">my_project/</span><br><span class="line">├── src/</span><br><span class="line">│   └── my_package/</span><br><span class="line">│       ├── __init__.py</span><br><span class="line">│       └── module.py</span><br><span class="line">├── tests/</span><br><span class="line">├── pyproject.toml</span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>
<h4 id="uv-build和uv-pip-install-什么区别"><a href="#uv-build和uv-pip-install-什么区别" class="headerlink" title="uv build和uv pip install .什么区别"></a>uv build和uv pip install .什么区别</h4><p>一、<code>uv build</code></p>
<p>✅ 作用：<strong>构建分发包（不安装）</strong></p>
<ul>
<li>调用项目的构建后端（如 <code>hatchling</code>、<code>setuptools</code> 等）。</li>
<li>生成标准的分发文件：<ul>
<li>一个 <strong>Wheel 文件</strong>（<code>.whl</code>）</li>
<li>一个 <strong>源码分发包</strong>（sdist，<code>.tar.gz</code>）</li>
</ul>
</li>
<li>输出到项目根目录下的 <code>dist/</code> 文件夹。</li>
<li><strong>不会将包安装到当前 Python 环境中</strong>。</li>
</ul>
<p>🔧 示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv build</span><br></pre></td></tr></table></figure>
<p>输出：<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dist/my_package-0.1.0-py3-none-any.whl</span><br><span class="line">dist/my_package-0.1.0.tar.gz</span><br></pre></td></tr></table></figure></p>
<p><img src="/2025/10/18/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%89%93%E5%8C%85/image-20251018192905210.png" alt="image-20251018192905210"></p>
<p>二、<code>uv pip install .</code></p>
<p>✅ 作用：<strong>安装当前项目到当前环境</strong></p>
<ul>
<li>首先（隐式）构建项目（类似 <code>uv build</code> 的过程）。</li>
<li>然后将构建结果<strong>安装到当前激活的 Python 环境</strong>（如虚拟环境或系统环境）。</li>
<li>安装后，你可以在 Python 中 <code>import</code> 该包。</li>
<li>默认是 <strong>“非可编辑安装”</strong>（即代码改动不会自动生效，除非重新安装）。</li>
</ul>
<p>🔧 示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv pip install .</span><br></pre></td></tr></table></figure>
<p>效果：</p>
<ul>
<li>包被安装到 <code>site-packages/</code></li>
<li>可在 Python 中 <code>import my_package</code></li>
</ul>
<h4 id="Editable-install（可编辑安装）"><a href="#Editable-install（可编辑安装）" class="headerlink" title="Editable install（可编辑安装）"></a><strong>Editable install（可编辑安装）</strong></h4><p><strong>Editable install（可编辑安装）</strong> 是 Python 包管理中的一种安装模式，它让你在<strong>安装一个包的同时，保留对源代码的直接引用</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv pip install -e .</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>核心机制</strong>：<ul>
<li>不复制代码到 <code>site-packages/</code>。</li>
<li>而是在 <code>site-packages/</code> 中创建一个 <strong><code>.pth</code> 文件</strong> 或 <strong><code>my_package.egg-link</code></strong>，指向你本地项目中的 <code>src/</code>（或包目录）。</li>
<li>Python 解释器在导入时，会顺着这个链接去读你本地的源码。</li>
</ul>
</li>
</ul>
<p><img src="/2025/10/18/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%89%93%E5%8C%85/image-20251018193022973.png" alt="image-20251018193022973"></p>
<h4 id="python是从哪里查找模块的"><a href="#python是从哪里查找模块的" class="headerlink" title="python是从哪里查找模块的"></a>python是从哪里查找模块的</h4><p>Python 查找模块（module）的机制由 <strong>模块搜索路径（module search path）</strong> 决定，这个路径是一个字符串列表，存储在 <code>sys.path</code> 中。当你执行 <code>import some_module</code> 时，Python 会<strong>按顺序</strong>在这个列表中的每个目录里查找对应的模块文件。</p>
<p>可以通过以下代码查看当前 Python 的模块搜索路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">print(sys.path)</span><br></pre></td></tr></table></figure>
<p><code>sys.path</code> 通常包含以下几类路径（顺序很重要）：</p>
<ol>
<li><strong>脚本所在目录（或当前工作目录）</strong></li>
</ol>
<ul>
<li>如果你运行 <code>python /path/to/script.py</code>，那么 <code>/path/to/</code> 会被加到 <code>sys.path[0]</code>。</li>
<li>如果你运行 <code>python</code> 进入交互模式，或运行 <code>python -c &quot;...&quot;</code>，则<strong>当前工作目录（<code>os.getcwd()</code>）</strong> 会被放在首位。</li>
<li>⚠️ 这是很多“意外导入”问题的根源（比如项目根目录下有同名包）。</li>
</ul>
<ol>
<li><strong>环境变量 <code>PYTHONPATH</code> 中的目录</strong></li>
</ol>
<ul>
<li>类似系统的 <code>PATH</code>，你可以通过设置 <code>PYTHONPATH</code> 添加自定义搜索路径。</li>
<li>示例（Linux/macOS）：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PYTHONPATH=<span class="string">&quot;/my/custom/modules:<span class="variable">$PYTHONPATH</span>&quot;</span></span><br><span class="line">python my_script.py</span><br></pre></td></tr></table></figure></li>
<li>Windows（PowerShell）：<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$env:PYTHONPATH</span> = <span class="string">&quot;C:\my\custom\modules;&quot;</span> + <span class="variable">$env:PYTHONPATH</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><strong>标准库目录</strong></li>
</ol>
<ul>
<li>Python 自带的模块（如 <code>os</code>, <code>sys</code>, <code>json</code>）所在位置。</li>
<li>通常位于 Python 安装目录下的 <code>lib/</code> 子目录中。</li>
</ul>
<ol>
<li><strong>第三方包安装目录（site-packages）</strong></li>
</ol>
<ul>
<li>通过 <code>pip install</code>、<code>uv pip install</code> 等安装的包，会被放到 <code>site-packages</code> 目录。</li>
<li>路径可通过以下命令查看：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> site</span><br><span class="line"><span class="built_in">print</span>(site.getsitepackages())  <span class="comment"># 全局环境</span></span><br><span class="line"><span class="built_in">print</span>(site.getusersitepackages())  <span class="comment"># 用户级安装</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol>
<li><strong><code>.pth</code> 文件中指定的路径</strong></li>
</ol>
<ul>
<li>某些包（尤其是 editable install）会在 <code>site-packages/</code> 中放置 <code>.pth</code> 文件，动态添加路径到 <code>sys.path</code>。</li>
</ul>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12NgLzhEKx?spm_id_from=333.788.videopod.sections&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">build + hatchling 15分钟搞懂Python项目结构和打包_哔哩哔哩_bilibili</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/" class="post-title-link" itemprop="url">pytest</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-10-17 00:00:00" itemprop="dateCreated datePublished" datetime="2025-10-17T00:00:00+08:00">2025-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-18 20:27:55" itemprop="dateModified" datetime="2025-10-18T20:27:55+08:00">2025-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">python相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="生成项目结构"><a href="#生成项目结构" class="headerlink" title="生成项目结构"></a>生成项目结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">─src</span><br><span class="line">│  └─pytest_demo</span><br><span class="line">│          calculator.py</span><br><span class="line">│          __init__.py</span><br></pre></td></tr></table></figure>
<p>生成calculator.py类用于后续学习pytest，<code>以上树状结构使用tree /f</code>生成</p>
<h3 id="init-py-文件的作用"><a href="#init-py-文件的作用" class="headerlink" title="__init__.py 文件的作用"></a><code>__init__.py</code> 文件的作用</h3><p><code>__init__.py</code> 文件的主要作用是告诉Python解释器这个目录是一个Python包（package）。当Python看到一个包含 <code>__init__.py</code> 文件的目录时，就会将其识别为一个可导入的包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">pytest_demo package</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">from .calculator import Calculator</span><br><span class="line"></span><br><span class="line">__all__ = [&#x27;Calculator&#x27;]</span><br></pre></td></tr></table></figure>
<p>相对导入 ： from .calculator import Calculator</p>
<ul>
<li>.calculator 表示从当前包内的 calculator.py 模块导入 Calculator 类</li>
<li>点号 . 表示相对导入，指向当前包</li>
</ul>
<p><code>__all__</code> 列表 ： <code>__all__ = [&#39;Calculator&#39;]</code></p>
<ul>
<li>定义了当使用 from pytest_demo import * 时会导入哪些对象</li>
<li>这是一个显式的公共API声明</li>
</ul>
<h3 id="pytest-的自动发现规则"><a href="#pytest-的自动发现规则" class="headerlink" title="pytest 的自动发现规则"></a>pytest 的自动发现规则</h3><p>pytest 会自动查找以下内容：</p>
<ul>
<li>文件名：<code>test_*.py</code> 或 <code>*_test.py</code></li>
<li>函数名：<code>test_*()</code></li>
<li>类名：<code>Test*</code>（类中方法也需以 <code>test_</code> 开头）</li>
</ul>
<h3 id="测试文件"><a href="#测试文件" class="headerlink" title="测试文件"></a>测试文件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">└─tests</span><br><span class="line">    │  test_calculator.py</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from pytest_demo.calculator import Calculator</span><br><span class="line"></span><br><span class="line">def test_add() -&gt; None:</span><br><span class="line">    calc = Calculator()</span><br><span class="line">    assert calc.add(2, 1) == 3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def test_div() -&gt; None:</span><br><span class="line">    calc = Calculator()</span><br><span class="line">    assert calc.divide(2, 1) == 2</span><br></pre></td></tr></table></figure>
<p>运行 <code>uv run pytest</code></p>
<p><img src="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/image-20251018194456963.png" alt="image-20251018194456963"></p>
<h3 id="vscode支持pytest的可视化页面"><a href="#vscode支持pytest的可视化页面" class="headerlink" title="vscode支持pytest的可视化页面"></a>vscode支持pytest的可视化页面</h3><p>ctrl+shift+p搜索</p>
<p><img src="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/image-20251018194539467.png" alt="image-20251018194539467"></p>
<p><img src="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/image-20251018194723165.png" alt="image-20251018194723165"></p>
<h3 id="使用pytest-raises验证异常"><a href="#使用pytest-raises验证异常" class="headerlink" title="使用pytest.raises验证异常"></a>使用pytest.raises验证异常</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import pytest</span><br><span class="line"></span><br><span class="line">def test_divide_by_zero() -&gt; None:</span><br><span class="line">    calc = Calculator()</span><br><span class="line">    with pytest.raises(ZeroDivisionError):</span><br><span class="line">        calc.divide(2, 0)</span><br></pre></td></tr></table></figure>
<p>当你测试的函数<strong>应该在特定条件下抛出异常</strong>（比如传入非法参数、除零错误等），你可以用 <code>pytest.raises</code> 来验证：</p>
<blockquote>
<p>“这段代码是否如预期那样，抛出了我们想要的异常？” </p>
</blockquote>
<p>如果：</p>
<ul>
<li>✅ 抛出了<strong>指定类型</strong>的异常 → 测试通过</li>
<li>❌ 没有抛出异常 → 测试失败</li>
<li>❌ 抛出了<strong>其他类型</strong>的异常 → 测试失败</li>
</ul>
<h3 id="pytest-fixture提供测试参数"><a href="#pytest-fixture提供测试参数" class="headerlink" title="@pytest.fixture提供测试参数"></a>@pytest.fixture提供测试参数</h3><p><code>@pytest.fixture</code> 是 <strong>pytest 中最核心、最强大的功能之一</strong>，它的作用是：</p>
<blockquote>
<p><strong>为测试函数提供可复用的、隔离的“测试依赖”（如对象、数据、资源、环境等），并管理它们的生命周期。</strong> </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#工厂函数</span><br><span class="line">@pytest.fixture</span><br><span class="line">def calc() -&gt; Calculator:</span><br><span class="line">    return Calculator()</span><br><span class="line"></span><br><span class="line">def test_add(calc: Calculator) -&gt; None:</span><br><span class="line">    assert calc.add(2, 1) == 3</span><br></pre></td></tr></table></figure>
<p>在 pytest 中，<strong>当测试函数（或另一个 fixture）的参数名与某个 fixture 的名称相同时，pytest 会自动调用该 fixture，并将其返回值传入测试函数</strong>。</p>
<p>这是 pytest <strong>依赖注入机制的核心</strong>，也是 fixture 能“自动生效”的原因。</p>
<blockquote>
<p><strong>工厂函数（Factory Function）</strong> 是一种<strong>返回对象（通常是类的实例或其他函数）的函数</strong>，它的名字来源于“工厂模式”——就像工厂生产产品一样，这个函数“生产”对象。</p>
</blockquote>
<h4 id="scope-参数"><a href="#scope-参数" class="headerlink" title="scope 参数"></a><code>scope</code> 参数</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@pytest.fixture(scope=&quot;session&quot;)  # 整个测试会话只启动一次</span><br><span class="line">def browser():</span><br><span class="line">    driver = webdriver.Chrome()</span><br><span class="line">    yield driver</span><br><span class="line">    driver.quit()</span><br><span class="line"></span><br><span class="line">def test_login(browser):</span><br><span class="line">    browser.get(&quot;/login&quot;)</span><br><span class="line">def test_profile(browser):</span><br><span class="line">    browser.get(&quot;/profile&quot;)</span><br></pre></td></tr></table></figure>
<p>好处：避免创建多个实例</p>
<p>支持的作用域：</p>
<ul>
<li><code>function</code>（默认）：每个测试函数</li>
<li><code>class</code>：每个测试类</li>
<li><code>module</code>：每个 <code>.py</code> 文件</li>
<li><code>session</code>：整个测试运行</li>
</ul>
<h4 id="自动管理资源生命周期"><a href="#自动管理资源生命周期" class="headerlink" title="自动管理资源生命周期"></a><strong>自动管理资源生命周期</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pytest.fixture</span><br><span class="line">def temp_file():</span><br><span class="line">    # setup: 创建临时文件</span><br><span class="line">    path = &quot;temp.txt&quot;</span><br><span class="line">    with open(path, &quot;w&quot;) as f:</span><br><span class="line">        f.write(&quot;hello&quot;)</span><br><span class="line">    </span><br><span class="line">    yield path  # 测试函数在此处获得 path</span><br><span class="line"></span><br><span class="line">    # teardown: 清理</span><br><span class="line">    os.remove(path)</span><br><span class="line"></span><br><span class="line">def test_read_file(temp_file):</span><br><span class="line">    with open(temp_file) as f:</span><br><span class="line">        assert f.read() == &quot;hello&quot;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pydantic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pydantic/" class="post-title-link" itemprop="url">pydantic</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-10-17 00:00:00" itemprop="dateCreated datePublished" datetime="2025-10-17T00:00:00+08:00">2025-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-18 20:27:51" itemprop="dateModified" datetime="2025-10-18T20:27:51+08:00">2025-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">python相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="field-validator"><a href="#field-validator" class="headerlink" title="@field_validator()"></a>@field_validator()</h3><p>field_validator 是 Pydantic v2 的字段级校验与转换装饰器，用来在模型创建或赋值时，对指定字段做规则检查和/或值变换。例如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@field_validator(&quot;name&quot;)</span><br><span class="line">def _validate_name(cls, v: str) -&gt; str:#cls 表示当前模型类</span><br><span class="line">    v = str(v).strip()</span><br><span class="line">    if not v:</span><br><span class="line">        raise ValueError(&quot;name 不能为空&quot;)</span><br><span class="line">    return v</span><br></pre></td></tr></table></figure>
<p>这个验证器的作用是确保 <code>name</code> 字段不能为空，这个 <code>_validate_name</code> 验证器会在 <strong>Pydantic 模型实例化（创建对象）时自动调用</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/28/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/28/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">数字图像处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-28 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-28T00:00:00+08:00">2025-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-20 08:46:27" itemprop="dateModified" datetime="2025-10-20T08:46:27+08:00">2025-10-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">数字图像处理</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="正变换，逆变换与逆向映射法"><a href="#正变换，逆变换与逆向映射法" class="headerlink" title="正变换，逆变换与逆向映射法"></a>正变换，逆变换与逆向映射法</h3><h4 id="正变换（Forward-Mapping）："><a href="#正变换（Forward-Mapping）：" class="headerlink" title="正变换（Forward Mapping）："></a>正变换（Forward Mapping）：</h4><ul>
<li>思路：遍历原图每个像素 <code>(x, y)</code> → 计算它在新图中的位置 <code>(u, v)</code></li>
<li>问题：<ul>
<li><code>(u, v)</code> 很可能是非整数坐标（如 <code>(123.7, 45.2)</code>）</li>
<li>无法直接赋值给新图的整数像素位置</li>
<li>即使四舍五入，也会导致：<ul>
<li><strong>空洞</strong>：某些新图像素从未被赋值 → 黑色或空白</li>
<li><strong>重叠</strong>：多个原图像素映射到同一新图像素 → 颜色混合或丢失</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id><a href="#" class="headerlink" title=" "></a> </h4><p>图像逻辑运算</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/" class="post-title-link" itemprop="url">邀请好友机制调研</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-09-21 00:00:00 / 修改时间：10:07:09" itemprop="dateCreated datePublished" datetime="2025-09-21T00:00:00+08:00">2025-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%9E%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">实习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%9E%E4%B9%A0/Tosea-ai/" itemprop="url" rel="index"><span itemprop="name">Tosea.ai</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="邀请码"><a href="#邀请码" class="headerlink" title="邀请码"></a><strong>邀请码</strong></h3><p><img src="/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/image-20250921100514116.png" alt="image-20250921100514116"></p>
<h3 id="邀请链接"><a href="#邀请链接" class="headerlink" title="邀请链接"></a><strong>邀请链接</strong></h3><p><img src="/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/image-20250921100529781.png" alt="image-20250921100529781"></p>
<p><img src="/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/image-20250921100700770.png" alt="image-20250921100700770"></p>
<p>在表里面增加一个邀请链接的字段，每个用户有专属的邀请链接</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/" class="post-title-link" itemprop="url">lightrag</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-21 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-21T00:00:00+08:00">2025-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-27 13:07:52" itemprop="dateModified" datetime="2025-09-27T13:07:52+08:00">2025-09-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/rag/" itemprop="url" rel="index"><span itemprop="name">rag</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="算法流程"><a href="#算法流程" class="headerlink" title="算法流程"></a>算法流程</h3><p><img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250924135355928.png" alt="image-20250924135355928"></p>
<ol>
<li><p>对文本进行分块后，分别存储在<strong>kvstorage</strong>与 <strong>VectorDB Storage</strong></p>
</li>
<li><p>然后调用大模型进行<strong>实体与关系抽取</strong>（<strong>Extract Entities &amp; Relations</strong>）</p>
</li>
<li><p>然后进行<strong>实体与关系的存储</strong>（<strong>Entities Data / Relations Data</strong>），<strong>去重后</strong>（<strong>Deduplication</strong>），再次调用embedding模型存储于<strong>VectorDB Storage</strong></p>
</li>
<li>再次调用大模型，对关系与实体的描述进行精炼或合并（<strong>Update Description</strong>），并存储到<strong>Knowledge Graph</strong></li>
</ol>
<p><img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250924135740665.png" alt="image"></p>
<p>LightRAG 使用 4 种类型的存储用于不同目的：</p>
<ul>
<li>KV_STORAGE：llm 响应缓存、文本块、文档信息</li>
<li>VECTOR_STORAGE：实体向量、关系向量、块向量</li>
<li>GRAPH_STORAGE：实体关系图</li>
<li>DOC_STATUS_STORAGE：文档索引状态</li>
</ul>
<p><img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250924142554264.png" alt="image-20250924142554264"></p>
<p>值得注意的是，local检索模式仅使用low_level_keywords，而global检索模式仅支持high_level_keywords，从算法流程图可以看出来，前者更侧重于检索<strong>实体</strong>，后者则侧重于<strong>关系</strong></p>
<p>高关键词（High-level Keywords）用于捕获查询的核心意图和主题概念；低关键词（Low-level Keywords）用于识别具体的实体和细节信息</p>
<p>text_units的作用是：</p>
<ul>
<li>每条实体/关系记录在 KV 里都挂着 <code>chunk_ids</code> 列表。</li>
<li>把 Top-K 结果里的 <code>chunk_ids</code> 做 <strong>合并 + 去重</strong>，得到原始文本块序号。</li>
<li>用序号去 <strong>Nano VectorDB</strong> 里把对应 <strong>text_units（原始句子/段落）</strong> 拉回，作为 <strong>上下文原始语料</strong>。</li>
</ul>
<p><img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250924135917313.png" alt="image-20250924135917313"></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>安装LightRAG服务器</p>
<p>LightRAG服务器旨在提供Web UI和API支持。Web UI便于文档索引、知识图谱探索和简单的RAG查询界面。LightRAG服务器还提供兼容Ollama的接口，旨在将LightRAG模拟为Ollama聊天模型。这使得AI聊天机器人（如Open WebUI）可以轻松访问LightRAG。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install &quot;lightrag-hku[api]&quot;</span><br><span class="line">cp env.example .env</span><br><span class="line">lightrag-server</span><br></pre></td></tr></table></figure>
<p>在此获取LightRAG docker镜像历史版本: <a target="_blank" rel="noopener" href="https://github.com/HKUDS/LightRAG/pkgs/container/lightrag">LightRAG Docker Images</a></p>
<p>安装 LightRAG Core</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install lightrag-hku</span><br></pre></td></tr></table></figure>
<h3 id="LightRAG-服务器和-WebUI"><a href="#LightRAG-服务器和-WebUI" class="headerlink" title="LightRAG 服务器和 WebUI"></a>LightRAG 服务器和 WebUI</h3><p><a target="_blank" rel="noopener" href="https://github.com/HKUDS/LightRAG/blob/main/lightrag/api/README-zh.md">LightRAG/lightrag/api/README-zh.md at main · HKUDS/LightRAG</a></p>
<p>LightRAG 服务器旨在提供 Web 界面和 API 支持。Web 界面便于文档索引、知识图谱探索和简单的 RAG 查询界面。</p>
<h4 id="使用环境变量来配置-LightRAG-服务器。"><a href="#使用环境变量来配置-LightRAG-服务器。" class="headerlink" title="使用环境变量来配置 LightRAG 服务器。"></a>使用环境变量来配置 LightRAG 服务器。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">LLM_BINDING=openai</span><br><span class="line">LLM_MODEL=qwen3-max-preview</span><br><span class="line">LLM_BINDING_HOST=https://dashscope.aliyuncs.com/compatible-mode/v1</span><br><span class="line">LLM_BINDING_API_KEY=sk-</span><br><span class="line"></span><br><span class="line">EMBEDDING_BINDING=openai</span><br><span class="line">EMBEDDING_MODEL=text-embedding-v4</span><br><span class="line">EMBEDDING_DIM=1024</span><br><span class="line">EMBEDDING_BINDING_API_KEY=sk-</span><br><span class="line">EMBEDDING_BINDING_HOST=https://dashscope.aliyuncs.com/compatible-mode/v1</span><br><span class="line"></span><br><span class="line">############################</span><br><span class="line">### 数据存储选择</span><br><span class="line">############################</span><br><span class="line">### 默认存储（推荐用于小规模部署）</span><br><span class="line">LIGHTRAG_KV_STORAGE=JsonKVStorage</span><br><span class="line">LIGHTRAG_DOC_STATUS_STORAGE=JsonDocStatusStorage</span><br><span class="line">LIGHTRAG_GRAPH_STORAGE=NetworkXStorage</span><br><span class="line">LIGHTRAG_VECTOR_STORAGE=NanoVectorDBStorage</span><br><span class="line"></span><br><span class="line">### 图存储（推荐用于生产部署）</span><br><span class="line"># LIGHTRAG_GRAPH_STORAGE=Neo4JStorage</span><br><span class="line"># LIGHTRAG_GRAPH_STORAGE=MemgraphStorage</span><br><span class="line"></span><br><span class="line">### PostgreSQL</span><br><span class="line"># LIGHTRAG_KV_STORAGE=PGKVStorage</span><br><span class="line"># LIGHTRAG_DOC_STATUS_STORAGE=PGDocStatusStorage</span><br><span class="line"># LIGHTRAG_GRAPH_STORAGE=PGGraphStorage</span><br><span class="line"># LIGHTRAG_VECTOR_STORAGE=PGVectorStorage</span><br><span class="line"></span><br><span class="line">### PostgreSQL 配置</span><br><span class="line"># POSTGRES_HOST=localhost</span><br><span class="line"># POSTGRES_PORT=5432</span><br><span class="line"># POSTGRES_USER=您的用户名</span><br><span class="line"># POSTGRES_PASSWORD=&#x27;您的密码&#x27;</span><br><span class="line"># POSTGRES_DATABASE=您的数据库</span><br><span class="line"></span><br><span class="line">### Neo4j 配置</span><br><span class="line"># NEO4J_URI=neo4j+s://xxxxxxxx.databases.neo4j.io</span><br><span class="line"># NEO4J_USERNAME=neo4j</span><br><span class="line"># NEO4J_PASSWORD=&#x27;您的密码&#x27;</span><br><span class="line"># NEO4J_DATABASE=noe4j</span><br><span class="line"></span><br><span class="line">### Milvus 配置</span><br><span class="line"># MILVUS_URI=http://localhost:19530</span><br><span class="line"># MILVUS_DB_NAME=lightrag</span><br><span class="line"># MILVUS_USER=root</span><br><span class="line"># MILVUS_PASSWORD=您的密码</span><br></pre></td></tr></table></figure>
<h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lightrag-server</span><br></pre></td></tr></table></figure>
<p>这是因为每次启动时，LightRAG Server会将.env文件中的环境变量加载至系统环境变量，且系统环境变量的设置具有更高优先级。</p>
<p>启动时可以通过命令行参数覆盖<code>.env</code>文件中的配置。常用的命令行参数包括：</p>
<ul>
<li><code>--host</code>：服务器监听地址（默认：0.0.0.0）</li>
<li><code>--port</code>：服务器监听端口（默认：9621）</li>
<li><code>--working-dir</code>：数据库持久化目录（默认：./rag_storage）</li>
<li><code>--input-dir</code>：上传文件存放目录（默认：./inputs）</li>
<li><code>--workspace</code>: 工作空间名称，用于逻辑上隔离多个LightRAG实例之间的数据（默认：空）</li>
</ul>
<h4 id="启动多个LightRAG实例"><a href="#启动多个LightRAG实例" class="headerlink" title="启动多个LightRAG实例"></a>启动多个LightRAG实例</h4><p>所有实例共享一套相同的<code>.env</code>配置文件，然后通过命令行参数来为每个实例指定不同的服务器监听端口和工作空间。你可以在同一个工作目录中通过不同的命令行参数启动多个LightRAG实例。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 启动实例1</span><br><span class="line">lightrag-server --port 9621 --workspace space1</span><br><span class="line"></span><br><span class="line"># 启动实例2</span><br><span class="line">lightrag-server --port 9622 --workspace space2</span><br></pre></td></tr></table></figure>
<h4 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h4><p><img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250926162648415.png" alt="image-20250926162648415"></p>
<p><img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250926162703167.png" alt="image-20250926162703167"></p>
<p><img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250926162714883.png" alt="image-20250926162714883"></p>
<h3 id="LightRAG的数据隔离"><a href="#LightRAG的数据隔离" class="headerlink" title="LightRAG的数据隔离"></a>LightRAG的数据隔离</h3><p>需要通过<strong>配置工作空间</strong>来实现数据隔离，否则不同实例的数据将会出现冲突并被破坏。</p>
<p>LightRAG 使用 4 种类型的存储用于不同目的：</p>
<ul>
<li>KV_STORAGE：llm 响应缓存、文本块、文档信息</li>
<li>VECTOR_STORAGE：实体向量、关系向量、块向量</li>
<li>GRAPH_STORAGE：实体关系图</li>
<li>DOC_STATUS_STORAGE：文档索引状态</li>
</ul>
<p>每种存储类型都有多种存储实现方式。LightRAG Server默认的存储实现为内存数据库，数据通过文件持久化<strong>保存到WORKING_DIR目录</strong>。LightRAG还支持PostgreSQL、MongoDB、FAISS、Milvus、Qdrant、Neo4j、Memgraph和Redis等存储实现方式。</p>
<p>您可以通过环境变量选择存储实现。例如，在首次启动 API 服务器之前，您可以将以下环境变量设置为特定的存储实现名称：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LIGHTRAG_KV_STORAGE=PGKVStorage</span><br><span class="line">LIGHTRAG_VECTOR_STORAGE=PGVectorStorage</span><br><span class="line">LIGHTRAG_GRAPH_STORAGE=PGGraphStorage</span><br><span class="line">LIGHTRAG_DOC_STATUS_STORAGE=PGDocStatusStorage</span><br></pre></td></tr></table></figure>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1bSaGzJEdv?buvid=XX7932A7E9DD8A1DA92D4974AB535749A9B44&amp;from_spmid=tm.recommend.0.0&amp;is_story_h5=false&amp;mid=25yhOI1fPeVYa5V16BFcAw%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=3e2dd1ec-b589-458b-849b-c2e7f8b4468a&amp;share_source=QQ&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1758418948&amp;unique_k=6aEPhnm&amp;up_id=1606629306&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11&amp;spm_id_from=333.788.videopod.sections">通过实际案例拆解Light RAG，构建可视化知识图谱，解析Graph RAG的运行原理和关键概念（一）_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1zoKuzoENM/?spm_id_from=333.337.search-card.all.click">AI知识图谱 GraphRAG 是怎么回事？_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/HKUDS/LightRAG/blob/main/README-zh.md">LightRAG/README-zh.md 在主 ·香港科技大学/LightRAG —- LightRAG/README-zh.md at main · HKUDS/LightRAG</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/" class="post-title-link" itemprop="url">数据挖掘</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-21 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-21T00:00:00+08:00">2025-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-22 15:53:42" itemprop="dateModified" datetime="2025-09-22T15:53:42+08:00">2025-09-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/" itemprop="url" rel="index"><span itemprop="name">数据挖掘</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="认识数据"><a href="#认识数据" class="headerlink" title="认识数据"></a>认识数据</h3><h4 id="数据的属性"><a href="#数据的属性" class="headerlink" title="数据的属性"></a>数据的属性</h4><div class="table-container">
<table>
<thead>
<tr>
<th>属性类型</th>
<th>定义</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>标称属性 (Nominal)</strong></td>
<td>仅用于区分不同类别，无顺序关系</td>
<td>性别（男/女）、颜色（红/绿/蓝）</td>
</tr>
<tr>
<td><strong>二元属性 (Binary)</strong></td>
<td>仅有两个类别的标称属性</td>
<td>是否存活（是/否）、性别（男/女）</td>
</tr>
<tr>
<td><strong>序数属性 (Ordinal)</strong></td>
<td>类别之间存在明确的顺序关系</td>
<td>教育水平（小学/中学/大学）、舱位等级（1等/2等/3等）</td>
</tr>
<tr>
<td><strong>数值属性 (Numeric)</strong></td>
<td>可度量的数值，可进行数学运算</td>
<td>年龄、票价</td>
</tr>
</tbody>
</table>
</div>
<h4 id="数据相似度的计算方法"><a href="#数据相似度的计算方法" class="headerlink" title="数据相似度的计算方法"></a>数据相似度的计算方法</h4>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/" class="post-title-link" itemprop="url">数据挖掘作业</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-21 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-21T00:00:00+08:00">2025-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-29 20:13:36" itemprop="dateModified" datetime="2025-09-29T20:13:36+08:00">2025-09-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/" itemprop="url" rel="index"><span itemprop="name">数据挖掘</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="数据的规范化"><a href="#数据的规范化" class="headerlink" title="数据的规范化"></a>数据的规范化</h3><ol>
<li><strong>Min-Max 归一化（Normalization）</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br><span class="line"></span><br><span class="line"><span class="comment"># 公式: X_scaled = (X - X_min) / (X_max - X_min)</span></span><br><span class="line">scaler = MinMaxScaler()</span><br><span class="line">X_norm = scaler.fit_transform(X)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>结果范围</strong>：[0, 1]（或可指定其他范围）</li>
<li><strong>保留原始分布形状</strong></li>
<li><strong>对异常值敏感</strong>（因为依赖最大/最小值）</li>
</ul>
<ol>
<li><strong>Z-score 标准化（Standardization）</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"></span><br><span class="line"><span class="comment"># 公式: X_scaled = (X - μ) / σ</span></span><br><span class="line">scaler = StandardScaler()</span><br><span class="line">X_std = scaler.fit_transform(X)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>结果</strong>：均值 ≈ 0，标准差 ≈ 1</li>
<li><strong>不保证固定范围</strong>（可能有 -3 到 +3 甚至更大）</li>
<li><strong>对异常值相对稳健</strong></li>
</ul>
<h4 id="RobustScaler-鲁棒标准化-与Z-score-标准化（Standardization）对比"><a href="#RobustScaler-鲁棒标准化-与Z-score-标准化（Standardization）对比" class="headerlink" title="RobustScaler (鲁棒标准化)与Z-score 标准化（Standardization）对比"></a><strong>RobustScaler (鲁棒标准化)</strong>与Z-score 标准化（Standardization）对比</h4><p>StandardScaler (Z-score标准化)<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">公式: (x - 均值) / 标准差</span><br><span class="line"></span><br><span class="line">问题: 均值和标准差都会被异常值严重影响！</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">正常值: [100, 150, 200, 180, 220]  → 均值 = 170</span><br><span class="line">加入异常值: [100, 150, 200, 180, 220, 6445]  → 均值 = 1216 ❌</span><br><span class="line"></span><br><span class="line">结果: 所有正常值都变成负数，异常值主导了整个标准化过程</span><br></pre></td></tr></table></figure><br>RobustScaler (鲁棒标准化)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">公式: (x - 中位数) / IQR</span><br><span class="line">其中 IQR = Q3 - Q1 (四分位距)</span><br><span class="line"></span><br><span class="line">优势: 中位数和IQR不受异常值影响！</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">正常值: [100, 150, 200, 180, 220]  → 中位数 = 180, IQR = 70</span><br><span class="line">加入异常值: [100, 150, 200, 180, 220, 6445]  → 中位数 = 190, IQR = 70 ✅</span><br><span class="line"></span><br><span class="line">结果: 异常值不会扭曲正常数据的标准化结果</span><br></pre></td></tr></table></figure>
<h3 id="模型评价指标"><a href="#模型评价指标" class="headerlink" title="模型评价指标"></a>模型评价指标</h3>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/" class="post-title-link" itemprop="url">操作系统作业</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-18 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-18T00:00:00+08:00">2025-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-10 11:06:19" itemprop="dateModified" datetime="2025-10-10T11:06:19+08:00">2025-10-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="作业一"><a href="#作业一" class="headerlink" title="作业一"></a>作业一</h3><h4 id="1"><a href="#1" class="headerlink" title="1"></a>1</h4><p><strong>题目：</strong></p>
<p>在某个计算机系统中有一台输入机和一台打印机，现有两道程序投入运行，且程序A先运行，程序B后开始运行。</p>
<ul>
<li><p><strong>程序A</strong>的运行轨迹为：<br>计算50ms，打印100ms，再计算50ms，打印100ms。</p>
</li>
<li><p><strong>程序B</strong>的运行轨迹为：<br>计算50ms，输入80ms，再计算100ms，结束。</p>
</li>
</ul>
<p><strong>系统特点：</strong></p>
<ul>
<li>单CPU、单输入机、单打印机；</li>
<li>程序A先开始运行，程序B后开始；</li>
<li>计算使用CPU，打印使用打印机，输入使用输入机；</li>
<li>输入机、打印机与CPU可并行工作；</li>
<li>无抢占机制，即一旦某程序占用CPU或I/O设备，其他程序必须等待。</li>
</ul>
<p><strong>问题：</strong></p>
<ol>
<li><p>两道程序运行时，CPU是否空闲等待？<strong><em>_（有空闲等待 / 无空闲等待）<br>若有，在哪段时间内等待？</em></strong>ms - ___ms（两个空，第一个填起始时间，第二个填结束时间，仅数字）</p>
</li>
<li><p>程序A，B是否有等待CPU的情况？<br>A：<strong><em>（有等待 / 无等待）<br>B：</em></strong>（有等待 / 无等待）<br>若有，指出发生等待的时刻（若无等待，空格填0）<br>（若有两段以上等待时间，用“/”标表示不同等待时间，如0/30和20/40表示0ms-20ms是第一段空闲；30ms-40ms是第二段空闲）<br>A：<strong><em>ms - </em></strong>ms<br>B：<strong><em>ms - </em></strong>ms</p>
</li>
</ol>
<p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20250917_090110.jpg" alt="IMG_20250917_090110"></p>
<h4 id="2"><a href="#2" class="headerlink" title="2"></a>2</h4><p><strong>题目：</strong></p>
<p>在单CPU和两台I/O设备（I1和I2）的多道程序设计环境下，同时投入三个作业运行，其执行轨迹如下：</p>
<ul>
<li><strong>Job1</strong>：I2（30ms），CPU（10ms），I1（30ms），CPU（10ms）</li>
<li><strong>Job2</strong>：I1（20ms），CPU（20ms），I2（40ms）</li>
<li><strong>Job3</strong>：CPU（30ms），I1（20ms）</li>
</ul>
<p><strong>已知条件：</strong></p>
<ul>
<li>CPU、I1、I2可以并行工作；</li>
<li>优先级从高到低依次为：Job1、Job2、Job3；</li>
<li>优先级高的作业可以抢占优先级低的作业（抢占式调度）；</li>
<li>所有作业同时投入运行。</li>
</ul>
<p><strong>问题：</strong></p>
<ol>
<li><p>每个作业从投入到完成分别所需的时间。</p>
<ul>
<li>Job1：<em>__</em> ms</li>
<li>Job2：<em>__</em> ms</li>
<li>Job3：<em>__</em> ms</li>
</ul>
</li>
<li><p>从作业投入到完成，CPU的利用率是：</p>
<ul>
<li><strong><strong> / </strong></strong> = <em>__</em>%（保留小数点后两位）</li>
</ul>
</li>
<li><p>I/O设备利用率：</p>
<ul>
<li>I1 利用率：<strong><strong> / </strong></strong> = <em>__</em>%（保留小数点后两位）</li>
<li>I2 利用率：<strong><strong> / </strong></strong> = <em>__</em>%（保留小数点后两位）</li>
</ul>
</li>
</ol>
<p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20250917_090158.jpg" alt="IMG_20250917_090158"></p>
<h4 id="3"><a href="#3" class="headerlink" title="3"></a>3</h4><p><strong>题目：</strong></p>
<p>在单机系统中，有同时到达的两个程序A、B，若每个程序单独运行，则使用CPU，DEV1（设备1）、DEV2（设备2）的顺序和时间如下表所示。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>运行情况</th>
<th>程序A</th>
<th>程序B</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>25</td>
<td>20</td>
</tr>
<tr>
<td>DEV1</td>
<td>39</td>
<td>50</td>
</tr>
<tr>
<td>CPU</td>
<td>20</td>
<td>20</td>
</tr>
<tr>
<td>DEV2</td>
<td>20</td>
<td>20</td>
</tr>
<tr>
<td>CPU</td>
<td>20</td>
<td>10</td>
</tr>
<tr>
<td>DEV1</td>
<td>30</td>
<td>20</td>
</tr>
<tr>
<td>CPU</td>
<td>20</td>
<td>45</td>
</tr>
</tbody>
</table>
</div>
<p><strong>给定条件：</strong></p>
<ol>
<li>DEV1和DEV2是不同的I/O设备，它们能够同时工作。</li>
<li>程序B优先级高于程序A，<strong>非抢占式</strong>。当程序A占用CPU时，即使程序B需要使用CPU，也不能打断程序A的执行，而应等待。</li>
<li>当使用CPU之后控制转向I/O设备，或者使用I/O设备之后控制转向CPU，由控制程序执行中断处理，但这段处理时间可以忽略不计。</li>
</ol>
<p><strong>问题：</strong></p>
<ol>
<li>哪个程序先结束？（A / B）</li>
<li>程序全部执行结束需要多少时间？（<em>__</em> ms）</li>
<li>程序全部执行完毕时，CPU利用率是多少？（<em>__</em>%）</li>
<li>A程序等待CPU的累积时间是多少？（<em>__</em> ms）</li>
<li>B程序等待CPU的累积时间是多少？（<em>__</em> ms）</li>
</ol>
<p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20250917_090145.jpg" alt="IMG_20250917_090145"></p>
<h3 id="作业二"><a href="#作业二" class="headerlink" title="作业二"></a>作业二</h3><h4 id="1-1"><a href="#1-1" class="headerlink" title="1"></a>1</h4><p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251010094314155.png" alt="image-20251010094314155"></p>
<p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20251010_101637.jpg" alt="IMG_20251010_101637"></p>
<p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20251010_101643.jpg" alt="IMG_20251010_101643"></p>
<h4 id="2-1"><a href="#2-1" class="headerlink" title="2"></a>2</h4><p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251010102104414.png" alt="image-20251010102104414"></p>
<p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20251010_103349.jpg" alt="IMG_20251010_103349"></p>
<h4 id="3-1"><a href="#3-1" class="headerlink" title="3"></a>3</h4><p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251010110615738.png" alt="image-20251010110615738"></p>
<p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20251010_110541.jpg" alt="IMG_20251010_110541"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">张熙浚</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="本站访问数 fa fa-user 次"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="本站总访问量 fa fa-eye 次"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="400" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
