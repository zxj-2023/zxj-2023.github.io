<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-bounce.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="zxj Blogs">
<meta property="og:type" content="website">
<meta property="og:title" content="Zhang XiJun">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Zhang XiJun">
<meta property="og:description" content="zxj Blogs">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="张熙浚">
<meta property="article:tag" content="zxj">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Zhang XiJun</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zhang XiJun</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">BLOGS</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="搜索..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="张熙浚"
      src="/images/zxjavatar.gif">
  <p class="site-author-name" itemprop="name">张熙浚</p>
  <div class="site-description" itemprop="description">zxj Blogs</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">164</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">60</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zxj-2023" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zxj-2023" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://wpa.qq.com/msgrd?v=3&uin=2902065320&site=qq&menu=yes" title="QQ → http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;2902065320&amp;site&#x3D;qq&amp;menu&#x3D;yes" rel="noopener me" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://zxj-2023.github.io/" title="https:&#x2F;&#x2F;zxj-2023.github.io" rel="noopener" target="_blank">Zhang XiJun</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://theme-next.js.org/" title="https:&#x2F;&#x2F;theme-next.js.org" rel="noopener" target="_blank">NexT</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/18/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%89%93%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/10/18/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%89%93%E5%8C%85/" class="post-title-link" itemprop="url">Python项目结构和打包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-10-18 00:00:00 / 修改时间：20:28:17" itemprop="dateCreated datePublished" datetime="2025-10-18T00:00:00+08:00">2025-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">python相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="python项目结构和打包">Python项目结构和打包</h3>
<h4 id="pip-install-的本质">pip install 的本质</h4>
<p>从 <a target="_blank" rel="noopener" href="https://pypi.org/">PyPI</a>（默认）或其他源（如私有仓库、本地文件）查找指定名称的包，下载对应的<code>.whl</code>文件</p>
<h4 id="whl文件">whl文件</h4>
<ul>
<li><code>.whl</code> 是 <strong>Wheel</strong> 的缩写，是 Python
的一种标准打包格式（PEP 427 定义）。</li>
<li>它本质上是一个 <strong>ZIP 格式的压缩包</strong>，扩展名改为
<code>.whl</code>。</li>
</ul>
<p>安装 .whl 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install package_name.whl</span><br></pre></td></tr></table></figure>
<h4 id="hachling">hachling</h4>
<p><code>hatchling</code> 是 Python
生态中一个<strong>现代的、轻量级的构建后端（build
backend）</strong>，主要用于将 Python 项目打包成可分发的格式（如
<code>.whl</code> 或源码包）。它是 <a target="_blank" rel="noopener" href="https://hatch.pypa.io/">Hatch</a>项目的一部分，由 PyPA（Python
Packaging Authority）推荐使用。</p>
<p>在pyproject.toml添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[build-system]</span><br><span class="line">requires = [&quot;hatchling&quot;]</span><br><span class="line">build-backend = &quot;hatchling.build&quot;</span><br></pre></td></tr></table></figure>
<p>当你运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install .</span><br><span class="line"># 或</span><br><span class="line">python -m build</span><br></pre></td></tr></table></figure>
<p>如果项目配置了 <code>hatchling</code> 作为构建后端，<code>pip</code>
或 <code>build</code> 工具就会调用 <code>hatchling</code>
来完成打包和安装。</p>
<p>例如以下项目结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">my_project/</span><br><span class="line">├── pyproject.toml</span><br><span class="line">├── src/</span><br><span class="line">│   └── my_utils/               ← 你写的包</span><br><span class="line">│       ├── __init__.py</span><br><span class="line">│       └── math.py</span><br><span class="line">├── scripts/</span><br><span class="line">│   └── run_demo.py             ← 想在这里用 my_utils</span><br></pre></td></tr></table></figure>
<p><strong>想让项目的其他文件使用自己编写的包</strong>，在pyproject.toml增加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 👇 新增：显式声明包位置</span><br><span class="line">[tool.hatch.build.targets.wheel]</span><br><span class="line">packages = [&quot;src/my_utils&quot;]</span><br></pre></td></tr></table></figure>
<p>在项目根目录（<code>my_project/</code>）执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv pip install -e .</span><br></pre></td></tr></table></figure>
<blockquote>
<p>✅ 这会把 <code>src/my_utils/</code> 注册为一个可导入的包。</p>
</blockquote>
<h4 id="src-layout">src layout</h4>
<p><code>src layout</code>（也称为 <strong>src 布局</strong> 或
<strong>src 目录结构</strong>）是 Python
项目中一种<strong>推荐的源代码组织方式</strong>，其核心思想是：<strong>将你的
Python 包（package）放在一个名为 <code>src/</code>
的子目录下，而不是直接放在项目根目录中。</strong></p>
<p>❌ 传统布局（不推荐）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">my_project/</span><br><span class="line">├── my_package/</span><br><span class="line">│   ├── __init__.py</span><br><span class="line">│   └── module.py</span><br><span class="line">├── tests/</span><br><span class="line">├── setup.py</span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>
<p>✅ <strong>src 布局（推荐）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">my_project/</span><br><span class="line">├── src/</span><br><span class="line">│   └── my_package/</span><br><span class="line">│       ├── __init__.py</span><br><span class="line">│       └── module.py</span><br><span class="line">├── tests/</span><br><span class="line">├── pyproject.toml</span><br><span class="line">└── README.md</span><br></pre></td></tr></table></figure>
<h4 id="uv-build和uv-pip-install-.什么区别">uv build和uv pip install
.什么区别</h4>
<p>一、<code>uv build</code></p>
<p>✅ 作用：<strong>构建分发包（不安装）</strong></p>
<ul>
<li>调用项目的构建后端（如
<code>hatchling</code>、<code>setuptools</code> 等）。</li>
<li>生成标准的分发文件：
<ul>
<li>一个 <strong>Wheel 文件</strong>（<code>.whl</code>）</li>
<li>一个 <strong>源码分发包</strong>（sdist，<code>.tar.gz</code>）</li>
</ul></li>
<li>输出到项目根目录下的 <code>dist/</code> 文件夹。</li>
<li><strong>不会将包安装到当前 Python 环境中</strong>。</li>
</ul>
<p>🔧 示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv build</span><br></pre></td></tr></table></figure>
<p>输出： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dist/my_package-0.1.0-py3-none-any.whl</span><br><span class="line">dist/my_package-0.1.0.tar.gz</span><br></pre></td></tr></table></figure></p>
<figure>
<img src="/2025/10/18/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%89%93%E5%8C%85/image-20251018192905210.png" alt="image-20251018192905210">
<figcaption aria-hidden="true">image-20251018192905210</figcaption>
</figure>
<p>二、<code>uv pip install .</code></p>
<p>✅ 作用：<strong>安装当前项目到当前环境</strong></p>
<ul>
<li>首先（隐式）构建项目（类似 <code>uv build</code> 的过程）。</li>
<li>然后将构建结果<strong>安装到当前激活的 Python
环境</strong>（如虚拟环境或系统环境）。</li>
<li>安装后，你可以在 Python 中 <code>import</code> 该包。</li>
<li>默认是
<strong>“非可编辑安装”</strong>（即代码改动不会自动生效，除非重新安装）。</li>
</ul>
<p>🔧 示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv pip install .</span><br></pre></td></tr></table></figure>
<p>效果： - 包被安装到 <code>site-packages/</code> - 可在 Python 中
<code>import my_package</code></p>
<h4 id="editable-install可编辑安装"><strong>Editable
install（可编辑安装）</strong></h4>
<p><strong>Editable install（可编辑安装）</strong> 是 Python
包管理中的一种安装模式，它让你在<strong>安装一个包的同时，保留对源代码的直接引用</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uv pip install -e .</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>核心机制</strong>：
<ul>
<li>不复制代码到 <code>site-packages/</code>。</li>
<li>而是在 <code>site-packages/</code> 中创建一个
<strong><code>.pth</code> 文件</strong> 或
<strong><code>my_package.egg-link</code></strong>，指向你本地项目中的
<code>src/</code>（或包目录）。</li>
<li>Python 解释器在导入时，会顺着这个链接去读你本地的源码。</li>
</ul></li>
</ul>
<figure>
<img src="/2025/10/18/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/Python%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%92%8C%E6%89%93%E5%8C%85/image-20251018193022973.png" alt="image-20251018193022973">
<figcaption aria-hidden="true">image-20251018193022973</figcaption>
</figure>
<h4 id="python是从哪里查找模块的">python是从哪里查找模块的</h4>
<p>Python 查找模块（module）的机制由 <strong>模块搜索路径（module search
path）</strong> 决定，这个路径是一个字符串列表，存储在
<code>sys.path</code> 中。当你执行 <code>import some_module</code>
时，Python
会<strong>按顺序</strong>在这个列表中的每个目录里查找对应的模块文件。</p>
<p>可以通过以下代码查看当前 Python 的模块搜索路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import sys</span><br><span class="line">print(sys.path)</span><br></pre></td></tr></table></figure>
<p><code>sys.path</code> 通常包含以下几类路径（顺序很重要）：</p>
<ol type="1">
<li><strong>脚本所在目录（或当前工作目录）</strong></li>
</ol>
<ul>
<li>如果你运行 <code>python /path/to/script.py</code>，那么
<code>/path/to/</code> 会被加到 <code>sys.path[0]</code>。</li>
<li>如果你运行 <code>python</code> 进入交互模式，或运行
<code>python -c "..."</code>，则<strong>当前工作目录（<code>os.getcwd()</code>）</strong>
会被放在首位。</li>
<li>⚠️ 这是很多“意外导入”问题的根源（比如项目根目录下有同名包）。</li>
</ul>
<ol start="2" type="1">
<li><strong>环境变量 <code>PYTHONPATH</code> 中的目录</strong></li>
</ol>
<ul>
<li>类似系统的 <code>PATH</code>，你可以通过设置 <code>PYTHONPATH</code>
添加自定义搜索路径。</li>
<li>示例（Linux/macOS）： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PYTHONPATH=<span class="string">&quot;/my/custom/modules:<span class="variable">$PYTHONPATH</span>&quot;</span></span><br><span class="line">python my_script.py</span><br></pre></td></tr></table></figure></li>
<li>Windows（PowerShell）： <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$env:PYTHONPATH</span> = <span class="string">&quot;C:\my\custom\modules;&quot;</span> + <span class="variable">$env:PYTHONPATH</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="3" type="1">
<li><strong>标准库目录</strong></li>
</ol>
<ul>
<li>Python 自带的模块（如 <code>os</code>, <code>sys</code>,
<code>json</code>）所在位置。</li>
<li>通常位于 Python 安装目录下的 <code>lib/</code> 子目录中。</li>
</ul>
<ol start="4" type="1">
<li><strong>第三方包安装目录（site-packages）</strong></li>
</ol>
<ul>
<li>通过 <code>pip install</code>、<code>uv pip install</code>
等安装的包，会被放到 <code>site-packages</code> 目录。</li>
<li>路径可通过以下命令查看： <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> site</span><br><span class="line"><span class="built_in">print</span>(site.getsitepackages())  <span class="comment"># 全局环境</span></span><br><span class="line"><span class="built_in">print</span>(site.getusersitepackages())  <span class="comment"># 用户级安装</span></span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="5" type="1">
<li><strong><code>.pth</code> 文件中指定的路径</strong></li>
</ol>
<ul>
<li>某些包（尤其是 editable install）会在 <code>site-packages/</code>
中放置 <code>.pth</code> 文件，动态添加路径到
<code>sys.path</code>。</li>
</ul>
<h3 id="参考资料">参考资料</h3>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12NgLzhEKx?spm_id_from=333.788.videopod.sections&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">build
+ hatchling 15分钟搞懂Python项目结构和打包_哔哩哔哩_bilibili</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pydantic/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pydantic/" class="post-title-link" itemprop="url">pydantic</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-10-17 00:00:00" itemprop="dateCreated datePublished" datetime="2025-10-17T00:00:00+08:00">2025-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-18 20:27:51" itemprop="dateModified" datetime="2025-10-18T20:27:51+08:00">2025-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">python相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="field_validator"><span class="citation" data-cites="field_validator">@field_validator</span>()</h3>
<p>field_validator 是 Pydantic v2
的字段级校验与转换装饰器，用来在模型创建或赋值时，对指定字段做规则检查和/或值变换。例如</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@field_validator(&quot;name&quot;)</span><br><span class="line">def _validate_name(cls, v: str) -&gt; str:#cls 表示当前模型类</span><br><span class="line">    v = str(v).strip()</span><br><span class="line">    if not v:</span><br><span class="line">        raise ValueError(&quot;name 不能为空&quot;)</span><br><span class="line">    return v</span><br></pre></td></tr></table></figure>
<p>这个验证器的作用是确保 <code>name</code> 字段不能为空，这个
<code>_validate_name</code> 验证器会在 <strong>Pydantic
模型实例化（创建对象）时自动调用</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/" class="post-title-link" itemprop="url">pytest</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-10-17 00:00:00" itemprop="dateCreated datePublished" datetime="2025-10-17T00:00:00+08:00">2025-10-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-10-18 20:27:55" itemprop="dateModified" datetime="2025-10-18T20:27:55+08:00">2025-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">python相关</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="生成项目结构">生成项目结构</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">─src</span><br><span class="line">│  └─pytest_demo</span><br><span class="line">│          calculator.py</span><br><span class="line">│          __init__.py</span><br></pre></td></tr></table></figure>
<p>生成calculator.py类用于后续学习pytest，<code>以上树状结构使用tree /f</code>生成</p>
<h3 id="init__.py-文件的作用"><code>__init__.py</code> 文件的作用</h3>
<p><code>__init__.py</code>
文件的主要作用是告诉Python解释器这个目录是一个Python包（package）。当Python看到一个包含
<code>__init__.py</code>
文件的目录时，就会将其识别为一个可导入的包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">pytest_demo package</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">from .calculator import Calculator</span><br><span class="line"></span><br><span class="line">__all__ = [&#x27;Calculator&#x27;]</span><br></pre></td></tr></table></figure>
<p>相对导入 ： from .calculator import Calculator</p>
<ul>
<li>.calculator 表示从当前包内的 calculator.py 模块导入 Calculator
类</li>
<li>点号 . 表示相对导入，指向当前包</li>
</ul>
<p><code>__all__</code> 列表 ：
<code>__all__ = ['Calculator']</code></p>
<ul>
<li>定义了当使用 from pytest_demo import * 时会导入哪些对象</li>
<li>这是一个显式的公共API声明</li>
</ul>
<h3 id="pytest-的自动发现规则">pytest 的自动发现规则</h3>
<p>pytest 会自动查找以下内容：</p>
<ul>
<li>文件名：<code>test_*.py</code> 或 <code>*_test.py</code></li>
<li>函数名：<code>test_*()</code></li>
<li>类名：<code>Test*</code>（类中方法也需以 <code>test_</code>
开头）</li>
</ul>
<h3 id="测试文件">测试文件</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">└─tests</span><br><span class="line">    │  test_calculator.py</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from pytest_demo.calculator import Calculator</span><br><span class="line"></span><br><span class="line">def test_add() -&gt; None:</span><br><span class="line">    calc = Calculator()</span><br><span class="line">    assert calc.add(2, 1) == 3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def test_div() -&gt; None:</span><br><span class="line">    calc = Calculator()</span><br><span class="line">    assert calc.divide(2, 1) == 2</span><br></pre></td></tr></table></figure>
<p>运行 <code>uv run pytest</code></p>
<figure>
<img src="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/image-20251018194456963.png" alt="image-20251018194456963">
<figcaption aria-hidden="true">image-20251018194456963</figcaption>
</figure>
<h3 id="vscode支持pytest的可视化页面">vscode支持pytest的可视化页面</h3>
<p>ctrl+shift+p搜索</p>
<figure>
<img src="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/image-20251018194539467.png" alt="image-20251018194539467">
<figcaption aria-hidden="true">image-20251018194539467</figcaption>
</figure>
<figure>
<img src="/2025/10/17/%E5%AD%A6%E4%B9%A0/python%E7%9B%B8%E5%85%B3/pytest/image-20251018194723165.png" alt="image-20251018194723165">
<figcaption aria-hidden="true">image-20251018194723165</figcaption>
</figure>
<h3 id="使用pytest.raises验证异常">使用pytest.raises验证异常</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import pytest</span><br><span class="line"></span><br><span class="line">def test_divide_by_zero() -&gt; None:</span><br><span class="line">    calc = Calculator()</span><br><span class="line">    with pytest.raises(ZeroDivisionError):</span><br><span class="line">        calc.divide(2, 0)</span><br></pre></td></tr></table></figure>
<p>当你测试的函数<strong>应该在特定条件下抛出异常</strong>（比如传入非法参数、除零错误等），你可以用
<code>pytest.raises</code> 来验证：</p>
<blockquote>
<p>“这段代码是否如预期那样，抛出了我们想要的异常？”</p>
</blockquote>
<p>如果：</p>
<ul>
<li>✅ 抛出了<strong>指定类型</strong>的异常 → 测试通过</li>
<li>❌ 没有抛出异常 → 测试失败</li>
<li>❌ 抛出了<strong>其他类型</strong>的异常 → 测试失败</li>
</ul>
<h3 id="pytest.fixture提供测试参数"><span class="citation" data-cites="pytest.fixture提供测试参数">@pytest.fixture提供测试参数</span></h3>
<p><code>@pytest.fixture</code> 是 <strong>pytest
中最核心、最强大的功能之一</strong>，它的作用是：</p>
<blockquote>
<p><strong>为测试函数提供可复用的、隔离的“测试依赖”（如对象、数据、资源、环境等），并管理它们的生命周期。</strong></p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#工厂函数</span><br><span class="line">@pytest.fixture</span><br><span class="line">def calc() -&gt; Calculator:</span><br><span class="line">    return Calculator()</span><br><span class="line"></span><br><span class="line">def test_add(calc: Calculator) -&gt; None:</span><br><span class="line">    assert calc.add(2, 1) == 3</span><br></pre></td></tr></table></figure>
<p>在 pytest 中，<strong>当测试函数（或另一个 fixture）的参数名与某个
fixture 的名称相同时，pytest 会自动调用该
fixture，并将其返回值传入测试函数</strong>。</p>
<p>这是 pytest <strong>依赖注入机制的核心</strong>，也是 fixture
能“自动生效”的原因。</p>
<blockquote>
<p><strong>工厂函数（Factory Function）</strong>
是一种<strong>返回对象（通常是类的实例或其他函数）的函数</strong>，它的名字来源于“工厂模式”——就像工厂生产产品一样，这个函数“生产”对象。</p>
</blockquote>
<h4 id="scope-参数"><code>scope</code> 参数</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@pytest.fixture(scope=&quot;session&quot;)  # 整个测试会话只启动一次</span><br><span class="line">def browser():</span><br><span class="line">    driver = webdriver.Chrome()</span><br><span class="line">    yield driver</span><br><span class="line">    driver.quit()</span><br><span class="line"></span><br><span class="line">def test_login(browser):</span><br><span class="line">    browser.get(&quot;/login&quot;)</span><br><span class="line">def test_profile(browser):</span><br><span class="line">    browser.get(&quot;/profile&quot;)</span><br></pre></td></tr></table></figure>
<p>好处：避免创建多个实例</p>
<p>支持的作用域：</p>
<ul>
<li><code>function</code>（默认）：每个测试函数</li>
<li><code>class</code>：每个测试类</li>
<li><code>module</code>：每个 <code>.py</code> 文件</li>
<li><code>session</code>：整个测试运行</li>
</ul>
<h4 id="自动管理资源生命周期"><strong>自动管理资源生命周期</strong></h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pytest.fixture</span><br><span class="line">def temp_file():</span><br><span class="line">    # setup: 创建临时文件</span><br><span class="line">    path = &quot;temp.txt&quot;</span><br><span class="line">    with open(path, &quot;w&quot;) as f:</span><br><span class="line">        f.write(&quot;hello&quot;)</span><br><span class="line">    </span><br><span class="line">    yield path  # 测试函数在此处获得 path</span><br><span class="line"></span><br><span class="line">    # teardown: 清理</span><br><span class="line">    os.remove(path)</span><br><span class="line"></span><br><span class="line">def test_read_file(temp_file):</span><br><span class="line">    with open(temp_file) as f:</span><br><span class="line">        assert f.read() == &quot;hello&quot;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/28/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/28/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">数字图像处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-28 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-28T00:00:00+08:00">2025-09-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-11-10 13:38:11" itemprop="dateModified" datetime="2025-11-10T13:38:11+08:00">2025-11-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">数字图像处理</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="正变换逆变换与逆向映射法">正变换，逆变换与逆向映射法</h3>
<h4 id="正变换forward-mapping">正变换（Forward Mapping）：</h4>
<ul>
<li>思路：遍历原图每个像素 <code>(x, y)</code> → 计算它在新图中的位置
<code>(u, v)</code></li>
<li>问题：
<ul>
<li><code>(u, v)</code> 很可能是非整数坐标（如
<code>(123.7, 45.2)</code>）</li>
<li>无法直接赋值给新图的整数像素位置</li>
<li>即使四舍五入，也会导致：
<ul>
<li><strong>空洞</strong>：某些新图像素从未被赋值 → 黑色或空白</li>
<li><strong>重叠</strong>：多个原图像素映射到同一新图像素 →
颜色混合或丢失</li>
</ul></li>
</ul></li>
</ul>
<h3 id="图像插值方法interpolation-methods"><strong>图像插值方法</strong>（Interpolation
Methods）</h3>
<p>当你对图像做以下操作时，就需要插值：</p>
<ul>
<li><strong>放大（zoom in）</strong>：像素变多，新像素值从哪来？</li>
<li><strong>缩小（zoom out）</strong>：像素变少，如何保留信息？</li>
<li><strong>旋转、仿射变换、透视变换</strong>：目标像素位置可能落在原图两个像素之间，需要“估算”颜色。</li>
</ul>
<p>插值就是<strong>估算非整数坐标处像素值的方法</strong>。</p>
<h4 id="最近邻插值nearest-neighbor">最近邻插值（Nearest Neighbor）</h4>
<ul>
<li><strong>原理</strong>：新像素的值 =
<strong>离它最近的原图像素值</strong></li>
<li><strong>计算</strong>：不计算！直接“抄最近的”</li>
<li><strong>特点</strong>：
<ul>
<li>⚡ 速度最快</li>
<li>🧱 放大后有明显“马赛克”或“锯齿”（blocky / jagged）</li>
<li>❌ 不适合高质量图像处理</li>
</ul></li>
</ul>
<h4 id="双线性插值bilinear-interpolation">双线性插值（Bilinear
Interpolation）</h4>
<ul>
<li><strong>原理</strong>：在 <strong>2×2
邻域</strong>（4个像素）内，<strong>先水平插值，再垂直插值</strong></li>
<li><strong>计算</strong>：加权平均（距离越近，权重越大）</li>
<li><strong>特点</strong>：
<ul>
<li>⏱ 速度较快</li>
<li>🌫 图像变“柔和”，边缘轻微模糊</li>
<li>✅ 是<strong>默认的 resize 插值方法</strong>（OpenCV 默认值）</li>
</ul></li>
</ul>
<blockquote>
<p>🖼 举例（1D 简化）： 原值：A=100（位置0），B=200（位置1） 在 0.3
处插值 → <code>100×(1−0.3) + 200×0.3 = 130</code> 2D
就是两次这样的操作（x方向 + y方向）</p>
</blockquote>
<h4 id="双三次插值bicubic-interpolation">双三次插值（Bicubic
Interpolation）</h4>
<ul>
<li><strong>原理</strong>：在 <strong>4×4
邻域</strong>（16个像素）内，用<strong>三次多项式</strong>拟合曲面</li>
<li><strong>计算</strong>：复杂，涉及更多像素和权重函数（常用
Catmull-Rom 样条）</li>
<li><strong>特点</strong>：
<ul>
<li>🐢 速度较慢（约是 bilinear 的 4~8 倍）</li>
<li>🔍 边缘更锐利，细节保留更好</li>
<li>⚠️ 可能产生“过冲”（overshoot）：边缘出现亮/暗 halo（光晕）</li>
</ul></li>
</ul>
<h3 id="图像逻辑运算">图像逻辑运算</h3>
<h3 id="单尺度和多尺度retinex增强方法实现图像增强">单尺度和多尺度Retinex增强方法实现图像增强</h3>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/" class="post-title-link" itemprop="url">lightrag</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-21 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-21T00:00:00+08:00">2025-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-11-02 12:32:46" itemprop="dateModified" datetime="2025-11-02T12:32:46+08:00">2025-11-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/rag/" itemprop="url" rel="index"><span itemprop="name">rag</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="算法流程">算法流程</h3>
<figure>
<img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250924135355928.png" alt="image-20250924135355928">
<figcaption aria-hidden="true">image-20250924135355928</figcaption>
</figure>
<ol type="1">
<li><p>对文本进行分块后，分别存储在<strong>kvstorage</strong>与
<strong>VectorDB Storage</strong></p></li>
<li><p>然后调用大模型进行<strong>实体与关系抽取</strong>（<strong>Extract
Entities &amp; Relations</strong>）</p></li>
<li><p>然后进行<strong>实体与关系的存储</strong>（<strong>Entities Data
/ Relations
Data</strong>），<strong>去重后</strong>（<strong>Deduplication</strong>），再次调用embedding模型存储于<strong>VectorDB
Storage</strong></p></li>
<li><p>再次调用大模型，对关系与实体的描述进行精炼或合并（<strong>Update
Description</strong>），并存储到<strong>Knowledge
Graph</strong></p></li>
</ol>
<figure>
<img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250924135740665.png" alt="image">
<figcaption aria-hidden="true">image</figcaption>
</figure>
<p>LightRAG 使用 4 种类型的存储用于不同目的：</p>
<ul>
<li>KV_STORAGE：llm 响应缓存、文本块、文档信息</li>
<li>VECTOR_STORAGE：实体向量、关系向量、块向量</li>
<li>GRAPH_STORAGE：实体关系图</li>
<li>DOC_STATUS_STORAGE：文档索引状态</li>
</ul>
<figure>
<img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250924142554264.png" alt="image-20250924142554264">
<figcaption aria-hidden="true">image-20250924142554264</figcaption>
</figure>
<p>值得注意的是，local检索模式仅使用low_level_keywords，而global检索模式仅支持high_level_keywords，从算法流程图可以看出来，前者更侧重于检索<strong>实体</strong>，后者则侧重于<strong>关系</strong></p>
<p>高关键词（High-level
Keywords）用于捕获查询的核心意图和主题概念；低关键词（Low-level
Keywords）用于识别具体的实体和细节信息</p>
<p>text_units的作用是：</p>
<ul>
<li>每条实体/关系记录在 KV 里都挂着 <code>chunk_ids</code> 列表。</li>
<li>把 Top-K 结果里的 <code>chunk_ids</code> 做 <strong>合并 +
去重</strong>，得到原始文本块序号。</li>
<li>用序号去 <strong>Nano VectorDB</strong> 里把对应
<strong>text_units（原始句子/段落）</strong> 拉回，作为
<strong>上下文原始语料</strong>。</li>
</ul>
<figure>
<img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250924135917313.png" alt="image-20250924135917313">
<figcaption aria-hidden="true">image-20250924135917313</figcaption>
</figure>
<h3 id="安装">安装</h3>
<p>安装LightRAG服务器</p>
<p>LightRAG服务器旨在提供Web UI和API支持。Web
UI便于文档索引、知识图谱探索和简单的RAG查询界面。LightRAG服务器还提供兼容Ollama的接口，旨在将LightRAG模拟为Ollama聊天模型。这使得AI聊天机器人（如Open
WebUI）可以轻松访问LightRAG。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip install &quot;lightrag-hku[api]&quot;</span><br><span class="line">cp env.example .env</span><br><span class="line">lightrag-server</span><br></pre></td></tr></table></figure>
<p>在此获取LightRAG docker镜像历史版本: <a target="_blank" rel="noopener" href="https://github.com/HKUDS/LightRAG/pkgs/container/lightrag">LightRAG
Docker Images</a></p>
<p>安装 LightRAG Core</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install lightrag-hku</span><br></pre></td></tr></table></figure>
<h3 id="lightrag-服务器和-webui">LightRAG 服务器和 WebUI</h3>
<p><a target="_blank" rel="noopener" href="https://github.com/HKUDS/LightRAG/blob/main/lightrag/api/README-zh.md">LightRAG/lightrag/api/README-zh.md
at main · HKUDS/LightRAG</a></p>
<p>LightRAG 服务器旨在提供 Web 界面和 API 支持。Web
界面便于文档索引、知识图谱探索和简单的 RAG 查询界面。</p>
<h4 id="使用环境变量来配置-lightrag-服务器">使用环境变量来配置 LightRAG
服务器。</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">LLM_BINDING=openai</span><br><span class="line">LLM_MODEL=qwen3-max-preview</span><br><span class="line">LLM_BINDING_HOST=https://dashscope.aliyuncs.com/compatible-mode/v1</span><br><span class="line">LLM_BINDING_API_KEY=sk-</span><br><span class="line"></span><br><span class="line">EMBEDDING_BINDING=openai</span><br><span class="line">EMBEDDING_MODEL=text-embedding-v4</span><br><span class="line">EMBEDDING_DIM=1024</span><br><span class="line">EMBEDDING_BINDING_API_KEY=sk-</span><br><span class="line">EMBEDDING_BINDING_HOST=https://dashscope.aliyuncs.com/compatible-mode/v1</span><br><span class="line"></span><br><span class="line">############################</span><br><span class="line">### 数据存储选择</span><br><span class="line">############################</span><br><span class="line">### 默认存储（推荐用于小规模部署）</span><br><span class="line">LIGHTRAG_KV_STORAGE=JsonKVStorage</span><br><span class="line">LIGHTRAG_DOC_STATUS_STORAGE=JsonDocStatusStorage</span><br><span class="line">LIGHTRAG_GRAPH_STORAGE=NetworkXStorage</span><br><span class="line">LIGHTRAG_VECTOR_STORAGE=NanoVectorDBStorage</span><br><span class="line"></span><br><span class="line">### 图存储（推荐用于生产部署）</span><br><span class="line"># LIGHTRAG_GRAPH_STORAGE=Neo4JStorage</span><br><span class="line"># LIGHTRAG_GRAPH_STORAGE=MemgraphStorage</span><br><span class="line"></span><br><span class="line">### PostgreSQL</span><br><span class="line"># LIGHTRAG_KV_STORAGE=PGKVStorage</span><br><span class="line"># LIGHTRAG_DOC_STATUS_STORAGE=PGDocStatusStorage</span><br><span class="line"># LIGHTRAG_GRAPH_STORAGE=PGGraphStorage</span><br><span class="line"># LIGHTRAG_VECTOR_STORAGE=PGVectorStorage</span><br><span class="line"></span><br><span class="line">### PostgreSQL 配置</span><br><span class="line"># POSTGRES_HOST=localhost</span><br><span class="line"># POSTGRES_PORT=5432</span><br><span class="line"># POSTGRES_USER=您的用户名</span><br><span class="line"># POSTGRES_PASSWORD=&#x27;您的密码&#x27;</span><br><span class="line"># POSTGRES_DATABASE=您的数据库</span><br><span class="line"></span><br><span class="line">### Neo4j 配置</span><br><span class="line"># NEO4J_URI=neo4j+s://xxxxxxxx.databases.neo4j.io</span><br><span class="line"># NEO4J_USERNAME=neo4j</span><br><span class="line"># NEO4J_PASSWORD=&#x27;您的密码&#x27;</span><br><span class="line"># NEO4J_DATABASE=noe4j</span><br><span class="line"></span><br><span class="line">### Milvus 配置</span><br><span class="line"># MILVUS_URI=http://localhost:19530</span><br><span class="line"># MILVUS_DB_NAME=lightrag</span><br><span class="line"># MILVUS_USER=root</span><br><span class="line"># MILVUS_PASSWORD=您的密码</span><br></pre></td></tr></table></figure>
<h4 id="启动">启动</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lightrag-server</span><br></pre></td></tr></table></figure>
<p>这是因为每次启动时，LightRAG
Server会将.env文件中的环境变量加载至系统环境变量，且系统环境变量的设置具有更高优先级。</p>
<p>启动时可以通过命令行参数覆盖<code>.env</code>文件中的配置。常用的命令行参数包括：</p>
<ul>
<li><code>--host</code>：服务器监听地址（默认：0.0.0.0）</li>
<li><code>--port</code>：服务器监听端口（默认：9621）</li>
<li><code>--working-dir</code>：数据库持久化目录（默认：./rag_storage）</li>
<li><code>--input-dir</code>：上传文件存放目录（默认：./inputs）</li>
<li><code>--workspace</code>:
工作空间名称，用于逻辑上隔离多个LightRAG实例之间的数据（默认：空）</li>
</ul>
<h4 id="启动多个lightrag实例">启动多个LightRAG实例</h4>
<p>所有实例共享一套相同的<code>.env</code>配置文件，然后通过命令行参数来为每个实例指定不同的服务器监听端口和工作空间。你可以在同一个工作目录中通过不同的命令行参数启动多个LightRAG实例。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 启动实例1</span><br><span class="line">lightrag-server --port 9621 --workspace space1</span><br><span class="line"></span><br><span class="line"># 启动实例2</span><br><span class="line">lightrag-server --port 9622 --workspace space2</span><br></pre></td></tr></table></figure>
<h4 id="运行">运行</h4>
<figure>
<img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250926162648415.png" alt="image-20250926162648415">
<figcaption aria-hidden="true">image-20250926162648415</figcaption>
</figure>
<figure>
<img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250926162703167.png" alt="image-20250926162703167">
<figcaption aria-hidden="true">image-20250926162703167</figcaption>
</figure>
<figure>
<img src="/2025/09/21/%E5%AD%A6%E4%B9%A0/rag/lightrag/image-20250926162714883.png" alt="image-20250926162714883">
<figcaption aria-hidden="true">image-20250926162714883</figcaption>
</figure>
<h3 id="lightrag的数据隔离">LightRAG的数据隔离</h3>
<p>需要通过<strong>配置工作空间</strong>来实现数据隔离，否则不同实例的数据将会出现冲突并被破坏。</p>
<p>LightRAG 使用 4 种类型的存储用于不同目的：</p>
<ul>
<li>KV_STORAGE：llm 响应缓存、文本块、文档信息</li>
<li>VECTOR_STORAGE：实体向量、关系向量、块向量</li>
<li>GRAPH_STORAGE：实体关系图</li>
<li>DOC_STATUS_STORAGE：文档索引状态</li>
</ul>
<p>每种存储类型都有多种存储实现方式。LightRAG
Server默认的存储实现为内存数据库，数据通过文件持久化<strong>保存到WORKING_DIR目录</strong>。LightRAG还支持PostgreSQL、MongoDB、FAISS、Milvus、Qdrant、Neo4j、Memgraph和Redis等存储实现方式。</p>
<p>您可以通过环境变量选择存储实现。例如，在首次启动 API
服务器之前，您可以将以下环境变量设置为特定的存储实现名称：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LIGHTRAG_KV_STORAGE=PGKVStorage</span><br><span class="line">LIGHTRAG_VECTOR_STORAGE=PGVectorStorage</span><br><span class="line">LIGHTRAG_GRAPH_STORAGE=PGGraphStorage</span><br><span class="line">LIGHTRAG_DOC_STATUS_STORAGE=PGDocStatusStorage</span><br></pre></td></tr></table></figure>
<h3 id="文档和块处理逻辑说明">文档和块处理逻辑说明</h3>
<p>LightRAG
中的文档处理流程有些复杂，分为两个主要阶段：提取阶段（实体和关系提取）和合并阶段（实体和关系合并）。有两个关键参数控制流程并发性：并行处理的最大文件数（<code>MAX_PARALLEL_INSERT</code>）和最大并发
LLM 请求数（<code>MAX_ASYNC</code>）。工作流程描述如下：</p>
<ol type="1">
<li><code>MAX_ASYNC</code> 限制系统中并发 LLM
请求的总数，包括查询、提取和合并的请求。LLM
请求具有不同的优先级：查询操作优先级最高，其次是合并，然后是提取。</li>
<li><code>MAX_PARALLEL_INSERT</code>
控制提取阶段并行处理的文件数量。<code>MAX_PARALLEL_INSERT</code>建议设置为2～10之间，通常设置为
<code>MAX_ASYNC/3</code>，设置太大会导致合并阶段不同文档之间实体和关系重名的机会增大，降低合并阶段的效率。</li>
<li>在单个文件中，来自不同文本块的实体和关系提取是并发处理的，并发度由
<code>MAX_ASYNC</code> 设置。只有在处理完 <code>MAX_ASYNC</code>
个文本块后，系统才会继续处理同一文件中的下一批文本块。</li>
<li>当一个文件完成实体和关系提后，将进入实体和关系合并阶段。这一阶段也会并发处理多个实体和关系，其并发度同样是由
<code>MAX_ASYNC</code> 控制。</li>
<li>合并阶段的 LLM
请求的优先级别高于提取阶段，目的是让进入合并阶段的文件尽快完成处理，并让处理结果尽快更新到向量数据库中。</li>
<li>为防止竞争条件，合并阶段会避免并发处理同一个实体或关系，当多个文件中都涉及同一个实体或关系需要合并的时候他们会串行执行。</li>
<li>每个文件在流程中被视为一个原子处理单元。只有当其所有文本块都完成提取和合并后，文件才会被标记为成功处理。如果在处理过程中发生任何错误，整个文件将被标记为失败，并且必须重新处理。</li>
<li>当由于错误而重新处理文件时，由于 LLM
缓存，先前处理的文本块可以快速跳过。尽管 LLM
缓存在合并阶段也会被利用，但合并顺序的不一致可能会限制其在此阶段的有效性。</li>
<li>如果在提取过程中发生错误，系统不会保留任何中间结果。如果在合并过程中发生错误，已合并的实体和关系可能会被保留；当重新处理同一文件时，重新提取的实体和关系将与现有实体和关系合并，而不会影响查询结果。</li>
<li>在合并阶段结束时，所有实体和关系数据都会在向量数据库中更新。如果此时发生错误，某些更新可能会被保留。但是，下一次处理尝试将覆盖先前结果，确保成功重新处理的文件不会影响未来查询结果的完整性。</li>
</ol>
<h3 id="section"></h3>
<p>大家好，我想请教一下如何更好的使用这个项目，我现在处理的好慢，昨天从晚上十点跑到今天早上7点，只处理好33份文件[苦涩]我看日志，一份47页的pdf花了一个小时（mineru处理了十分钟）。
我自己总结下是有以下几个
1.我应该使用milvus和neo4j存储，而不是图方便存本地
2.设置一下并发，而不是每次只处理一个文件
3.不对图片进行处理了（感觉对我当前的场景没有必要）
针对第一点，我想问一下，存储到数据库是影响检索速率还是存储（我个人感觉是不是只影响检索啊）</p>
<p>Embedding模型应该本地部署，这样速度才比较快。一个文本块的Embedding速度在本地是毫秒级别的。调用云端API通常是秒级别的。
没有必要都用RagAnything来处理，先试一下用LightRAG来处理看一把速度如何。日后LightRAG会进程RagAnything，到时候可以灵活地指定每个文件的处理方式。
LightRAG的处理速度组要受到LLM的影响，与使用什么存储关系不是十分大。
LLM每秒能够输出的Tokens数量和支持的最大并发数决定了文档处理的速度。
例如一个LLM在8个并发的时候能够达到 400Tokens/秒
的峰值，预计处理速度达到15～20秒处理一个文本块。文本块的处理速度与识别出来的实体数量和实体关系需要合并的数量是有关的，因此不同文档是有所不同的。
可以用以上经验值来评估一下自己的系统处理速度是否合理。</p>
<h3 id="实现代码">实现代码</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line">class LightRAGStorage:</span><br><span class="line">    &quot;&quot;&quot;LightRAG存储和检索类</span><br><span class="line"></span><br><span class="line">    支持多种存储后端：</span><br><span class="line">    - KV存储: PostgreSQL</span><br><span class="line">    - 文档状态存储: PostgreSQL</span><br><span class="line">    - 图存储: Neo4j</span><br><span class="line">    - 向量存储: Milvus</span><br><span class="line"></span><br><span class="line">    使用workspace实现数据隔离</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self, workspace: str = &quot;default&quot;):</span><br><span class="line">        &quot;&quot;&quot;初始化LightRAG存储</span><br><span class="line"></span><br><span class="line">        Args:</span><br><span class="line">            workspace: 工作空间名称，用于数据隔离</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        self.workspace = workspace</span><br><span class="line"></span><br><span class="line">        # 加载环境变量</span><br><span class="line">        load_dotenv()</span><br><span class="line"></span><br><span class="line">        # 使用文件同级的 lightrag_storage 目录</span><br><span class="line">        self.working_dir = os.path.join(os.path.dirname(__file__), &quot;lightrag_storage&quot;)</span><br><span class="line"></span><br><span class="line">        self.rag: Optional[LightRAG] = None</span><br><span class="line"></span><br><span class="line">        # 确保工作目录存在</span><br><span class="line">        os.makedirs(self.working_dir, exist_ok=True)</span><br><span class="line"></span><br><span class="line">    async def _get_llm_model_func(self):</span><br><span class="line">        &quot;&quot;&quot;LLM模型函数&quot;&quot;&quot;</span><br><span class="line">        async def llm_model_func(</span><br><span class="line">            prompt,</span><br><span class="line">            system_prompt=None,</span><br><span class="line">            history_messages=[],</span><br><span class="line">            keyword_extraction=False,</span><br><span class="line">            **kwargs</span><br><span class="line">        ) -&gt; str:</span><br><span class="line">            return await openai_complete_if_cache(</span><br><span class="line">                model=os.getenv(&quot;DASHSCOPE_MODEL&quot;, &quot;qwen-max&quot;),</span><br><span class="line">                prompt=prompt,</span><br><span class="line">                system_prompt=system_prompt,</span><br><span class="line">                history_messages=history_messages,</span><br><span class="line">                api_key=os.getenv(&quot;DASHSCOPE_API_KEY&quot;),</span><br><span class="line">                base_url=os.getenv(&quot;DASHSCOPE_API_BASE&quot;, &quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;),</span><br><span class="line">                **kwargs</span><br><span class="line">            )</span><br><span class="line">        return llm_model_func</span><br><span class="line"></span><br><span class="line">    async def _get_embedding_func(self):</span><br><span class="line">        &quot;&quot;&quot;嵌入模型函数&quot;&quot;&quot;</span><br><span class="line">        async def embedding_func(texts: List[str]) -&gt; np.ndarray:</span><br><span class="line">            return await openai_embed(</span><br><span class="line">                texts,</span><br><span class="line">                model=os.getenv(&quot;DASHSCOPE_EMBEDDING_MODEL&quot;, &quot;text-embedding-v4&quot;),</span><br><span class="line">                api_key=os.getenv(&quot;DASHSCOPE_API_KEY&quot;),</span><br><span class="line">                base_url=os.getenv(&quot;DASHSCOPE_API_BASE&quot;, &quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;)</span><br><span class="line">            )</span><br><span class="line">        return embedding_func</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    async def initialize(self) -&gt; None:</span><br><span class="line">        &quot;&quot;&quot;初始化LightRAG实例&quot;&quot;&quot;</span><br><span class="line">        if self.rag is not None:</span><br><span class="line">            return</span><br><span class="line"></span><br><span class="line">        # 获取模型函数</span><br><span class="line">        llm_model_func = await self._get_llm_model_func()</span><br><span class="line">        embedding_func = await self._get_embedding_func()</span><br><span class="line"></span><br><span class="line">        # 存储配置 - 统一使用字符串方式，让LightRAG自动处理</span><br><span class="line">        # 图存储配置</span><br><span class="line">        graph_storage = os.getenv(&quot;LIGHTRAG_GRAPH_STORAGE&quot;, &quot;Neo4JStorage&quot;)</span><br><span class="line"></span><br><span class="line">        # KV存储配置</span><br><span class="line">        kv_storage = os.getenv(&quot;LIGHTRAG_KV_STORAGE&quot;, &quot;PGKVStorage&quot;)</span><br><span class="line"></span><br><span class="line">        # 文档状态存储配置</span><br><span class="line">        doc_status_storage = os.getenv(&quot;LIGHTRAG_DOC_STATUS_STORAGE&quot;, &quot;PGDocStatusStorage&quot;)</span><br><span class="line"></span><br><span class="line">        # 向量存储配置</span><br><span class="line">        vector_storage = os.getenv(&quot;LIGHTRAG_VECTOR_STORAGE&quot;, &quot;MilvusVectorDBStorage&quot;)</span><br><span class="line"></span><br><span class="line">        # 创建LightRAG实例</span><br><span class="line">        self.rag = LightRAG(</span><br><span class="line">            working_dir=self.working_dir,</span><br><span class="line">            embedding_func=EmbeddingFunc(</span><br><span class="line">                func=embedding_func,</span><br><span class="line">                embedding_dim=int(os.getenv(&quot;EMBEDDING_DIM&quot;, 1024))</span><br><span class="line">            ),</span><br><span class="line">            llm_model_func=llm_model_func,</span><br><span class="line">            workspace=self.workspace,</span><br><span class="line">            graph_storage=graph_storage,</span><br><span class="line">            kv_storage=kv_storage,</span><br><span class="line">            doc_status_storage=doc_status_storage,</span><br><span class="line">            vector_storage=vector_storage</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        # 初始化存储</span><br><span class="line">        await self.rag.initialize_storages()</span><br><span class="line">        await initialize_pipeline_status()</span><br><span class="line"></span><br><span class="line">    async def insert_text(self, text: str) -&gt; None:</span><br><span class="line">        &quot;&quot;&quot;插入文本到LightRAG</span><br><span class="line"></span><br><span class="line">        Args:</span><br><span class="line">            text: 要插入的文本内容</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        if self.rag is None:</span><br><span class="line">            await self.initialize()</span><br><span class="line"></span><br><span class="line">        await self.rag.ainsert(text)</span><br><span class="line"></span><br><span class="line">    async def insert_texts(self, texts: List[str]) -&gt; None:</span><br><span class="line">        &quot;&quot;&quot;批量插入文本</span><br><span class="line"></span><br><span class="line">        Args:</span><br><span class="line">            texts: 文本列表</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        for text in texts:</span><br><span class="line">            await self.insert_text(text)</span><br><span class="line"></span><br><span class="line">    async def query(</span><br><span class="line">        self,</span><br><span class="line">        query: str,</span><br><span class="line">        mode: str = &quot;hybrid&quot;,</span><br><span class="line">        **kwargs</span><br><span class="line">    ) -&gt; str:</span><br><span class="line">        &quot;&quot;&quot;执行查询</span><br><span class="line"></span><br><span class="line">        Args:</span><br><span class="line">            query: 查询文本</span><br><span class="line">            mode: 查询模式 (&quot;naive&quot;, &quot;local&quot;, &quot;global&quot;, &quot;hybrid&quot;)</span><br><span class="line">            **kwargs: 其他查询参数</span><br><span class="line"></span><br><span class="line">        Returns:</span><br><span class="line">            查询结果</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        if self.rag is None:</span><br><span class="line">            await self.initialize()</span><br><span class="line"></span><br><span class="line">        return await self.rag.aquery(</span><br><span class="line">            query,</span><br><span class="line">            param=QueryParam(mode=mode, **kwargs)</span><br><span class="line">        )</span><br></pre></td></tr></table></figure>
<h3 id="参考资料">参考资料</h3>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1bSaGzJEdv?buvid=XX7932A7E9DD8A1DA92D4974AB535749A9B44&amp;from_spmid=tm.recommend.0.0&amp;is_story_h5=false&amp;mid=25yhOI1fPeVYa5V16BFcAw%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=3e2dd1ec-b589-458b-849b-c2e7f8b4468a&amp;share_source=QQ&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1758418948&amp;unique_k=6aEPhnm&amp;up_id=1606629306&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11&amp;spm_id_from=333.788.videopod.sections">通过实际案例拆解Light
RAG，构建可视化知识图谱，解析Graph
RAG的运行原理和关键概念（一）_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1zoKuzoENM/?spm_id_from=333.337.search-card.all.click">AI知识图谱
GraphRAG 是怎么回事？_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/HKUDS/LightRAG/blob/main/README-zh.md">LightRAG/README-zh.md
在主 ·香港科技大学/LightRAG — LightRAG/README-zh.md at main ·
HKUDS/LightRAG</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/" class="post-title-link" itemprop="url">邀请好友机制调研</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-09-21 00:00:00 / 修改时间：10:07:09" itemprop="dateCreated datePublished" datetime="2025-09-21T00:00:00+08:00">2025-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%9E%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">实习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%9E%E4%B9%A0/Tosea-ai/" itemprop="url" rel="index"><span itemprop="name">Tosea.ai</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="邀请码"><strong>邀请码</strong></h3>
<figure>
<img src="/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/image-20250921100514116.png" alt="image-20250921100514116">
<figcaption aria-hidden="true">image-20250921100514116</figcaption>
</figure>
<h3 id="邀请链接"><strong>邀请链接</strong></h3>
<figure>
<img src="/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/image-20250921100529781.png" alt="image-20250921100529781">
<figcaption aria-hidden="true">image-20250921100529781</figcaption>
</figure>
<figure>
<img src="/2025/09/21/%E5%AE%9E%E4%B9%A0/Tosea.ai/%E9%82%80%E8%AF%B7%E5%A5%BD%E5%8F%8B%E6%9C%BA%E5%88%B6%E8%B0%83%E7%A0%94/image-20250921100700770.png" alt="image-20250921100700770">
<figcaption aria-hidden="true">image-20250921100700770</figcaption>
</figure>
<p>在表里面增加一个邀请链接的字段，每个用户有专属的邀请链接</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/" class="post-title-link" itemprop="url">数据挖掘</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-21 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-21T00:00:00+08:00">2025-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-11-11 17:26:40" itemprop="dateModified" datetime="2025-11-11T17:26:40+08:00">2025-11-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/" itemprop="url" rel="index"><span itemprop="name">数据挖掘</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="认识数据">认识数据</h3>
<h4 id="数据的属性">数据的属性</h4>
<table>
<colgroup>
<col style="width: 21%">
<col style="width: 29%">
<col style="width: 49%">
</colgroup>
<thead>
<tr>
<th>属性类型</th>
<th>定义</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>标称属性 (Nominal)</strong></td>
<td>仅用于区分不同类别，无顺序关系</td>
<td>性别（男/女）、颜色（红/绿/蓝）</td>
</tr>
<tr>
<td><strong>二元属性 (Binary)</strong></td>
<td>仅有两个类别的标称属性</td>
<td>是否存活（是/否）、性别（男/女）</td>
</tr>
<tr>
<td><strong>序数属性 (Ordinal)</strong></td>
<td>类别之间存在明确的顺序关系</td>
<td>教育水平（小学/中学/大学）、舱位等级（1等/2等/3等）</td>
</tr>
<tr>
<td><strong>数值属性 (Numeric)</strong></td>
<td>可度量的数值，可进行数学运算</td>
<td>年龄、票价</td>
</tr>
</tbody>
</table>
<h4 id="数据相似度的计算方法">数据相似度的计算方法</h4>
<h3 id="关联分析算法">关联分析算法</h3>
<h3 id="频繁项集">频繁项集</h3>
<h4 id="apriori算法">apriori算法</h4>
<h4 id="fp-growth">fp-growth</h4>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1VAN1z2Ev1/?spm_id_from=333.337.search-card.all.click&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">十分钟速通
| FP-Tree算法_哔哩哔哩_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1131uYxE1a/?spm_id_from=333.337.search-card.all.click&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">频繁模式挖掘FP-growth算法分析例题讲解_哔哩哔哩_bilibili</a></p>
<h4 id="规则评估方法">规则评估方法</h4>
<h3 id="聚类">聚类</h3>
<h4 id="k-meansk均值聚类">1. K-means（K均值聚类）</h4>
<p>✅ 核心思想：</p>
<ul>
<li><strong>假设</strong>：簇是“球状”、“大小相近”、“围绕中心分布”的。</li>
<li><strong>目标</strong>：把数据分成 K 个簇，使得
<strong>每个点到其所属簇中心的距离平方和最小</strong>。</li>
</ul>
<p>🔄 算法步骤（迭代优化）：</p>
<p><strong>Step 1：初始化</strong></p>
<ul>
<li>随机选择 <strong>K 个点</strong>作为初始簇中心（centroids）。
<ul>
<li>也可以用 K-means++ 更智能地选初始点（避免坏初始化）。</li>
</ul></li>
</ul>
<p><strong>Step 2：分配阶段（Assignment）</strong></p>
<ul>
<li>对每个数据点 *x<strong>i* ，计算它到 </strong>每个簇中心**
的距离（通常用欧氏距离）；</li>
<li>将 *x<strong>i* 分配给 </strong>距离最近的簇中心** 所在的簇。</li>
</ul>
<blockquote>
<p>💡 例如：点 (1,2) 到中心 A(0,0) 距离是 2.24，到 B(3,3) 是 2.24 →
可能分给 A（打破平局规则）。</p>
</blockquote>
<p><strong>Step 3：更新阶段（Update）</strong></p>
<ul>
<li>对每个簇，重新计算其<strong>新的簇中心</strong>：取该簇中所有点的<strong>坐标均值</strong>。
<ul>
<li>例如：簇中有 (0,0)、(1,1)、(2,2) → 新中心 = ((0+1+2)/3, (0+1+2)/3) =
(1,1)</li>
</ul></li>
</ul>
<p><strong>Step 4：判断收敛</strong></p>
<ul>
<li>如果<strong>簇中心不再变化</strong>（或变化小于阈值），算法结束；</li>
<li>否则，回到 Step 2 继续迭代。</li>
</ul>
<p>✅ 优点：</p>
<ul>
<li>简单、高效、易于实现；</li>
<li>适合大规模数据（时间复杂度 ≈ O(nKIt)）。</li>
</ul>
<p>❌ 缺点：</p>
<ul>
<li>必须提前知道 K（簇数量）；</li>
<li>对异常值敏感；</li>
<li><strong>只能识别凸形（球状）簇</strong>，无法处理月牙形、环形等。</li>
</ul>
<h4 id="agnesagglomerative-nesting凝聚层次聚类">2. AGNES（Agglomerative
Nesting，凝聚层次聚类）</h4>
<p>✅ 核心思想：</p>
<ul>
<li><strong>自底向上</strong>：开始时每个点自己是一个簇，然后不断<strong>合并最相似的两个簇</strong>，直到只剩一个簇。</li>
<li>用 <strong>树状图（dendrogram）</strong>
展示合并过程，你可以“切一刀”得到任意数量的簇。</li>
</ul>
<p>🔄 算法步骤：</p>
<p><strong>Step 1：初始化</strong></p>
<ul>
<li>将每个数据点视为一个<strong>独立的簇</strong>。共 n 个簇。</li>
</ul>
<p><strong>Step 2：计算簇间距离</strong></p>
<ul>
<li>对每一对簇，计算它们之间的距离。
<ul>
<li>距离定义方式（关键！）：
<ul>
<li><strong>Single
Linkage</strong>：两个簇中<strong>最近两点</strong>的距离；</li>
<li><strong>Complete
Linkage</strong>：两个簇中<strong>最远两点</strong>的距离；</li>
<li><strong>Average
Linkage</strong>：所有点对的<strong>平均距离</strong>。</li>
</ul></li>
</ul></li>
</ul>
<p><strong>Step 3：合并最近的两个簇</strong></p>
<ul>
<li>找到距离最小的两个簇，将它们<strong>合并为一个新簇</strong>。</li>
</ul>
<p><strong>Step 4：更新距离矩阵</strong></p>
<ul>
<li>从距离矩阵中删除这两个旧簇；</li>
<li>添加新簇，并计算它与其他所有簇的距离。</li>
</ul>
<p><strong>Step 5：重复</strong></p>
<ul>
<li>重复 Step
2–4，直到<strong>只剩一个簇</strong>（或达到预设簇数）。</li>
</ul>
<p>🔗 簇间距离定义（关键！）：</p>
<table>
<colgroup>
<col style="width: 22%">
<col style="width: 29%">
<col style="width: 47%">
</colgroup>
<thead>
<tr>
<th>链接方式</th>
<th>定义</th>
<th>特点</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Single Linkage</strong></td>
<td>两个簇中<strong>最近两点</strong>的距离</td>
<td>能识别链状结构（如 Moons），但易受噪声影响</td>
</tr>
<tr>
<td><strong>Complete Linkage</strong></td>
<td>两个簇中<strong>最远两点</strong>的距离</td>
<td>倾向生成大小相近的紧凑簇</td>
</tr>
<tr>
<td><strong>Average Linkage</strong></td>
<td>所有点对的<strong>平均距离</strong></td>
<td>折中方案，较稳健</td>
</tr>
</tbody>
</table>
<p>✅ 优点：</p>
<ul>
<li>不需要预设 K（后期从树状图决定）；</li>
<li>能发现嵌套结构；</li>
<li>可处理非球形簇（尤其 Single Linkage）。</li>
</ul>
<p>❌ 缺点：</p>
<ul>
<li>时间复杂度高（O(n²) 或 O(n³)），不适合大数据；</li>
<li>一旦合并不能撤销（贪心算法）。</li>
</ul>
<h4 id="dbscan基于密度的聚类">3. DBSCAN（基于密度的聚类）</h4>
<p>✅ 核心思想：</p>
<ul>
<li><strong>高密度区域 = 簇，低密度区域 = 噪声</strong>；</li>
<li>不需要指定簇数量；</li>
<li>能发现<strong>任意形状</strong>的簇，并自动识别<strong>离群点</strong>。</li>
</ul>
<p>🔑 两个关键参数：</p>
<ul>
<li><code>eps</code>：邻域半径（多近算邻居？）</li>
<li><code>min_samples</code>：成为核心点所需的最小邻居数（多密才算高密度？）</li>
</ul>
<p>🔄 点的类型：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>定义</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>核心点</strong></td>
<td><code>eps</code>范围内 ≥<code>min_samples</code>个点</td>
</tr>
<tr>
<td><strong>边界点</strong></td>
<td>不是核心点，但在某个核心点的邻域内</td>
</tr>
<tr>
<td><strong>噪声点</strong></td>
<td>既不是核心点，也不被任何核心点覆盖（标记为 -1）</td>
</tr>
</tbody>
</table>
<p>🔄 算法步骤：</p>
<p><strong>Step 1：初始化</strong></p>
<ul>
<li>所有点标记为 <strong>未访问（unvisited）</strong>；</li>
<li>簇编号 <code>cluster_id = 0</code>。</li>
</ul>
<p><strong>Step 2：遍历每个点</strong></p>
<ul>
<li>对每个未访问的点 <code>P</code>：
<ol type="1">
<li>标记 P 为 <strong>已访问</strong>；</li>
<li>找出 P 的 eps 邻域内的所有点（称为 <code>neighbors</code>）；</li>
<li><strong>如果 <code>|neighbors| &lt; MinPts</code></strong>：
<ul>
<li>将 P 标记为 <strong>噪声（noise）</strong>；</li>
<li>继续下一个点；</li>
</ul></li>
<li><strong>否则（P 是核心点）</strong>：
<ul>
<li><code>cluster_id += 1</code>，创建新簇；</li>
<li>将 P 加入新簇；</li>
<li>将 <code>neighbors</code>
中所有点加入一个<strong>种子集合（seeds）</strong>；</li>
<li><strong>扩展簇</strong>：
<ul>
<li>从 seeds 中取出一个点 Q；</li>
<li>如果 Q 未被访问，标记为已访问，并检查其邻域；
<ul>
<li>如果 Q 是核心点，将其邻居加入 seeds；</li>
</ul></li>
<li>将 Q 加入当前簇；</li>
<li>重复直到 seeds 为空。</li>
</ul></li>
</ul></li>
</ol></li>
</ul>
<p><strong>Step 3：输出</strong></p>
<ul>
<li>返回每个点的簇标签（噪声点为 -1）。</li>
</ul>
<p>✅ 优点：</p>
<ul>
<li>不需要 K；</li>
<li>能处理任意形状（月牙、环形等）；</li>
<li>对噪声鲁棒；</li>
<li>一次扫描完成（高效）。</li>
</ul>
<p>❌ 缺点：</p>
<ul>
<li>对 <code>eps</code> 和 <code>min_samples</code> 敏感；</li>
<li>在<strong>密度差异大</strong>的数据上表现差（比如一个密簇 +
一个稀疏簇）；</li>
<li>高维数据中“距离失效”（维度灾难）。</li>
</ul>
<h4 id="轮廓系数">轮廓系数</h4>
<p>轮廓系数（<strong>Silhouette
Coefficient</strong>）是一种<strong>无监督聚类评估指标</strong>，用于衡量聚类结果的“好坏”——它告诉我们：<strong>簇内是否紧密，簇间是否分离</strong>。</p>
<p>它的取值范围是 <strong>[-1, 1]</strong>： - <strong>接近
1</strong>：簇内紧密，簇间远离 → 聚类效果好； - <strong>接近
0</strong>：簇间边界模糊 → 聚类效果一般； - <strong>接近
-1</strong>：样本可能被分错簇 → 聚类效果差。</p>
<p>下面我将<strong>一步步带你理解轮廓系数的计算过程</strong>，并配上<strong>具体数值例子
+ 公式 + Python 验证</strong>。</p>
<p><strong>轮廓系数的定义（对单个样本）</strong></p>
<p>对数据集中的<strong>每一个样本 i</strong>，计算其轮廓系数 $ s(i)
$：</p>
<p><span class="math display">$$
s(i) = \frac{b(i) - a(i)}{\max\{a(i), b(i)\}}
$$</span></p>
<p>其中： - $ a(i) $：样本 i
到<strong>同簇其他点</strong>的<strong>平均距离</strong>（<strong>簇内不相似度</strong>）；
- $ b(i) $：样本 i
到<strong>最近的其他簇</strong>中所有点的<strong>平均距离</strong>的最小值（<strong>最近簇间距离</strong>）。</p>
<blockquote>
<p>💡 直观理解： - $ a(i) $ 越小越好（和自己人很近）； - $ b(i) $
越大越好（离别人很远）； - 所以 $ b(i) - a(i) $ 越大，$ s(i) $ 越接近
1。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/" class="post-title-link" itemprop="url">数据挖掘作业</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-21 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-21T00:00:00+08:00">2025-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-11-17 11:27:41" itemprop="dateModified" datetime="2025-11-17T11:27:41+08:00">2025-11-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/" itemprop="url" rel="index"><span itemprop="name">数据挖掘</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="数据的规范化">数据的规范化</h3>
<ol type="1">
<li><strong>Min-Max 归一化（Normalization）</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br><span class="line"></span><br><span class="line"><span class="comment"># 公式: X_scaled = (X - X_min) / (X_max - X_min)</span></span><br><span class="line">scaler = MinMaxScaler()</span><br><span class="line">X_norm = scaler.fit_transform(X)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>结果范围</strong>：[0, 1]（或可指定其他范围）</li>
<li><strong>保留原始分布形状</strong></li>
<li><strong>对异常值敏感</strong>（因为依赖最大/最小值）</li>
</ul>
<ol start="2" type="1">
<li><strong>Z-score 标准化（Standardization）</strong></li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"></span><br><span class="line"><span class="comment"># 公式: X_scaled = (X - μ) / σ</span></span><br><span class="line">scaler = StandardScaler()</span><br><span class="line">X_std = scaler.fit_transform(X)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>结果</strong>：均值 ≈ 0，标准差 ≈ 1</li>
<li><strong>不保证固定范围</strong>（可能有 -3 到 +3 甚至更大）</li>
<li><strong>对异常值相对稳健</strong></li>
</ul>
<h4 id="robustscaler-鲁棒标准化与z-score-标准化standardization对比"><strong>RobustScaler
(鲁棒标准化)</strong>与Z-score 标准化（Standardization）对比</h4>
<p>StandardScaler (Z-score标准化) <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">公式: (x - 均值) / 标准差</span><br><span class="line"></span><br><span class="line">问题: 均值和标准差都会被异常值严重影响！</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">正常值: [100, 150, 200, 180, 220]  → 均值 = 170</span><br><span class="line">加入异常值: [100, 150, 200, 180, 220, 6445]  → 均值 = 1216 ❌</span><br><span class="line"></span><br><span class="line">结果: 所有正常值都变成负数，异常值主导了整个标准化过程</span><br></pre></td></tr></table></figure> RobustScaler
(鲁棒标准化)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">公式: (x - 中位数) / IQR</span><br><span class="line">其中 IQR = Q3 - Q1 (四分位距)</span><br><span class="line"></span><br><span class="line">优势: 中位数和IQR不受异常值影响！</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line">正常值: [100, 150, 200, 180, 220]  → 中位数 = 180, IQR = 70</span><br><span class="line">加入异常值: [100, 150, 200, 180, 220, 6445]  → 中位数 = 190, IQR = 70 ✅</span><br><span class="line"></span><br><span class="line">结果: 异常值不会扭曲正常数据的标准化结果</span><br></pre></td></tr></table></figure>
<h3 id="apriori算法">Apriori算法</h3>
<p><strong>Apriori 算法</strong> 是一种用于
<strong>频繁项集挖掘（Frequent Itemset Mining）</strong> 和
<strong>关联规则学习（Association Rule Learning）</strong>
的经典算法。</p>
<p>Apriori 基于一个非常重要的性质，叫 <strong>先验性质（Apriori
Property）</strong>：</p>
<blockquote>
<p><strong>如果一个项集是频繁的，那么它的所有子集也一定是频繁的。</strong>
反过来：<strong>如果一个项集是非频繁的，那么它的所有超集也一定是非频繁的。</strong></p>
</blockquote>
<p>这个性质可以用来
<strong>剪枝（prune）</strong>，避免穷举所有可能的组合。</p>
<p>Apriori 的 <strong>候选生成规则</strong>：</p>
<blockquote>
<p>当且仅当它们的前 <strong>(k-1)</strong> 个项相同，两个频繁
k项集才可以连接生成 (k+1)项集。</p>
</blockquote>
<p>剪枝规则只有一句话：</p>
<blockquote>
<p>对候选 k-项集 c，<strong>只要存在</strong>任何一个 (k−1)-子集
<strong>不在</strong> Lₖₖ₋₁ 里， 就把 c
<strong>整集扔掉</strong>，不再给它计数。</p>
</blockquote>
<p>为什么这样做合法？</p>
<p>基于 Apriori
<strong>向下封闭性</strong>（频繁项集的所有子集必频繁）。 若 c
哪怕只有一个 (k−1)-子集是非频繁的，c
自己<strong>绝对不可能频繁</strong>，
所以<strong>没必要浪费一次数据库扫描</strong>去数它的支持度。</p>
<h4 id="例子">例子</h4>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">transactions = [</span><br><span class="line">    [<span class="string">&#x27;牛奶&#x27;</span>, <span class="string">&#x27;面包&#x27;</span>, <span class="string">&#x27;黄油&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;牛奶&#x27;</span>, <span class="string">&#x27;面包&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;牛奶&#x27;</span>, <span class="string">&#x27;可乐&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;面包&#x27;</span>, <span class="string">&#x27;黄油&#x27;</span>],</span><br><span class="line">    [<span class="string">&#x27;牛奶&#x27;</span>, <span class="string">&#x27;面包&#x27;</span>, <span class="string">&#x27;可乐&#x27;</span>],</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>我们的目标是找出
<strong>频繁项集</strong>（比如哪些商品经常一起出现）。</p>
<p><strong>步骤 1：设定最小支持度（min_support）</strong></p>
<p>假设我们设 <code>min_support = 2</code>，意思是：<strong>至少出现在 2
个购物篮中才算“频繁”</strong>。</p>
<blockquote>
<p>支持度（Support） = 包含该项集的交易数 / 总交易数<br>
这里我们直接用“出现次数 ≥ 2”来简化。</p>
</blockquote>
<p><strong>步骤 2：生成 1-项集（单个商品）</strong></p>
<p>统计每个商品出现次数：</p>
<table>
<thead>
<tr>
<th>项集</th>
<th>出现次数</th>
</tr>
</thead>
<tbody>
<tr>
<td>{‘牛奶’}</td>
<td>4</td>
</tr>
<tr>
<td>{‘面包’}</td>
<td>4</td>
</tr>
<tr>
<td>{‘黄油’}</td>
<td>2</td>
</tr>
<tr>
<td>{‘可乐’}</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>全部 ≥2 → 都是频繁 1-项集。</p>
<p><strong>步骤 3：生成 2-项集（两两组合）</strong></p>
<p>从频繁 1-项集中两两组合（注意：只组合那些“所有子集都频繁”的）：</p>
<p>可能的组合： - {‘牛奶’, ‘面包’} - {‘牛奶’, ‘黄油’} - {‘牛奶’, ‘可乐’}
- {‘面包’, ‘黄油’} - {‘面包’, ‘可乐’} - {‘黄油’, ‘可乐’}</p>
<p>现在统计它们在交易中出现的次数：</p>
<table>
<thead>
<tr>
<th>项集</th>
<th>出现次数</th>
</tr>
</thead>
<tbody>
<tr>
<td>{‘牛奶’, ‘面包’}</td>
<td>3 ✅</td>
</tr>
<tr>
<td>{‘牛奶’, ‘黄油’}</td>
<td>1 ❌</td>
</tr>
<tr>
<td>{‘牛奶’, ‘可乐’}</td>
<td>2 ✅</td>
</tr>
<tr>
<td>{‘面包’, ‘黄油’}</td>
<td>2 ✅</td>
</tr>
<tr>
<td>{‘面包’, ‘可乐’}</td>
<td>1 ❌</td>
</tr>
<tr>
<td>{‘黄油’, ‘可乐’}</td>
<td>0 ❌</td>
</tr>
</tbody>
</table>
<p>保留 ≥2 的 → 频繁 2-项集： - {‘牛奶’, ‘面包’} - {‘牛奶’, ‘可乐’} -
{‘面包’, ‘黄油’}</p>
<p><strong>步骤 4：生成 3-项集</strong></p>
<p>从频繁 2-项集中尝试组合。<br>
比如：{‘牛奶’,‘面包’} 和 {‘牛奶’,‘可乐’} → 可以组合成
{‘牛奶’,‘面包’,‘可乐’}<br>
但必须检查它的所有 2-项子集是否都在频繁 2-项集中：</p>
<ul>
<li>子集：{‘牛奶’,‘面包’} ✅<br>
</li>
<li>子集：{‘牛奶’,‘可乐’} ✅<br>
</li>
<li>子集：{‘面包’,‘可乐’} ❌（之前被剪掉了！）</li>
</ul>
<p>→ 所以 <strong>{‘牛奶’,‘面包’,‘可乐’} 不合法</strong>，不能生成。</p>
<p>再试：{‘牛奶’,‘面包’} + {‘面包’,‘黄油’} →
{‘牛奶’,‘面包’,‘黄油’}<br>
检查子集： - {‘牛奶’,‘面包’} ✅ - {‘牛奶’,‘黄油’} ❌（之前只有1次） -
{‘面包’,‘黄油’} ✅</p>
<p>→ 有一个子集不频繁 → 整个 3-项集被剪枝！</p>
<p><strong>结论：没有频繁 3-项集。</strong></p>
<p>算法结束。</p>
<h3 id="fp-growth"><strong>FP-growth</strong></h3>
<p><strong>FP-growth（Frequent Pattern
Growth）算法</strong>，它是一种用于<strong>频繁项集挖掘</strong>的高效算法</p>
<ul>
<li><strong>Apriori
算法</strong>：通过逐层生成候选项集（先1项，再2项…），每次都要扫描整个数据库，效率低。</li>
<li><strong>FP-growth</strong>：<strong>不生成候选项集</strong>，而是构建一种压缩数据结构——<strong>FP树（Frequent
Pattern Tree）</strong>，只需扫描数据库 <strong>2
次</strong>，效率更高！</li>
</ul>
<h4 id="fp-growth-的核心思想分两步"><strong>FP-growth
的核心思想（分两步）</strong></h4>
<p>第一步：构建 FP 树（FP-Tree）</p>
<ol type="1">
<li><strong>第一次扫描</strong>：统计每个单项的支持度，过滤掉低于
min_support 的项。</li>
<li><strong>对每条事务</strong>：
<ul>
<li>只保留频繁项</li>
<li>按支持度<strong>从高到低排序</strong></li>
</ul></li>
<li><strong>第二次扫描</strong>：将排序后的事务插入 FP 树。</li>
</ol>
<p>第二步：从 FP 树中挖掘频繁项集</p>
<ul>
<li>从<strong>支持度最低的频繁项</strong>开始（称为“后缀模式”）</li>
<li>对每个项，找出它的<strong>条件模式基（Conditional Pattern
Base）</strong></li>
<li>构建<strong>条件 FP 树（Conditional FP-Tree）</strong></li>
<li>递归挖掘，直到树为空</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1MtqsYHEZr?spm_id_from=333.788.videopod.episodes&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11&amp;p=18">补充.4
关联_FP算法_哔哩哔哩_bilibili</a></p>
<h3 id="模型评价指标">模型评价指标</h3>
<h3 id="课后第一二次作业">课后第一，二次作业</h3>
<p>考虑表1中的候选3-项集，假设hash函数为h(x)=x mod
4，叶节点最大尺寸为2，构造hash树。</p>
<p><strong>表1. 候选3-项集</strong></p>
<table>
<thead>
<tr>
<th>编号</th>
<th>项集</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>{1, 4, 5}</td>
</tr>
<tr>
<td>2</td>
<td>{1, 5, 9}</td>
</tr>
<tr>
<td>3</td>
<td>{3, 5, 6}</td>
</tr>
<tr>
<td>4</td>
<td>{1, 2, 4}</td>
</tr>
<tr>
<td>5</td>
<td>{1, 3, 6}</td>
</tr>
<tr>
<td>6</td>
<td>{3, 5, 7}</td>
</tr>
<tr>
<td>7</td>
<td>{4, 5, 7}</td>
</tr>
<tr>
<td>8</td>
<td>{2, 3, 4}</td>
</tr>
<tr>
<td>9</td>
<td>{6, 8, 9}</td>
</tr>
<tr>
<td>10</td>
<td>{1, 2, 5}</td>
</tr>
<tr>
<td>11</td>
<td>{5, 6, 7}</td>
</tr>
<tr>
<td>12</td>
<td>{3, 6, 7}</td>
</tr>
<tr>
<td>13</td>
<td>{4, 5, 8}</td>
</tr>
<tr>
<td>14</td>
<td>{3, 4, 5}</td>
</tr>
<tr>
<td>15</td>
<td>{3, 6, 8}</td>
</tr>
</tbody>
</table>
<figure>
<img src="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/IMG_20251027_094247.jpg" alt="IMG_20251027_094247">
<figcaption aria-hidden="true">IMG_20251027_094247</figcaption>
</figure>
<p>事务集如表2所示，<strong>最小支持度阈值是30%</strong>。</p>
<p>根据表2的事务集，在格结构上对每个结点添加所有符合条件的字母标记：</p>
<p><strong>N</strong>：如果该项集被Apriori算法认为不是候选项集。（一个项集不是候选项集有两种可能的原因，一个是它们没有在候选项集产生步骤产生，另一个是它虽然在候选项集产生步骤产生，但是在剪枝步骤被丢掉）</p>
<p><strong>I</strong>：如果计算支持度计数后，该候选项集被认为是非频繁的。</p>
<p><strong>表2. 事务集</strong>：</p>
<table>
<thead>
<tr>
<th>TID</th>
<th>项集</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>{a, b, d, e}</td>
</tr>
<tr>
<td>2</td>
<td>{b, c, d}</td>
</tr>
<tr>
<td>3</td>
<td>{a, b, d, e}</td>
</tr>
<tr>
<td>4</td>
<td>{a, c, d, e}</td>
</tr>
<tr>
<td>5</td>
<td>{b, c, d, e}</td>
</tr>
<tr>
<td>6</td>
<td>{b, d, e}</td>
</tr>
<tr>
<td>7</td>
<td>{c, d}</td>
</tr>
<tr>
<td>8</td>
<td>{a, b, c}</td>
</tr>
<tr>
<td>9</td>
<td>{a, d, e}</td>
</tr>
<tr>
<td>10</td>
<td>{b, d}</td>
</tr>
</tbody>
</table>
<figure>
<img src="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/wps1.png" alt="img">
<figcaption aria-hidden="true">img</figcaption>
</figure>
<figure>
<img src="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/IMG_20251029_160558.jpg" alt="IMG_20251029_160558">
<figcaption aria-hidden="true">IMG_20251029_160558</figcaption>
</figure>
<h4 id="判断极大频繁项集m">判断极大频繁项集（M）</h4>
<p>极大频繁项集：是频繁的，且<strong>没有频繁的真超集</strong>。</p>
<blockquote>
<p><strong>定义</strong>：极大频繁项集（Maximal Frequent
Itemset）是一个频繁项集，其<strong>所有超集都不是频繁的</strong>。</p>
</blockquote>
<p>检查每个频繁项集：</p>
<ul>
<li><strong>ade</strong>：超集有 abde, acde, adde（无效）, bcde
等，但所有 4-项集都不频繁 → 所以 <strong>ade 是极大</strong></li>
<li><strong>bde</strong>：同理，超集如 abde, bcde 都不频繁 → <strong>bde
是极大</strong></li>
<li>其他频繁项集（如 ad）：有超集 ade（频繁）→ 所以 ad
<strong>不是极大</strong></li>
<li>ab：超集 abd（非频繁），abe（非频繁）→ 但 ab
本身频繁，但有没有频繁超集？没有 →
等等！<strong>极大要求：没有频繁的超集</strong>。abd
支持度=2（非频繁），abe=2（非频繁）→ 所以 ab
<strong>没有频繁超集</strong> → 那 ab 是极大？</li>
</ul>
<h4 id="判断闭频繁项集c">判断闭频繁项集（C）</h4>
<p><strong>闭项集</strong>：一个项集 X 是闭的，如果<strong>不存在超集 Y
⊃ X 使得 support(Y) = support(X)</strong>。</p>
<p>即：它的支持度<strong>严格大于</strong>所有超集的支持度（或者没有超集具有相同支持度）。</p>
<p>以单项集为例：</p>
<p>单项集：</p>
<ul>
<li>a (5)：超集 ad(4), ae(4), ab(3), ade(4) → 所有支持度 &lt;5 →
没有超集支持度=5 → <strong>a 是闭</strong></li>
<li>b (7)：超集 bd(6), be(4), ab(3), bde(4) → 都 &lt;7 → <strong>b
是闭</strong></li>
<li>c (5)：超集 bc(3), cd(4) → 都 &lt;5 → <strong>c 是闭</strong></li>
<li>d (9)：超集 ad(4), bd(6), cd(4), de(6), ade(4), bde(4) → 都 &lt;9 →
<strong>d 是闭</strong></li>
<li>e (6)：超集 ae(4), be(4), de(6) → 注意：<strong>de 支持度=6，等于 e
的支持度！</strong>
<ul>
<li>e ⊂ de，且 support(e)=support(de)=6 → 所以 <strong>e
不是闭</strong></li>
</ul></li>
</ul>
<h3 id="课后第三次作业">课后第三次作业</h3>
<p>假设最小支持度阈值为40%，基于以下事务集写出使用FP-growth挖掘频繁项集的过程。</p>
<p>表1. 事务集</p>
<table>
<thead>
<tr>
<th>TID</th>
<th>项集</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>{a,b,d,e}</td>
</tr>
<tr>
<td>2</td>
<td>{b,c,d}</td>
</tr>
<tr>
<td>3</td>
<td>{a,b,d,e}</td>
</tr>
<tr>
<td>4</td>
<td>{a,c,d,e}</td>
</tr>
<tr>
<td>5</td>
<td>{b,c,d,e}</td>
</tr>
</tbody>
</table>
<figure>
<img src="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/image-20251117112729200.png" alt="image-20251117112729200">
<figcaption aria-hidden="true">image-20251117112729200</figcaption>
</figure>
<figure>
<img src="/2025/09/21/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98/%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98%E4%BD%9C%E4%B8%9A/image-20251117112739932.png" alt="image-20251117112739932">
<figcaption aria-hidden="true">image-20251117112739932</figcaption>
</figure>
<p>条件 FP 树（Conditional FP-tree）是 FP-growth
算法在“递归”阶段用来压缩“条件模式基”的一棵小 FP 树。 它的构建过程与初始
FP
树几乎一样，只是输入数据换成了“条件模式基”，并且再扫一遍、删低计数、排序、插入即可。下面用
<strong>“以 e 为后缀”</strong>
的例子把每一步都写出来，你就能完全复现。</p>
<p><strong>一、准备：条件模式基（Conditional Pattern Base）</strong></p>
<p>从主 FP 树里提取所有<strong>以 e
结尾</strong>的路径，并记录该路径的出现次数：</p>
<table>
<thead>
<tr>
<th style="text-align: left;">路径（删去 e 本身）</th>
<th style="text-align: left;">该路径计数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">d b a</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">d a c</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">d b c</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<p>这就是“e 的条件模式基”。</p>
<p><strong>二、第一次扫描：算单项计数</strong></p>
<p>把上面 3 条记录拆成单项累加：</p>
<ul>
<li>d: 2+1+1 = 4</li>
<li>b: 2+0+1 = 3</li>
<li>a: 2+1+0 = 3</li>
<li>c: 0+1+1 = 2</li>
</ul>
<p>最小支持度计数仍是 2，因此<strong>全部保留</strong>（若某项 &lt;2
则直接丢弃）。</p>
<p><strong>三、第二次扫描：排序 + 插入</strong></p>
<ol type="1">
<li>排序规则：按<strong>全局频繁 1-项集</strong>的降序排（即
d≻b≻a≻c≻e）。 因此每条记录内部重新排序：</li>
</ol>
<table>
<thead>
<tr>
<th style="text-align: left;">原路径</th>
<th style="text-align: left;">排序后路径</th>
<th style="text-align: left;">计数</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">d b a</td>
<td style="text-align: left;">d b a</td>
<td style="text-align: left;">2</td>
</tr>
<tr>
<td style="text-align: left;">d a c</td>
<td style="text-align: left;">d a c</td>
<td style="text-align: left;">1</td>
</tr>
<tr>
<td style="text-align: left;">d b c</td>
<td style="text-align: left;">d b c</td>
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>
<ol type="1">
<li>逐条插入，构建“e 的条件 FP 树”：</li>
</ol>
<ul>
<li>插入 <code>d b a</code>（计数 2） 根 → d(2) → b(2) → a(2)</li>
<li>插入 <code>d a c</code>（计数 1） 根 → d(3) → a(1) → c(1)</li>
<li>插入 <code>d b c</code>（计数 1） 根 → d(4) → b(3) → c(1)</li>
</ul>
<p>最终得到的<strong>条件 FP 树</strong>文字表示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">null</span><br><span class="line">└── d(4)</span><br><span class="line">    ├── b(3)</span><br><span class="line">    │   ├── a(2)</span><br><span class="line">    │   └── c(1)</span><br><span class="line">    └── a(1)</span><br><span class="line">        └── c(1)</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%88%9D%E8%AF%86Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E5%88%9D%E8%AF%86Linux/" class="post-title-link" itemprop="url">linux作业</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-18 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-18T00:00:00+08:00">2025-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-09-30 16:33:07" itemprop="dateModified" datetime="2025-09-30T16:33:07+08:00">2025-09-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="用户和权限管理">用户和权限管理</h3>
<h4 id="创建四个系统用户">创建四个系统用户</h4>
<p>为系统添加以下四个用户：</p>
<ul>
<li><code>alice</code></li>
<li><code>bob</code></li>
<li><code>john</code></li>
<li><code>mike</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd -d /home/bob -m bob</span><br><span class="line">useradd -d /home/john -m john</span><br><span class="line">useradd -d /home/mike -m mike</span><br></pre></td></tr></table></figure>
<h4 id="为四个用户设置密码">为四个用户设置密码</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">passwd alice</span><br><span class="line">passwd bob</span><br><span class="line">passwd john</span><br><span class="line">passwd mike</span><br></pre></td></tr></table></figure>
<h4 id="创建共享目录">创建共享目录</h4>
<p>在 <code>/home</code> 目录下创建一个名为 <code>work</code>
的共享目录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /home/work</span><br></pre></td></tr></table></figure>
<h4 id="创建用户组并添加成员">创建用户组并添加成员</h4>
<p>创建一个名为 <code>workgroup</code> 的用户组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd workgroup</span><br></pre></td></tr></table></figure>
<p>将用户 <code>alice</code>, <code>bob</code>, <code>john</code>
加入该组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">usermod -a -G workgroup alice   # 添加为附加组</span><br><span class="line">usermod -g workgroup alice       # 设置为 alice 的主组（primary group）</span><br><span class="line">usermod -a -G workgroup bob</span><br><span class="line">usermod -a -G workgroup john</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>主组（Primary
Group）</strong>：每个用户<strong>有且只有一个</strong>，是用户创建文件时<strong>默认继承的组</strong>。</li>
<li><strong>附加组（Supplementary
Group）</strong>：用户可以有<strong>多个</strong>，用于<strong>额外获得某些组的权限</strong>，但<strong>不会影响新建文件的默认组</strong>。</li>
</ul>
<p>查看某个<strong>组（group）的信息</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getent group workgroup</span><br></pre></td></tr></table></figure>
<h4 id="修改共享目录的所有权">修改共享目录的所有权</h4>
<p>将 <code>/home/work</code> 目录的属主改为
<code>alice</code>，属组改为 <code>workgroup</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown alice:workgroup /home/work</span><br></pre></td></tr></table></figure>
<h4 id="修改-work-目录的权限">修改 work 目录的权限</h4>
<ul>
<li>属组内的用户（workgroup 组成员）→ 完全访问权限（rwx）</li>
<li>属组外的用户 → 没有访问权限（—）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod ug+rwx,o-rwx /home/work</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ug+rwx</code>：用户（user）和组（group）都加上读、写、执行权限</li>
<li><code>o-rwx</code>：其他人（others）去掉所有权限（读、写、执行）</li>
</ul>
<h4 id="尝试以-bob-用户身份在-work-目录下创建文件">尝试以 bob 用户身份在
work 目录下创建文件</h4>
<p>切换到 bob 用户：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su - bob</span><br></pre></td></tr></table></figure>
<p>创建文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch /home/work/bob.txt</span><br></pre></td></tr></table></figure>
<p>查看是否成功：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /home/work/bob.txt</span><br></pre></td></tr></table></figure>
<h4 id="尝试以-john-的身份查看或修改-bob.txt">尝试以 john
的身份查看或修改 bob.txt</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su - john</span><br><span class="line">cat /home/work/bob.txt  #查看文件内容</span><br><span class="line">echo &quot;hello&quot; &gt;&gt; /home/work/bob.txt</span><br><span class="line">ls -l /home/work/bob.txt   #查看权限</span><br></pre></td></tr></table></figure>
<h4 id="尝试以-mike-的身份查看或修改-bob.txt">尝试以 mike
的身份查看或修改 bob.txt</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">su - mike</span><br><span class="line">cat /home/work/bob.txt</span><br><span class="line">echo &quot;mike tried&quot; &gt;&gt; /home/work/bob.txt</span><br><span class="line">cd /home/work</span><br></pre></td></tr></table></figure>
<h3 id="进程管理与调试">进程管理与调试</h3>
<h4 id="编写-badproc.sh-脚本">编写 <code>badproc.sh</code> 脚本</h4>
<p><strong>Shell 程序（Shell Script）</strong> 就是一系列 <strong>Shell
命令的集合</strong>，写在一个文件里，可以像程序一样<strong>自动、批量、重复执行</strong>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">while echo &quot;I&#x27;m making files!&quot;</span><br><span class="line">do</span><br><span class="line">    mkdir adir</span><br><span class="line">    cd adir</span><br><span class="line">    touch afile</span><br><span class="line">    sleep 10s</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p><code>#!/bin/bash</code> → 指定用 bash 解释器执行</p>
<p><code>while echo "..."</code> →
<strong>无限循环</strong>，每次循环前先打印一句话（等价于
<code>while true; do ... done</code>）</p>
<p>循环体内：</p>
<ul>
<li>创建目录 <code>adir</code></li>
<li>进入该目录</li>
<li>创建文件 <code>afile</code></li>
<li>睡眠 10 秒 → 避免太快占满磁盘</li>
</ul>
<h4 id="添加可执行权限">添加可执行权限</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod +x badproc.sh</span><br><span class="line">#验证</span><br><span class="line">ls -l badproc.sh</span><br></pre></td></tr></table></figure>
<h4 id="在后台运行脚本">在后台运行脚本</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./badproc.sh &amp;</span><br></pre></td></tr></table></figure>
<h4 id="查看进程号">查看进程号</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps aux | grep badproc</span><br></pre></td></tr></table></figure>
<h4 id="杀死进程">杀死进程</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill 12345</span><br></pre></td></tr></table></figure>
<h4 id="删除脚本运行时创建的目录和文件">删除脚本运行时创建的目录和文件</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf adir</span><br></pre></td></tr></table></figure>
<h4 id="创建源文件-fork.c">创建源文件 <code>fork.c</code></h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;unistd.h&gt;</span><br><span class="line">#include &lt;sys/types.h&gt;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    pid_t pid;</span><br><span class="line"></span><br><span class="line">    /* fork another process */</span><br><span class="line">    pid = fork();</span><br><span class="line">    if (pid &lt; 0) &#123; /* error occurred */</span><br><span class="line">        fprintf(stderr, &quot;Fork Failed\n&quot;);</span><br><span class="line">        exit(-1);</span><br><span class="line">    &#125;</span><br><span class="line">    else if (pid == 0) &#123; /* child process */</span><br><span class="line">        printf(&quot;This is child process, pid=%d\n&quot;, getpid());</span><br><span class="line">        execl(&quot;/bin/ls&quot;, &quot;ls&quot;, NULL);  // 执行 ls 命令</span><br><span class="line">        printf(&quot;Child process finished\n&quot;); // 这句不会打印，除非 execl 失败</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123; /* parent process */</span><br><span class="line">        printf(&quot;This is parent process, pid=%d\n&quot;, getpid());</span><br><span class="line">        wait(NULL);  // 等待子进程结束</span><br><span class="line">        printf(&quot;Child Complete\n&quot;);</span><br><span class="line">        exit(0);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="编译程序带调试信息">编译程序（带调试信息）</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -g -o fork fork.c</span><br></pre></td></tr></table></figure>
<h4 id="先运行一次看看效果">先运行一次，看看效果</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./fork</span><br></pre></td></tr></table></figure>
<h4 id="用-gdb-调试-fork-程序">用 <code>gdb</code> 调试 fork 程序</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gdb ./fork</span><br><span class="line">#在 fork() 调用前设置</span><br><span class="line">(gdb) set follow-fork-mode child</span><br><span class="line">#设置断点和 catch exec</span><br><span class="line">break main</span><br><span class="line">catch exec</span><br></pre></td></tr></table></figure>
<h3 id="linux编程环境熟悉">Linux编程环境熟悉</h3>
<h4 id="c编译">C++编译</h4>
<p>创建一个名为 <code>helloworld.cpp</code>
的文件，<code>nano helloworld.cpp</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">int main(void)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; &quot;Hello world&quot; &lt;&lt; endl;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>按 <code>Ctrl+O</code> 保存，再按 <code>Ctrl+X</code> 退出 nano</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#编译程序</span><br><span class="line">g++ -o hello helloworld.cpp</span><br><span class="line">#运行程序</span><br><span class="line">./hello</span><br></pre></td></tr></table></figure>
<h4 id="创建小型函数库"><strong>创建小型函数库</strong></h4>
<p>创建源文件 <code>fred.c</code> 和 <code>bill.c</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/* fred.c */</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">void fred(int arg)</span><br><span class="line">&#123;</span><br><span class="line">    printf(&quot;fred: we passed %d\n&quot;, arg);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* bill.c */</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">void bill(char *arg)</span><br><span class="line">&#123;</span><br><span class="line">    printf(&quot;bill: we passed %s\n&quot;, arg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译成目标文件（.o）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -c bill.c fred.c</span><br></pre></td></tr></table></figure>
<p>创建头文件 <code>lib.h</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/* lib.h */</span><br><span class="line">void bill(char *);</span><br><span class="line">void fred(int);</span><br></pre></td></tr></table></figure>
<p>创建主程序 <code>program.c</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* program.c */</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &quot;lib.h&quot;   // 引入我们自己写的头文件</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    bill(&quot;Hello World&quot;);</span><br><span class="line">    exit(0);       // 正常退出</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编译主程序（只编译，不链接）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -c program.c</span><br></pre></td></tr></table></figure>
<p>创建静态库 <code>libfoo.a</code></p>
<p>使用 <code>ar</code> 命令把 <code>bill.o</code> 和
<code>fred.o</code> 打包成一个静态库：</p>
<ul>
<li><code>ar</code>：archive 工具，用于创建静态库</li>
<li><code>c</code>：创建新库</li>
<li><code>r</code>：将文件插入到库中（如果不存在则添加）</li>
<li><code>v</code>：显示详细信息</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ar crv libfoo.a bill.o fred.o</span><br></pre></td></tr></table></figure>
<p>链接主程序和静态库</p>
<p>现在我们要把 <code>program.o</code> 和 <code>libfoo.a</code>
链接起来，生成最终可执行文件 <code>program</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o program program.o libfoo.a</span><br></pre></td></tr></table></figure>
<p>运行程序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./program</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="张熙浚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/" class="post-title-link" itemprop="url">操作系统作业</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-09-18 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-18T00:00:00+08:00">2025-09-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-11-18 09:51:17" itemprop="dateModified" datetime="2025-11-18T09:51:17+08:00">2025-11-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/" itemprop="url" rel="index"><span itemprop="name">大三上</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="作业一">作业一</h3>
<h4 id="section">1</h4>
<p><strong>题目：</strong></p>
<p>在某个计算机系统中有一台输入机和一台打印机，现有两道程序投入运行，且程序A先运行，程序B后开始运行。</p>
<ul>
<li><p><strong>程序A</strong>的运行轨迹为：<br>
计算50ms，打印100ms，再计算50ms，打印100ms。</p></li>
<li><p><strong>程序B</strong>的运行轨迹为：<br>
计算50ms，输入80ms，再计算100ms，结束。</p></li>
</ul>
<p><strong>问题：</strong></p>
<ol type="1">
<li><p>两道程序运行时，CPU是否空闲等待？____（有空闲等待 /
无空闲等待）<br>
若有，在哪段时间内等待？_<strong>ms -
</strong>_ms（两个空，第一个填起始时间，第二个填结束时间，仅数字）</p></li>
<li><p>程序A，B是否有等待CPU的情况？<br>
A：<strong><em>（有等待 / 无等待）<br>
B：</em></strong>（有等待 / 无等待）<br>
若有，指出发生等待的时刻（若无等待，空格填0）<br>
（若有两段以上等待时间，用“/”标表示不同等待时间，如0/30和20/40表示0ms-20ms是第一段空闲；30ms-40ms是第二段空闲）<br>
A：_<strong>ms - </strong>_ms<br>
B：___ms - ___ms</p></li>
</ol>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20250917_090110.jpg" alt="IMG_20250917_090110">
<figcaption aria-hidden="true">IMG_20250917_090110</figcaption>
</figure>
<h4 id="section-1">2</h4>
<p><strong>题目：</strong></p>
<p>在单CPU和两台I/O设备（I1和I2）的多道程序设计环境下，同时投入三个作业运行，其执行轨迹如下：</p>
<ul>
<li><strong>Job1</strong>：I2（30ms），CPU（10ms），I1（30ms），CPU（10ms）</li>
<li><strong>Job2</strong>：I1（20ms），CPU（20ms），I2（40ms）</li>
<li><strong>Job3</strong>：CPU（30ms），I1（20ms）</li>
</ul>
<p><strong>已知条件：</strong></p>
<ul>
<li>CPU、I1、I2可以并行工作；</li>
<li>优先级从高到低依次为：Job1、Job2、Job3；</li>
<li>优先级高的作业可以抢占优先级低的作业（抢占式调度）；</li>
<li>所有作业同时投入运行。</li>
</ul>
<p><strong>问题：</strong></p>
<ol type="1">
<li>每个作业从投入到完成分别所需的时间。
<ul>
<li>Job1：____ ms</li>
<li>Job2：____ ms</li>
<li>Job3：____ ms</li>
</ul></li>
<li>从作业投入到完成，CPU的利用率是：
<ul>
<li>____ / ____ = ____%（保留小数点后两位）</li>
</ul></li>
<li>I/O设备利用率：
<ul>
<li>I1 利用率：____ / ____ = ____%（保留小数点后两位）</li>
<li>I2 利用率：____ / ____ = ____%（保留小数点后两位）</li>
</ul></li>
</ol>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20250917_090158.jpg" alt="IMG_20250917_090158">
<figcaption aria-hidden="true">IMG_20250917_090158</figcaption>
</figure>
<h4 id="section-2">3</h4>
<p><strong>题目：</strong></p>
<p>在单机系统中，有同时到达的两个程序A、B，若每个程序单独运行，则使用CPU，DEV1（设备1）、DEV2（设备2）的顺序和时间如下表所示。</p>
<table>
<thead>
<tr>
<th>运行情况</th>
<th>程序A</th>
<th>程序B</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>25</td>
<td>20</td>
</tr>
<tr>
<td>DEV1</td>
<td>39</td>
<td>50</td>
</tr>
<tr>
<td>CPU</td>
<td>20</td>
<td>20</td>
</tr>
<tr>
<td>DEV2</td>
<td>20</td>
<td>20</td>
</tr>
<tr>
<td>CPU</td>
<td>20</td>
<td>10</td>
</tr>
<tr>
<td>DEV1</td>
<td>30</td>
<td>20</td>
</tr>
<tr>
<td>CPU</td>
<td>20</td>
<td>45</td>
</tr>
</tbody>
</table>
<p><strong>给定条件：</strong></p>
<ol type="1">
<li>DEV1和DEV2是不同的I/O设备，它们能够同时工作。</li>
<li>程序B优先级高于程序A，<strong>非抢占式</strong>。当程序A占用CPU时，即使程序B需要使用CPU，也不能打断程序A的执行，而应等待。</li>
<li>当使用CPU之后控制转向I/O设备，或者使用I/O设备之后控制转向CPU，由控制程序执行中断处理，但这段处理时间可以忽略不计。</li>
</ol>
<p><strong>问题：</strong></p>
<ol type="1">
<li>哪个程序先结束？（A / B）</li>
<li>程序全部执行结束需要多少时间？（____ ms）</li>
<li>程序全部执行完毕时，CPU利用率是多少？（____%）</li>
<li>A程序等待CPU的累积时间是多少？（____ ms）</li>
<li>B程序等待CPU的累积时间是多少？（____ ms）</li>
</ol>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20250917_090145.jpg" alt="IMG_20250917_090145">
<figcaption aria-hidden="true">IMG_20250917_090145</figcaption>
</figure>
<h3 id="作业二">作业二</h3>
<h4 id="section-3">1</h4>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251010094314155.png" alt="image-20251010094314155">
<figcaption aria-hidden="true">image-20251010094314155</figcaption>
</figure>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20251010_101637.jpg" alt="IMG_20251010_101637">
<figcaption aria-hidden="true">IMG_20251010_101637</figcaption>
</figure>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20251010_101643.jpg" alt="IMG_20251010_101643">
<figcaption aria-hidden="true">IMG_20251010_101643</figcaption>
</figure>
<h4 id="section-4">2</h4>
<p><img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251010102104414.png" alt="image-20251010102104414">3.</p>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20251010_103349.jpg" alt="IMG_20251010_103349">
<figcaption aria-hidden="true">IMG_20251010_103349</figcaption>
</figure>
<h4 id="section-5">3</h4>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251010110615738.png" alt="image-20251010110615738">
<figcaption aria-hidden="true">image-20251010110615738</figcaption>
</figure>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/IMG_20251010_110541.jpg" alt="IMG_20251010_110541">
<figcaption aria-hidden="true">IMG_20251010_110541</figcaption>
</figure>
<h3 id="作业三">作业三</h3>
<h4 id="section-6">1</h4>
<p>有一个盒子里混装了数量相等的黑白围棋子，现在利用自动分拣系统把黑子、白子分开，设分拣系统有两个进程P1和P2，其中进程P1拣白子，进程P2拣黑子。规定每个进程每次拣一子；当一个进程在拣时，不允许另一个进程去拣；当一个进程拣了一子时，必须让另一个进程去拣。试写出进程P1和P2能够正确并发执行的程序。</p>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251111211928061.png" alt="image-20251111211928061">
<figcaption aria-hidden="true">image-20251111211928061</figcaption>
</figure>
<h4 id="section-7">2</h4>
<p>请用信号量和PV操作解决以下问题：桌上有一只盘子，最多可以容纳两个水果，每次仅能放入或取出一个水果。爸爸专向盘子中放苹果(apple)，妈妈专向盘子中放橘子(orange)，两个儿子专等吃盘子中的桔子，两个女儿专等吃盘子里的苹果。写出爸爸（father）、妈妈（mother）、儿子（son）和女儿（daughter）进程及所需定义的变量和信号量。用PV操作实现爸爸、妈妈、儿子、女儿间的同步与互斥关系。</p>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251111211937533.png" alt="image-20251111211937533">
<figcaption aria-hidden="true">image-20251111211937533</figcaption>
</figure>
<h4 id="section-8">3</h4>
<p>设当前的系统状态如下，此时Available=(1,1,2)</p>
<table>
<colgroup>
<col style="width: 5%">
<col style="width: 26%">
<col style="width: 34%">
<col style="width: 32%">
</colgroup>
<thead>
<tr>
<th style="text-align: left;">进程</th>
<th style="text-align: left;">Claim (R1, R2, R3)</th>
<th style="text-align: left;">Allocation (R1, R2, R3)</th>
<th style="text-align: left;">Available (R1, R2, R3)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">P1</td>
<td style="text-align: left;">3, 2, 2</td>
<td style="text-align: left;">1, 0, 0</td>
<td style="text-align: left;">1, 1, 2</td>
</tr>
<tr>
<td style="text-align: left;">P2</td>
<td style="text-align: left;">6, 1, 3</td>
<td style="text-align: left;">5, 1, 1</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">P3</td>
<td style="text-align: left;">3, 1, 4</td>
<td style="text-align: left;">2, 1, 1</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">P4</td>
<td style="text-align: left;">4, 2, 2</td>
<td style="text-align: left;">0, 0, 2</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<figure>
<img src="/2025/09/18/college/%E5%A4%A7%E4%B8%89%E4%B8%8A/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A/image-20251111211949933.png" alt="image-20251111211949933">
<figcaption aria-hidden="true">image-20251111211949933</figcaption>
</figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">张熙浚</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="本站访问数 fa fa-user 次"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="本站总访问量 fa fa-eye 次"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="400" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
