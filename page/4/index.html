<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-bounce.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":true,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="zxj Blogs">
<meta property="og:type" content="website">
<meta property="og:title" content="Zhang XiJun">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="Zhang XiJun">
<meta property="og:description" content="zxj Blogs">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="å¼ ç†™æµš">
<meta property="article:tag" content="zxj">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/4/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/4/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Zhang XiJun</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Zhang XiJun</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">BLOGS</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="æœç´¢..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="å¼ ç†™æµš"
      src="/images/zxjavatar.gif">
  <p class="site-author-name" itemprop="name">å¼ ç†™æµš</p>
  <div class="site-description" itemprop="description">zxj Blogs</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">166</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">60</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">61</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/zxj-2023" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;zxj-2023" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://wpa.qq.com/msgrd?v=3&uin=2902065320&site=qq&menu=yes" title="QQ â†’ http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;2902065320&amp;site&#x3D;qq&amp;menu&#x3D;yes" rel="noopener me" target="_blank"><i class="fab fa-qq fa-fw"></i>QQ</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          é“¾æ¥
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://zxj-2023.github.io/" title="https:&#x2F;&#x2F;zxj-2023.github.io" rel="noopener" target="_blank">Zhang XiJun</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://theme-next.js.org/" title="https:&#x2F;&#x2F;theme-next.js.org" rel="noopener" target="_blank">NexT</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/08/%E5%AD%A6%E4%B9%A0/python-web/milvus/milvus/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/08/%E5%AD%A6%E4%B9%A0/python-web/milvus/milvus/" class="post-title-link" itemprop="url">milvus</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-09-08 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-08T00:00:00+08:00">2025-09-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-09-20 19:28:13" itemprop="dateModified" datetime="2025-09-20T19:28:13+08:00">2025-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python-web/" itemprop="url" rel="index"><span itemprop="name">python-web</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python-web/milvus/" itemprop="url" rel="index"><span itemprop="name">milvus</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨milvus">ä¸ºä»€ä¹ˆä½¿ç”¨milvus</h3>
<p>éç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ã€å›¾åƒå’ŒéŸ³é¢‘ï¼‰æ ¼å¼å„å¼‚ï¼Œè•´å«ä¸°å¯Œçš„æ½œåœ¨è¯­ä¹‰ï¼Œå› æ­¤åˆ†æèµ·æ¥æå…·æŒ‘æˆ˜æ€§ã€‚ä¸ºäº†å¤„ç†è¿™ç§å¤æ‚æ€§ï¼ŒEmbeddings
è¢«ç”¨æ¥å°†éç»“æ„åŒ–æ•°æ®è½¬æ¢æˆèƒ½å¤Ÿæ•æ‰å…¶åŸºæœ¬ç‰¹å¾çš„æ•°å­—å‘é‡ã€‚ç„¶åå°†è¿™äº›å‘é‡å­˜å‚¨åœ¨å‘é‡æ•°æ®åº“ä¸­ï¼Œä»è€Œå®ç°å¿«é€Ÿã€å¯æ‰©å±•çš„æœç´¢å’Œåˆ†æã€‚</p>
<p>Milvus
æä¾›å¼ºå¤§çš„æ•°æ®å»ºæ¨¡åŠŸèƒ½ï¼Œä½¿æ‚¨èƒ½å¤Ÿå°†éç»“æ„åŒ–æˆ–å¤šæ¨¡å¼æ•°æ®ç»„ç»‡æˆç»“æ„åŒ–çš„
Collectionsã€‚å®ƒæ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼Œé€‚ç”¨äºä¸åŒçš„å±æ€§æ¨¡å‹ï¼ŒåŒ…æ‹¬å¸¸è§çš„æ•°å­—å’Œå­—ç¬¦ç±»å‹ã€å„ç§å‘é‡ç±»å‹ã€æ•°ç»„ã€é›†åˆå’Œ
JSONï¼Œä¸ºæ‚¨èŠ‚çœäº†ç»´æŠ¤å¤šä¸ªæ•°æ®åº“ç³»ç»Ÿçš„ç²¾åŠ›ã€‚</p>
<figure>
<img src="/2025/09/08/%E5%AD%A6%E4%B9%A0/python-web/milvus/milvus/image-20250908091053654.png" alt="image-20250908091053654">
<figcaption aria-hidden="true">image-20250908091053654</figcaption>
</figure>
<h3 id="éƒ¨ç½²windows">éƒ¨ç½²ï¼ˆwindowsï¼‰</h3>
<p><a target="_blank" rel="noopener" href="https://milvus.io/docs/zh/install_standalone-windows.md">åœ¨
Dockerï¼ˆLinuxï¼‰ä¸­è¿è¡Œ Milvus | Milvus æ–‡æ¡£</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Download the configuration file and rename it as docker-compose.yml</span><br><span class="line">C:\&gt;Invoke-WebRequest https://github.com/milvus-io/milvus/releases/download/v2.6.0/milvus-standalone-docker-compose.yml -OutFile docker-compose.yml</span><br><span class="line"></span><br><span class="line"># Start Milvus</span><br><span class="line">C:\&gt;docker compose up -d</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è®¾ç½®ç¯å¢ƒå˜é‡DOCKER_VOLUME_DIRECTORYæ¥å†³å®šå·æ˜ å°„çš„è·¯å¾„</p>
<table>
<colgroup>
<col style="width: 7%">
<col style="width: 31%">
<col style="width: 14%">
<col style="width: 46%">
</colgroup>
<thead>
<tr>
<th>å®¹å™¨</th>
<th>é•œåƒ</th>
<th>åœ¨ Milvus ä¸­çš„è§’è‰²</th>
<th>ä¸€å¥è¯è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>etcd</td>
<td>quay.io/coreos/etcd:v3.5.18</td>
<td>å…ƒæ•°æ®ä¸åè°ƒä¸­å¿ƒ</td>
<td>è´Ÿè´£â€œè®°å¸â€â€”â€”å­˜ç´¢å¼•ç»“æ„ã€é›†åˆä¿¡æ¯ã€èŠ‚ç‚¹å¿ƒè·³ç­‰ï¼Œç›¸å½“äº Milvus
çš„â€œå¤§è„‘å¤‡å¿˜å½•â€ã€‚</td>
</tr>
<tr>
<td>minio</td>
<td>minio/minio:RELEASE.2024-12-18T13-15-44Z</td>
<td>å¯¹è±¡å­˜å‚¨</td>
<td>è´Ÿè´£â€œå­˜æ–‡ä»¶â€â€”â€”æŠŠå‘é‡ç´¢å¼•æ–‡ä»¶ã€å¤§å­—æ®µã€æ—¥å¿—å¿«ç…§ç­‰è½åœ°æˆå¯¹è±¡ï¼Œç›¸å½“äº
Milvus çš„â€œç¡¬ç›˜â€ã€‚</td>
</tr>
<tr>
<td>standalone</td>
<td>milvusdb/milvus:v2.6.0</td>
<td>è®¡ç®—èŠ‚ç‚¹ï¼ˆå•æœºç‰ˆï¼‰</td>
<td>è´Ÿè´£â€œå¹²æ´»â€â€”â€”æ¥å— SDK è¯·æ±‚ã€åšå‘é‡æ£€ç´¢ã€æ„å»ºç´¢å¼•ï¼Œç›¸å½“äº Milvus
çš„â€œå·¥äººâ€ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="å®‰è£…">å®‰è£…</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U pymilvus</span><br></pre></td></tr></table></figure>
<h3 id="åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</h3>
<h4 id="æ•°æ®åº“">æ•°æ®åº“</h4>
<p>åœ¨ Milvus
ä¸­ï¼Œæ•°æ®åº“æ˜¯ç»„ç»‡å’Œç®¡ç†æ•°æ®çš„é€»è¾‘å•å…ƒã€‚ä¸ºäº†æé«˜æ•°æ®å®‰å…¨æ€§å¹¶å®ç°å¤šç§Ÿæˆ·ï¼Œä½ å¯ä»¥åˆ›å»ºå¤šä¸ªæ•°æ®åº“ï¼Œä¸ºä¸åŒçš„åº”ç”¨ç¨‹åºæˆ–ç§Ÿæˆ·ä»é€»è¾‘ä¸Šéš”ç¦»æ•°æ®ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®åº“ç”¨äºå­˜å‚¨ç”¨æˆ·
A çš„æ•°æ®ï¼Œå¦ä¸€ä¸ªæ•°æ®åº“ç”¨äºå­˜å‚¨ç”¨æˆ· B çš„æ•°æ®ã€‚</p>
<h4 id="collections">collections</h4>
<p>åœ¨ Milvus ä¸Šï¼Œæ‚¨å¯ä»¥åˆ›å»ºå¤šä¸ª Collections
æ¥ç®¡ç†æ•°æ®ï¼Œå¹¶å°†æ•°æ®ä½œä¸ºå®ä½“æ’å…¥åˆ° Collections ä¸­ã€‚Collections
å’Œå®ä½“<strong>ç±»ä¼¼äºå…³ç³»æ•°æ®åº“ä¸­çš„è¡¨å’Œè®°å½•</strong>ã€‚</p>
<p>Collection
æ˜¯ä¸€ä¸ªäºŒç»´è¡¨ï¼Œå…·æœ‰å›ºå®šçš„åˆ—å’Œå˜åŒ–çš„è¡Œã€‚æ¯åˆ—ä»£è¡¨ä¸€ä¸ªå­—æ®µï¼Œæ¯è¡Œä»£è¡¨ä¸€ä¸ªå®ä½“ã€‚</p>
<p>ä¸‹å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªæœ‰ 8 åˆ—å’Œ 6 ä¸ªå®ä½“çš„ Collectionã€‚</p>
<figure>
<img src="/2025/09/08/%E5%AD%A6%E4%B9%A0/python-web/milvus/milvus/image-20250908094418551.png" alt="image-20250908094418551">
<figcaption aria-hidden="true">image-20250908094418551</figcaption>
</figure>
<h4 id="schema">schema</h4>
<p>Schema å®šä¹‰äº† Collections çš„æ•°æ®ç»“æ„ã€‚åœ¨åˆ›å»ºä¸€ä¸ª Collection
ä¹‹å‰ï¼Œä½ éœ€è¦è®¾è®¡å‡ºå®ƒçš„ Schemaã€‚</p>
<p>è®¾è®¡è‰¯å¥½çš„ Schema
è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒæŠ½è±¡äº†æ•°æ®æ¨¡å‹ï¼Œå¹¶å†³å®šèƒ½å¦é€šè¿‡æœç´¢å®ç°ä¸šåŠ¡ç›®æ ‡ã€‚æ­¤å¤–ï¼Œç”±äºæ’å…¥
Collections çš„æ¯ä¸€è¡Œæ•°æ®éƒ½å¿…é¡»éµå¾ª
Schemaï¼Œå› æ­¤æœ‰åŠ©äºä¿æŒæ•°æ®çš„ä¸€è‡´æ€§å’Œé•¿æœŸè´¨é‡ã€‚ä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œå®šä¹‰æ˜ç¡®çš„
Schema
ä¼šå¸¦æ¥ç»„ç»‡è‰¯å¥½çš„åˆ—æ•°æ®å­˜å‚¨å’Œæ›´ç®€æ´çš„ç´¢å¼•ç»“æ„ï¼Œä»è€Œæå‡æœç´¢æ€§èƒ½ã€‚</p>
<p>ä¸€ä¸ª Collection Schema
æœ‰ä¸€ä¸ªä¸»é”®ã€æœ€å¤šå››ä¸ªå‘é‡å­—æ®µå’Œå‡ ä¸ªæ ‡é‡å­—æ®µã€‚ä¸‹å›¾è¯´æ˜äº†å¦‚ä½•å°†æ–‡ç« æ˜ å°„åˆ°æ¨¡å¼å­—æ®µåˆ—è¡¨ã€‚</p>
<figure>
<img src="/2025/09/08/%E5%AD%A6%E4%B9%A0/python-web/milvus/milvus/image-20250908094645183.png" alt="image-20250908094645183">
<figcaption aria-hidden="true">image-20250908094645183</figcaption>
</figure>
<h3 id="ä¸langchainé›†æˆ">ä¸langchainé›†æˆ</h3>
<p><a target="_blank" rel="noopener" href="https://python.langchain.com/docs/integrations/vectorstores/milvus/#query-directly">Milvus
| ğŸ¦œï¸ğŸ”— LangChain</a></p>
<p><a target="_blank" rel="noopener" href="https://milvus.io/docs/zh/integrate_with_langchain.md">ä½¿ç”¨
Milvus å’Œ LangChain çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ | Milvus æ–‡æ¡£</a></p>
<p>æœ¬äººå®ç°çš„ç”¨äºåˆ†å—åå­˜å‚¨å…¥milvusçš„ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line">class MilvusStorage:</span><br><span class="line">    &quot;&quot;&quot;Milvuså‘é‡å­˜å‚¨ç®¡ç†ç±»</span><br><span class="line">    </span><br><span class="line">    è´Ÿè´£å°†åˆ†å—åçš„æ–‡æ¡£å†…å®¹å­˜å‚¨åˆ°Milvuså‘é‡æ•°æ®åº“ä¸­ï¼Œ</span><br><span class="line">    æ”¯æŒå‘é‡æ£€ç´¢å’ŒBM25å…¨æ–‡æ£€ç´¢ã€‚</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    def __init__(self, </span><br><span class="line">                 embedding_function: Embeddings,</span><br><span class="line">                 uri: Optional[str] = None, </span><br><span class="line">                 db_name: Optional[str] = None,</span><br><span class="line">                 token: Optional[str] = None,</span><br><span class="line">                 collection_name: Optional[str] = None):</span><br><span class="line">        &quot;&quot;&quot;åˆå§‹åŒ–Milvuså­˜å‚¨å®¢æˆ·ç«¯</span><br><span class="line">        </span><br><span class="line">        Args:</span><br><span class="line">            embedding_function: LangChain embeddingæ¨¡å‹å®ä¾‹ï¼ˆå¿…éœ€ï¼‰</span><br><span class="line">            uri: MilvusæœåŠ¡åœ°å€ï¼Œé»˜è®¤ä»ç¯å¢ƒå˜é‡MILVUS_URIè·å–</span><br><span class="line">            db_name: æ•°æ®åº“åç§°ï¼Œé»˜è®¤ä»ç¯å¢ƒå˜é‡MILVUS_DB_NAMEè·å–</span><br><span class="line">            token: è®¤è¯ä»¤ç‰Œï¼Œé»˜è®¤ä»ç¯å¢ƒå˜é‡MILVUS_TOKENè·å–ï¼ˆå¯é€‰ï¼‰</span><br><span class="line">            collection_name: é›†åˆåç§°ï¼Œé»˜è®¤ä»ç¯å¢ƒå˜é‡MILVUS_COLLECTION_NAMEè·å–</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        # éªŒè¯å¿…éœ€å‚æ•°</span><br><span class="line">        if not embedding_function:</span><br><span class="line">            raise ValueError(&quot;embedding_functionæ˜¯å¿…éœ€å‚æ•°ï¼Œå¿…é¡»æä¾›LangChain Embeddingså®ä¾‹&quot;)</span><br><span class="line">        </span><br><span class="line">        # ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®ï¼Œå¦‚æœå‚æ•°æ²¡æœ‰æä¾›çš„è¯</span><br><span class="line">        self.uri = uri or os.getenv(&#x27;MILVUS_URI&#x27;, &#x27;http://localhost:19530&#x27;)</span><br><span class="line">        self.db_name = db_name or os.getenv(&#x27;MILVUS_DB_NAME&#x27;, &#x27;rag&#x27;)</span><br><span class="line">        self.token = token or os.getenv(&#x27;MILVUS_TOKEN&#x27;) or None</span><br><span class="line">        self.collection_name = collection_name or os.getenv(&#x27;MILVUS_COLLECTION_NAME&#x27;, &#x27;chunks&#x27;)</span><br><span class="line">        </span><br><span class="line">        # è®¾ç½®embeddingå‡½æ•°</span><br><span class="line">        self.embedding_function = embedding_function</span><br><span class="line">        </span><br><span class="line">        # åˆå§‹åŒ–LangChain Milvuså‘é‡å­˜å‚¨</span><br><span class="line">        self.vector_store = Milvus(</span><br><span class="line">            embedding_function=self.embedding_function,</span><br><span class="line">            connection_args=&#123;</span><br><span class="line">                &quot;uri&quot;: self.uri,</span><br><span class="line">                &quot;db_name&quot;: self.db_name,</span><br><span class="line">                &quot;token&quot;: self.token</span><br><span class="line">            &#125; if self.token else &#123;</span><br><span class="line">                &quot;uri&quot;: self.uri,</span><br><span class="line">                &quot;db_name&quot;: self.db_name</span><br><span class="line">            &#125;,</span><br><span class="line">            collection_name=self.collection_name,</span><br><span class="line">            index_params=&#123;&quot;index_type&quot;: &quot;HNSW&quot;, &quot;metric_type&quot;: &quot;COSINE&quot;, &quot;params&quot;: &#123;&quot;M&quot;: 16, &quot;efConstruction&quot;: 200&#125;&#125;</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">    def store_chunks(self, chunk_result: ChunkResult) -&gt; Dict[str, Any]:</span><br><span class="line">        &quot;&quot;&quot;å­˜å‚¨åˆ†å—ç»“æœåˆ°Milvus</span><br><span class="line">        </span><br><span class="line">        Args:</span><br><span class="line">            chunk_result: åˆ†å—ç»“æœå¯¹è±¡</span><br><span class="line">            </span><br><span class="line">        Returns:</span><br><span class="line">            Dict: æ’å…¥ç»“æœï¼ŒåŒ…å«æ’å…¥çŠ¶æ€å’Œè®°å½•æ•°</span><br><span class="line">            </span><br><span class="line">        Raises:</span><br><span class="line">            ValueError: å½“å‘é‡å­˜å‚¨æœªåˆå§‹åŒ–æ—¶</span><br><span class="line">            Exception: Milvusæ“ä½œå¼‚å¸¸</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        if not self.vector_store:</span><br><span class="line">            raise ValueError(&quot;å‘é‡å­˜å‚¨æœªåˆå§‹åŒ–&quot;)</span><br><span class="line">        </span><br><span class="line">        if not chunk_result.chunks:</span><br><span class="line">            return &#123;</span><br><span class="line">                &quot;status&quot;: &quot;success&quot;, </span><br><span class="line">                &quot;inserted_count&quot;: 0,</span><br><span class="line">                &quot;message&quot;: &quot;æ— æ•°æ®éœ€è¦æ’å…¥&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        </span><br><span class="line">        try:</span><br><span class="line">            # è½¬æ¢ä¸ºLangChain Documentæ ¼å¼</span><br><span class="line">            documents = self._convert_chunks_to_langchain_docs(chunk_result)</span><br><span class="line">            </span><br><span class="line">            # ä¸ºæ¯ä¸ªæ–‡æ¡£ç”ŸæˆUUIDä½œä¸ºä¸»é”®</span><br><span class="line">            from uuid import uuid4</span><br><span class="line">            uuids = [str(uuid4()) for _ in range(len(documents))]</span><br><span class="line">            </span><br><span class="line">            # ä½¿ç”¨LangChain Milvusæ·»åŠ æ–‡æ¡£ï¼ŒæŒ‡å®šIDs</span><br><span class="line">            ids = self.vector_store.add_documents(documents=documents, ids=uuids)</span><br><span class="line">            </span><br><span class="line">            return &#123;</span><br><span class="line">                &quot;status&quot;: &quot;success&quot;,</span><br><span class="line">                &quot;inserted_count&quot;: len(documents),</span><br><span class="line">                &quot;document_ids&quot;: ids,</span><br><span class="line">                &quot;document_name&quot;: chunk_result.document_name,</span><br><span class="line">                &quot;strategy&quot;: chunk_result.strategy.value,</span><br><span class="line">                &quot;collection_name&quot;: self.collection_name</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        except Exception as e:</span><br><span class="line">            raise Exception(f&quot;Milvusæ’å…¥å¤±è´¥: &#123;str(e)&#125;&quot;)</span><br><span class="line">    </span><br><span class="line">    def _convert_chunks_to_langchain_docs(self, chunk_result: ChunkResult) -&gt; List[Document]:</span><br><span class="line">        &quot;&quot;&quot;ä¸ºç°æœ‰Documentsæ·»åŠ å­˜å‚¨æ‰€éœ€çš„å…ƒæ•°æ®</span><br><span class="line">        </span><br><span class="line">        Args:</span><br><span class="line">            chunk_result: åˆ†å—ç»“æœï¼Œchunkså·²ç»æ˜¯Documentåˆ—è¡¨</span><br><span class="line">            </span><br><span class="line">        Returns:</span><br><span class="line">            List[Document]: æ·»åŠ äº†å…ƒæ•°æ®çš„Documentåˆ—è¡¨</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        documents = []</span><br><span class="line">        </span><br><span class="line">        for idx, chunk in enumerate(chunk_result.chunks):</span><br><span class="line">            # åˆ›å»ºç¬¦åˆMilvusé›†åˆschemaçš„å…ƒæ•°æ®</span><br><span class="line">            # æ³¨æ„ï¼špage_contentä¼šè‡ªåŠ¨æ˜ å°„åˆ°text_contentå­—æ®µ</span><br><span class="line">            updated_metadata = &#123;</span><br><span class="line">                **chunk.metadata,  # ä¿ç•™åŸæœ‰å…ƒæ•°æ®</span><br><span class="line">                &quot;document_name&quot;: chunk_result.document_name,</span><br><span class="line">                &quot;chunk_index&quot;: idx,</span><br><span class="line">                &quot;chunk_size&quot;: len(chunk.page_content)</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            # åˆ›å»ºæ–°Documentä»¥é¿å…ä¿®æ”¹åŸå§‹æ•°æ®</span><br><span class="line">            # LangChainä¼šè‡ªåŠ¨å°†page_contentæ˜ å°„åˆ°Milvusçš„text_contentå­—æ®µ</span><br><span class="line">            # embeddingå­—æ®µä¼šç”±embedding_functionè‡ªåŠ¨ç”Ÿæˆ</span><br><span class="line">            doc = Document(</span><br><span class="line">                page_content=chunk.page_content,</span><br><span class="line">                metadata=updated_metadata</span><br><span class="line">            )</span><br><span class="line">            documents.append(doc)</span><br><span class="line">        </span><br><span class="line">        return documents</span><br><span class="line">    </span><br><span class="line">    def store_chunks_batch(self, chunk_results: List[ChunkResult]) -&gt; Dict[str, Any]:</span><br><span class="line">        &quot;&quot;&quot;æ‰¹é‡å­˜å‚¨å¤šä¸ªåˆ†å—ç»“æœåˆ°Milvus</span><br><span class="line">        </span><br><span class="line">        Args:</span><br><span class="line">            chunk_results: åˆ†å—ç»“æœåˆ—è¡¨</span><br><span class="line">            </span><br><span class="line">        Returns:</span><br><span class="line">            Dict: æ‰¹é‡æ’å…¥ç»“æœ</span><br><span class="line">            </span><br><span class="line">        Raises:</span><br><span class="line">            ValueError: å½“å‘é‡å­˜å‚¨æœªåˆå§‹åŒ–æ—¶</span><br><span class="line">            Exception: Milvusæ“ä½œå¼‚å¸¸</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        if not self.vector_store:</span><br><span class="line">            raise ValueError(&quot;å‘é‡å­˜å‚¨æœªåˆå§‹åŒ–&quot;)</span><br><span class="line">        </span><br><span class="line">        if not chunk_results:</span><br><span class="line">            return &#123;</span><br><span class="line">                &quot;status&quot;: &quot;success&quot;,</span><br><span class="line">                &quot;message&quot;: &quot;æ²¡æœ‰åˆ†å—ç»“æœéœ€è¦å­˜å‚¨&quot;,</span><br><span class="line">                &quot;total_chunks&quot;: 0,</span><br><span class="line">                &quot;document_count&quot;: 0</span><br><span class="line">            &#125;</span><br><span class="line">        </span><br><span class="line">        try:</span><br><span class="line">            # æ”¶é›†æ‰€æœ‰æ–‡æ¡£</span><br><span class="line">            all_documents = []</span><br><span class="line">            total_chunks = 0</span><br><span class="line">            </span><br><span class="line">            for chunk_result in chunk_results:</span><br><span class="line">                if chunk_result.chunks:</span><br><span class="line">                    documents = self._convert_chunks_to_langchain_docs(chunk_result)</span><br><span class="line">                    all_documents.extend(documents)</span><br><span class="line">                    total_chunks += len(documents)</span><br><span class="line">            </span><br><span class="line">            if not all_documents:</span><br><span class="line">                return &#123;</span><br><span class="line">                    &quot;status&quot;: &quot;success&quot;,</span><br><span class="line">                    &quot;message&quot;: &quot;æ²¡æœ‰æ–‡æ¡£éœ€è¦å­˜å‚¨&quot;,</span><br><span class="line">                    &quot;total_chunks&quot;: 0,</span><br><span class="line">                    &quot;document_count&quot;: len(chunk_results)</span><br><span class="line">                &#125;</span><br><span class="line">            </span><br><span class="line">            # ä¸ºæ‰€æœ‰æ–‡æ¡£ç”ŸæˆUUIDä½œä¸ºä¸»é”®</span><br><span class="line">            from uuid import uuid4</span><br><span class="line">            uuids = [str(uuid4()) for _ in range(len(all_documents))]</span><br><span class="line">            </span><br><span class="line">            # æ‰¹é‡æ·»åŠ æ‰€æœ‰æ–‡æ¡£ï¼ŒæŒ‡å®šIDs</span><br><span class="line">            ids = self.vector_store.add_documents(documents=all_documents, ids=uuids)</span><br><span class="line">            </span><br><span class="line">            return &#123;</span><br><span class="line">                &quot;status&quot;: &quot;success&quot;,</span><br><span class="line">                &quot;message&quot;: f&quot;æˆåŠŸå­˜å‚¨ &#123;len(chunk_results)&#125; ä¸ªæ–‡æ¡£çš„ &#123;total_chunks&#125; ä¸ªåˆ†å—&quot;,</span><br><span class="line">                &quot;total_chunks&quot;: total_chunks,</span><br><span class="line">                &quot;document_count&quot;: len(chunk_results),</span><br><span class="line">                &quot;ids&quot;: ids,</span><br><span class="line">                &quot;collection_name&quot;: self.collection_name</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        except Exception as e:</span><br><span class="line">            raise Exception(f&quot;Milvusæ‰¹é‡æ’å…¥å¤±è´¥: &#123;str(e)&#125;&quot;)</span><br><span class="line">    </span><br><span class="line">    def delete_document(self, </span><br><span class="line">                       document_name: str, </span><br><span class="line">                       collection_name: Optional[str] = None) -&gt; Dict[str, Any]:</span><br><span class="line">        &quot;&quot;&quot;åˆ é™¤æŒ‡å®šæ–‡æ¡£çš„æ‰€æœ‰chunks</span><br><span class="line">        </span><br><span class="line">        Args:</span><br><span class="line">            document_name: æ–‡æ¡£åç§°</span><br><span class="line">            collection_name: collectionåç§°</span><br><span class="line">            </span><br><span class="line">        Returns:</span><br><span class="line">            Dict: åˆ é™¤ç»“æœ</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        target_collection = collection_name or self.collection_name</span><br><span class="line">        </span><br><span class="line">        try:</span><br><span class="line">            if not self.vector_store:</span><br><span class="line">                raise ValueError(&quot;å‘é‡å­˜å‚¨æœªåˆå§‹åŒ–&quot;)</span><br><span class="line">            </span><br><span class="line">            # ä½¿ç”¨LangChain Milvusåˆ é™¤åŠŸèƒ½</span><br><span class="line">            # æ³¨æ„ï¼šLangChain Milvuså¯èƒ½ä¸æ”¯æŒæŒ‰å…ƒæ•°æ®è¿‡æ»¤åˆ é™¤ï¼Œè¿™é‡Œæä¾›åŸºæœ¬å®ç°</span><br><span class="line">            return &#123;</span><br><span class="line">                &quot;status&quot;: &quot;error&quot;,</span><br><span class="line">                &quot;document_name&quot;: document_name,</span><br><span class="line">                &quot;error&quot;: &quot;LangChain Milvusä¸æ”¯æŒæŒ‰æ–‡æ¡£ååˆ é™¤ï¼Œè¯·ä½¿ç”¨å…¶ä»–æ–¹å¼&quot;,</span><br><span class="line">                &quot;collection_name&quot;: target_collection</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        except Exception as e:</span><br><span class="line">            return &#123;</span><br><span class="line">                &quot;status&quot;: &quot;error&quot;, </span><br><span class="line">                &quot;document_name&quot;: document_name,</span><br><span class="line">                &quot;error&quot;: str(e)</span><br><span class="line">            &#125;</span><br><span class="line">    </span><br><span class="line">    def get_document_stats(self, </span><br><span class="line">                          document_name: Optional[str] = None,</span><br><span class="line">                          collection_name: Optional[str] = None) -&gt; Dict[str, Any]:</span><br><span class="line">        &quot;&quot;&quot;è·å–æ–‡æ¡£ç»Ÿè®¡ä¿¡æ¯</span><br><span class="line">        </span><br><span class="line">        Args:</span><br><span class="line">            document_name: æ–‡æ¡£åç§°ï¼ŒNoneåˆ™ç»Ÿè®¡æ‰€æœ‰æ–‡æ¡£</span><br><span class="line">            collection_name: collectionåç§°</span><br><span class="line">            </span><br><span class="line">        Returns:</span><br><span class="line">            Dict: ç»Ÿè®¡ä¿¡æ¯</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        target_collection = collection_name or self.collection_name</span><br><span class="line">        </span><br><span class="line">        try:</span><br><span class="line">            if not self.vector_store:</span><br><span class="line">                raise ValueError(&quot;å‘é‡å­˜å‚¨æœªåˆå§‹åŒ–&quot;)</span><br><span class="line">            </span><br><span class="line">            # ä½¿ç”¨LangChain Milvusè·å–åŸºæœ¬ä¿¡æ¯</span><br><span class="line">            # æ³¨æ„ï¼šLangChain Milvusæ²¡æœ‰ç›´æ¥çš„ç»Ÿè®¡æ–¹æ³•ï¼Œè¿™é‡Œæä¾›åŸºæœ¬ä¿¡æ¯</span><br><span class="line">            return &#123;</span><br><span class="line">                &quot;status&quot;: &quot;success&quot;,</span><br><span class="line">                &quot;collection_name&quot;: target_collection,</span><br><span class="line">                &quot;vector_store_type&quot;: &quot;LangChain Milvus&quot;,</span><br><span class="line">                &quot;embedding_function&quot;: str(type(self.embedding_function).__name__),</span><br><span class="line">                &quot;connection_uri&quot;: self.uri,</span><br><span class="line">                &quot;database_name&quot;: self.db_name,</span><br><span class="line">                &quot;message&quot;: &quot;è¯¦ç»†ç»Ÿè®¡ä¿¡æ¯éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼è·å–&quot;</span><br><span class="line">            &#125;</span><br><span class="line">                </span><br><span class="line">        except Exception as e:</span><br><span class="line">            return &#123;</span><br><span class="line">                &quot;status&quot;: &quot;error&quot;,</span><br><span class="line">                &quot;error&quot;: str(e)</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<h3 id="åŸºæœ¬annæœç´¢">åŸºæœ¬ANNæœç´¢</h3>
<p>è¿‘ä¼¼è¿‘é‚»ï¼ˆANNï¼‰æœç´¢ä»¥è®°å½•å‘é‡åµŒå…¥æ’åºé¡ºåºçš„ç´¢å¼•æ–‡ä»¶ä¸ºåŸºç¡€ï¼Œæ ¹æ®æ¥æ”¶åˆ°çš„æœç´¢è¯·æ±‚ä¸­æºå¸¦çš„æŸ¥è¯¢å‘é‡æŸ¥æ‰¾å‘é‡åµŒå…¥å­é›†ï¼Œå°†æŸ¥è¯¢å‘é‡ä¸å­ç¾¤ä¸­çš„å‘é‡è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶è¿”å›æœ€ç›¸ä¼¼çš„ç»“æœã€‚</p>
<p>ANN å’Œ k-Nearest Neighbors (kNN) æœç´¢æ˜¯å‘é‡ç›¸ä¼¼æ€§æœç´¢çš„å¸¸ç”¨æ–¹æ³•ã€‚åœ¨
kNN
æœç´¢ä¸­ï¼Œå¿…é¡»å°†å‘é‡ç©ºé—´ä¸­çš„æ‰€æœ‰å‘é‡ä¸æœç´¢è¯·æ±‚ä¸­æºå¸¦çš„æŸ¥è¯¢å‘é‡è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åæ‰¾å‡ºæœ€ç›¸ä¼¼çš„å‘é‡ï¼Œè¿™æ—¢è€—æ—¶åˆè€—è´¹èµ„æºã€‚</p>
<p>ä¸ kNN æœç´¢ä¸åŒï¼ŒANN
æœç´¢ç®—æ³•è¦æ±‚æä¾›ä¸€ä¸ª<strong>ç´¢å¼•</strong>æ–‡ä»¶ï¼Œè®°å½•å‘é‡ Embeddings
çš„æ’åºé¡ºåºã€‚å½“æ”¶åˆ°æœç´¢è¯·æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•æ–‡ä»¶ä½œä¸ºå‚è€ƒï¼Œå¿«é€Ÿæ‰¾åˆ°å¯èƒ½åŒ…å«ä¸æŸ¥è¯¢å‘é‡æœ€ç›¸ä¼¼çš„å‘é‡åµŒå…¥çš„å­ç»„ã€‚ç„¶åï¼Œä½ å¯ä»¥ä½¿ç”¨æŒ‡å®šçš„<strong>åº¦é‡ç±»å‹</strong>æ¥æµ‹é‡æŸ¥è¯¢å‘é‡ä¸å­ç»„ä¸­çš„å‘é‡ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œæ ¹æ®ä¸æŸ¥è¯¢å‘é‡çš„ç›¸ä¼¼åº¦å¯¹ç»„æˆå‘˜è¿›è¡Œæ’åºï¼Œå¹¶æ‰¾å‡º<strong>å‰
K ä¸ª</strong>ç»„æˆå‘˜ã€‚</p>
<p>ANN
æœç´¢ä¾èµ–äºé¢„å»ºç´¢å¼•ï¼Œæœç´¢ååé‡ã€å†…å­˜ä½¿ç”¨é‡å’Œæœç´¢æ­£ç¡®æ€§å¯èƒ½ä¼šå› é€‰æ‹©çš„ç´¢å¼•ç±»å‹è€Œä¸åŒã€‚æ‚¨éœ€è¦åœ¨æœç´¢æ€§èƒ½å’Œæ­£ç¡®æ€§ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<h3 id="æ··åˆæ£€ç´¢">æ··åˆæ£€ç´¢</h3>
<p><a target="_blank" rel="noopener" href="https://milvus.io/docs/zh/multi-vector-search.md">å¤šå‘é‡æ··åˆæœç´¢ |
Milvus æ–‡æ¡£</a></p>
<figure>
<img src="/2025/09/08/%E5%AD%A6%E4%B9%A0/python-web/milvus/milvus/image-20250908092720695.png" alt="image-20250908092720695">
<figcaption aria-hidden="true">image-20250908092720695</figcaption>
</figure>
<p>è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªçœŸå®ä¸–ç•Œçš„ä½¿ç”¨æ¡ˆä¾‹ï¼Œå…¶ä¸­æ¯ä¸ªäº§å“éƒ½åŒ…å«æ–‡å­—æè¿°å’Œå›¾ç‰‡ã€‚æ ¹æ®å¯ç”¨æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸‰ç§ç±»å‹çš„æœç´¢ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰æ–‡æœ¬æœç´¢ï¼š</strong>è¿™æ¶‰åŠä½¿ç”¨å¯†é›†å‘é‡æŸ¥è¯¢äº§å“çš„æ–‡æœ¬æè¿°ã€‚å¯ä»¥ä½¿ç”¨<a target="_blank" rel="noopener" href="https://zilliz.com/learn/explore-colbert-token-level-embedding-and-ranking-model-for-similarity-search?_gl=1*d243m9*_gcl_au*MjcyNTAwMzUyLjE3NDMxMzE1MjY.*_ga*MTQ3OTI4MDc5My4xNzQzMTMxNTI2*_ga_KKMVYG8YF2*MTc0NTkwODU0Mi45NC4xLjE3NDU5MDg4MzcuMC4wLjA.&amp;__hstc=175614333.1360fa4d62338b70e9a0f2412f87e2d8.1757161116448.1757218172494.1757289528471.4&amp;__hssc=175614333.2.1757289528471&amp;__hsfp=990823879#A-Quick-Recap-of-BERT">BERT</a>å’Œ<a target="_blank" rel="noopener" href="https://zilliz.com/learn/NLP-essentials-understanding-transformers-in-AI?_gl=1*d243m9*_gcl_au*MjcyNTAwMzUyLjE3NDMxMzE1MjY.*_ga*MTQ3OTI4MDc5My4xNzQzMTMxNTI2*_ga_KKMVYG8YF2*MTc0NTkwODU0Mi45NC4xLjE3NDU5MDg4MzcuMC4wLjA.&amp;__hstc=175614333.1360fa4d62338b70e9a0f2412f87e2d8.1757161116448.1757218172494.1757289528471.4&amp;__hssc=175614333.2.1757289528471&amp;__hsfp=990823879">Transformers</a>ç­‰æ¨¡å‹æˆ–<a target="_blank" rel="noopener" href="https://zilliz.com/learn/guide-to-using-openai-text-embedding-models?__hstc=175614333.1360fa4d62338b70e9a0f2412f87e2d8.1757161116448.1757218172494.1757289528471.4&amp;__hssc=175614333.2.1757289528471&amp;__hsfp=990823879">OpenAI</a>
ç­‰æœåŠ¡ç”Ÿæˆæ–‡æœ¬åµŒå…¥ã€‚</li>
<li><strong>å…¨æ–‡æœç´¢</strong>ï¼šåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ç¨€ç–å‘é‡çš„å…³é”®è¯åŒ¹é…æ¥æŸ¥è¯¢äº§å“çš„æ–‡æœ¬æè¿°ã€‚<a target="_blank" rel="noopener" href="https://zilliz.com/learn/mastering-bm25-a-deep-dive-into-the-algorithm-and-application-in-milvus?__hstc=175614333.1360fa4d62338b70e9a0f2412f87e2d8.1757161116448.1757218172494.1757289528471.4&amp;__hssc=175614333.2.1757289528471&amp;__hsfp=990823879">BM25</a>ç­‰ç®—æ³•æˆ–<a target="_blank" rel="noopener" href="https://zilliz.com/learn/bge-m3-and-splade-two-machine-learning-models-for-generating-sparse-embeddings?_gl=1*1cde1oq*_gcl_au*MjcyNTAwMzUyLjE3NDMxMzE1MjY.*_ga*MTQ3OTI4MDc5My4xNzQzMTMxNTI2*_ga_KKMVYG8YF2*MTc0NTkwODU0Mi45NC4xLjE3NDU5MDg4MzcuMC4wLjA.&amp;__hstc=175614333.1360fa4d62338b70e9a0f2412f87e2d8.1757161116448.1757218172494.1757289528471.4&amp;__hssc=175614333.2.1757289528471&amp;__hsfp=990823879#BGE-M3">BGE-M3</a>æˆ–<a target="_blank" rel="noopener" href="https://zilliz.com/learn/bge-m3-and-splade-two-machine-learning-models-for-generating-sparse-embeddings?_gl=1*ov2die*_gcl_au*MjcyNTAwMzUyLjE3NDMxMzE1MjY.*_ga*MTQ3OTI4MDc5My4xNzQzMTMxNTI2*_ga_KKMVYG8YF2*MTc0NTkwODU0Mi45NC4xLjE3NDU5MDg4MzcuMC4wLjA.&amp;__hstc=175614333.1360fa4d62338b70e9a0f2412f87e2d8.1757161116448.1757218172494.1757289528471.4&amp;__hssc=175614333.2.1757289528471&amp;__hsfp=990823879#SPLADE">SPLADE</a>ç­‰ç¨€ç–åµŒå…¥æ¨¡å‹å¯ç”¨äºæ­¤ç›®çš„ã€‚</li>
<li><strong>å¤šæ¨¡æ€å›¾åƒæœç´¢ï¼š</strong>è¿™ç§æ–¹æ³•ä½¿ç”¨å¸¦æœ‰å¯†é›†å‘é‡çš„æ–‡æœ¬æŸ¥è¯¢å¯¹å›¾åƒè¿›è¡ŒæŸ¥è¯¢ã€‚å¯ä»¥ä½¿ç”¨<a target="_blank" rel="noopener" href="https://zilliz.com/learn/exploring-openai-clip-the-future-of-multimodal-ai-learning?__hstc=175614333.1360fa4d62338b70e9a0f2412f87e2d8.1757161116448.1757218172494.1757289528471.4&amp;__hssc=175614333.2.1757289528471&amp;__hsfp=990823879&amp;_gl=1*90lcis*_gcl_au*MTI2OTI1Njc4OS4xNzU3MTYxMTEz*_ga*NTMyMTM0NTIwLjE3NTcxNjExMTM.*_ga_KKMVYG8YF2*czE3NTcyOTM4NzUkbzUkZzEkdDE3NTcyOTQ4MTMkajYwJGwwJGgw">CLIP</a>
ç­‰æ¨¡å‹ç”Ÿæˆå›¾åƒåµŒå…¥ã€‚</li>
</ul>
<p>æ··åˆæ£€ç´¢çš„æ„å»ºæµç¨‹ï¼š</p>
<ol type="1">
<li><p>åˆ›å»ºå…·æœ‰å¤šä¸ªå‘é‡åœºçš„ Collections</p>
<ul>
<li>å®šä¹‰ Collections Schema</li>
<li>é…ç½®ç´¢å¼•å‚æ•°</li>
<li>åˆ›å»º Collections</li>
</ul></li>
<li><p>æ’å…¥æ•°æ®â€˜</p></li>
<li><p>æ‰§è¡Œæ··åˆæœç´¢</p>
<ul>
<li><p>åˆ›å»ºå¤šä¸ª AnnSearchRequest å®ä¾‹</p>
<p>æ··åˆæœç´¢æ˜¯é€šè¿‡åœ¨<code>hybrid_search()</code>
å‡½æ•°ä¸­åˆ›å»ºå¤šä¸ª<code>AnnSearchRequest</code>
æ¥å®ç°çš„ï¼Œå…¶ä¸­æ¯ä¸ª<code>AnnSearchRequest</code> ä»£è¡¨ä¸€ä¸ªç‰¹å®šå‘é‡åœºçš„åŸºæœ¬
ANN
æœç´¢è¯·æ±‚ã€‚å› æ­¤ï¼Œåœ¨è¿›è¡Œæ··åˆæœç´¢ä¹‹å‰ï¼Œæœ‰å¿…è¦ä¸ºæ¯ä¸ªå‘é‡åœºåˆ›å»ºä¸€ä¸ª<code>AnnSearchRequest</code>
ã€‚</p></li>
<li><p>é…ç½® Rerankers ç­–ç•¥</p></li>
</ul></li>
</ol>
<h3 id="rerankers-ç­–ç•¥">Rerankers ç­–ç•¥</h3>
<p><a target="_blank" rel="noopener" href="https://milvus.io/docs/zh/rrf-ranker.md">RRF æ’åºå™¨ | Milvus
æ–‡æ¡£</a></p>
<p>è¦å¯¹ ANN
æœç´¢ç»“æœé›†è¿›è¡Œåˆå¹¶å’Œé‡æ–°æ’åºï¼Œé€‰æ‹©é€‚å½“çš„é‡æ–°æ’åºç­–ç•¥è‡³å…³é‡è¦ã€‚Milvus
æä¾›ä¸¤ç§é‡æ’ç­–ç•¥ï¼š</p>
<ul>
<li><strong>åŠ æƒæ’å</strong>ï¼šå¦‚æœç»“æœéœ€è¦å¼ºè°ƒæŸä¸ªå‘é‡åœºï¼Œè¯·ä½¿ç”¨è¯¥ç­–ç•¥ã€‚WeightedRanker
å¯ä»¥ä¸ºæŸäº›å‘é‡åœºèµ‹äºˆæ›´å¤§çš„æƒé‡ï¼Œä½¿å…¶æ›´åŠ çªå‡ºã€‚</li>
<li><strong>RRFRankerï¼ˆäº’æ˜“æ’åèåˆæ’åå™¨ï¼‰</strong>ï¼šåœ¨ä¸éœ€è¦ç‰¹åˆ«å¼ºè°ƒçš„æƒ…å†µä¸‹é€‰æ‹©æ­¤ç­–ç•¥ã€‚RRFRanker
èƒ½æœ‰æ•ˆå¹³è¡¡æ¯ä¸ªå‘é‡åœºçš„é‡è¦æ€§ã€‚</li>
</ul>
<h4 id="åŠ æƒæ’å">åŠ æƒæ’å</h4>
<p>åŠ æƒæ’åå™¨é€šè¿‡ä¸ºæ¯ä¸ªæœç´¢è·¯å¾„åˆ†é…ä¸åŒçš„é‡è¦æ€§æƒé‡ï¼Œæ™ºèƒ½åœ°ç»„åˆæ¥è‡ªå¤šä¸ªæœç´¢è·¯å¾„çš„ç»“æœå¹¶ç¡®å®šå…¶ä¼˜å…ˆçº§ã€‚ä¸æŠ€è‰ºé«˜è¶…çš„å¨å¸ˆå¹³è¡¡å¤šç§é…æ–™ä»¥åˆ¶ä½œå®Œç¾èœè‚´çš„æ–¹å¼ç±»ä¼¼ï¼ŒåŠ æƒæ’åå™¨ä¹Ÿä¼šå¹³è¡¡ä¸åŒçš„æœç´¢ç»“æœï¼Œä»¥æä¾›æœ€ç›¸å…³çš„ç»¼åˆç»“æœã€‚è¿™ç§æ–¹æ³•éå¸¸é€‚åˆåœ¨å¤šä¸ªå‘é‡åœºæˆ–æ¨¡å¼ä¸­è¿›è¡Œæœç´¢ï¼Œå…¶ä¸­æŸäº›åœºå¯¹æœ€ç»ˆæ’åçš„è´¡çŒ®åº”æ¯”å…¶ä»–åœºæ›´å¤§ã€‚</p>
<figure>
<img src="/2025/09/08/%E5%AD%A6%E4%B9%A0/python-web/milvus/milvus/image-20250908092538807.png" alt="image-20250908092538807">
<figcaption aria-hidden="true">image-20250908092538807</figcaption>
</figure>
<h4 id="rrfranker">RRFRanker</h4>
<p>äº’æƒ æ’åèåˆï¼ˆRRFï¼‰æ’åå™¨æ˜¯ Milvus
æ··åˆæœç´¢çš„ä¸€ç§é‡æ–°æ’åç­–ç•¥ï¼Œå®ƒæ ¹æ®å¤šä¸ªå‘é‡æœç´¢è·¯å¾„çš„æ’åä½ç½®è€Œä¸æ˜¯åŸå§‹ç›¸ä¼¼åº¦å¾—åˆ†æ¥å¹³è¡¡æœç´¢ç»“æœã€‚å°±åƒä½“è‚²æ¯”èµ›è€ƒè™‘çš„æ˜¯çƒå‘˜çš„æ’åè€Œä¸æ˜¯ä¸ªäººç»Ÿè®¡æ•°æ®ä¸€æ ·ï¼ŒRRF
Ranker
æ ¹æ®æ¯ä¸ªé¡¹ç›®åœ¨ä¸åŒæœç´¢è·¯å¾„ä¸­çš„æ’åé«˜ä½æ¥ç»„åˆæœç´¢ç»“æœï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªå…¬å¹³ã€å‡è¡¡çš„æœ€ç»ˆæ’åã€‚</p>
<p>RRF Ranker
ä¸“é—¨è®¾è®¡ç”¨äº<strong>æ··åˆæœç´¢åœºæ™¯</strong>ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸­ï¼Œæ‚¨éœ€è¦å¹³è¡¡æ¥è‡ªå¤šä¸ªå‘é‡æœç´¢è·¯å¾„çš„ç»“æœï¼Œè€Œæ— éœ€åˆ†é…æ˜ç¡®çš„é‡è¦æ€§æƒé‡ã€‚</p>
<figure>
<img src="/2025/09/08/%E5%AD%A6%E4%B9%A0/python-web/milvus/milvus/image-20250908092346065.png" alt="image-20250908092346065">
<figcaption aria-hidden="true">image-20250908092346065</figcaption>
</figure>
<h3 id="å¤šç§Ÿæˆ·">å¤šç§Ÿæˆ·</h3>
<p><a target="_blank" rel="noopener" href="https://milvus.io/docs/zh/multi_tenancy.md#Partition-key-based-multi-tenancy">å®æ–½å¤šç§Ÿæˆ·
| Milvus æ–‡æ¡£</a></p>
<p>Milvus
æ”¯æŒå››ä¸ªçº§åˆ«çš„å¤šç§Ÿæˆ·ï¼š<strong>æ•°æ®åº“</strong>ã€<strong>Collection</strong>ã€<strong>Partition</strong>
å’Œ<strong>Partition Key</strong>ã€‚</p>
<table style="width:100%;">
<colgroup>
<col style="width: 11%">
<col style="width: 28%">
<col style="width: 28%">
<col style="width: 14%">
<col style="width: 17%">
</colgroup>
<thead>
<tr>
<th>** æ•°æ®åº“çº§**</th>
<th><strong>Collections çº§</strong></th>
<th><strong>åˆ†åŒºçº§</strong></th>
<th><strong>åˆ†åŒº Key çº§</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>æ•°æ®éš”ç¦»</strong></td>
<td>ç‰©ç†</td>
<td>ç‰©ç†</td>
<td>ç‰©ç†</td>
<td>ç‰©ç† + é€»è¾‘</td>
</tr>
<tr>
<td><strong>æœ€å¤§ç§Ÿæˆ·æ•°</strong></td>
<td>é»˜è®¤ä¸º 64 ä¸ªã€‚æ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹ Milvus.yaml
é…ç½®æ–‡ä»¶ä¸­çš„<code>maxDatabaseNum</code> å‚æ•°æ¥å¢åŠ ç§Ÿæˆ·æ•°ã€‚</td>
<td>é»˜è®¤ä¸º 65,536ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹ Milvus.yaml
é…ç½®æ–‡ä»¶ä¸­çš„<code>maxCollectionNum</code> å‚æ•°æ¥å¢åŠ ã€‚</td>
<td>æ¯ä¸ª Collection æœ€å¤š 1,024 ä¸ªã€‚</td>
<td>ç™¾ä¸‡</td>
</tr>
<tr>
<td><strong>æ•°æ® Schema çµæ´»æ€§</strong></td>
<td>é«˜</td>
<td>ä¸­</td>
<td>ä½</td>
<td>ä½</td>
</tr>
<tr>
<td><strong>RBAC æ”¯æŒ</strong></td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td><strong>æœç´¢æ€§èƒ½</strong></td>
<td>å¼º</td>
<td>å¼º</td>
<td>ä¸­ç­‰</td>
<td>ä¸­ç­‰</td>
</tr>
<tr>
<td><strong>è·¨ç§Ÿæˆ·æœç´¢æ”¯æŒ</strong></td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ”¯æŒ</td>
<td>æ˜¯</td>
</tr>
<tr>
<td><strong>æ”¯æŒæœ‰æ•ˆå¤„ç†å†·çƒ­æ•°æ®</strong></td>
<td>æ˜¯</td>
<td>æ˜¯</td>
<td>æ”¯æŒ</td>
<td>å¦ ç›®å‰ä¸æ”¯æŒ Partition Key çº§ç­–ç•¥ã€‚</td>
</tr>
</tbody>
</table>
<h3 id="æ¯”è¾ƒæœ‰æ„æ€çš„æ•™ç¨‹">æ¯”è¾ƒæœ‰æ„æ€çš„æ•™ç¨‹</h3>
<p>å¤šæ¨¡æ€rag<a target="_blank" rel="noopener" href="https://milvus.io/docs/zh/multimodal_rag_with_milvus.md">ç”¨ Milvus
åˆ¶ä½œå¤šæ¨¡æ€ RAG | Milvus æ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://milvus.io/docs/zh/text_image_search.md">ä½¿ç”¨ Milvus
è¿›è¡Œæ–‡æœ¬åˆ°å›¾åƒæœç´¢ | Milvus æ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://milvus.io/docs/zh/image_similarity_search.md">ä½¿ç”¨
Milvus æœç´¢å›¾åƒ | Milvus æ–‡æ¡£</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/09/05/%E5%AE%9E%E4%B9%A0/Tosea.ai/api%E8%B0%83%E6%9F%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/09/05/%E5%AE%9E%E4%B9%A0/Tosea.ai/api%E8%B0%83%E6%9F%A5/" class="post-title-link" itemprop="url">apiè°ƒæŸ¥</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-09-05 00:00:00" itemprop="dateCreated datePublished" datetime="2025-09-05T00:00:00+08:00">2025-09-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-09-06 22:53:32" itemprop="dateModified" datetime="2025-09-06T22:53:32+08:00">2025-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%9E%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">å®ä¹ </span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%9E%E4%B9%A0/Tosea-ai/" itemprop="url" rel="index"><span itemprop="name">Tosea.ai</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="convertapi">convertapi</h3>
<p><a target="_blank" rel="noopener" href="https://www.convertapi.com/">ConvertAPI: Powerful File
Conversion API for Developers &amp; Businesses</a></p>
<table>
<colgroup>
<col style="width: 6%">
<col style="width: 15%">
<col style="width: 16%">
<col style="width: 27%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr>
<th>æ¡£æ¬¡</th>
<th>å®˜æ–¹åç§°</th>
<th>æœˆè´¹ (CNY)</th>
<th>æ¯æœˆåŒ…å«è½¬æ¢æ¬¡æ•°</th>
<th>å•æ–‡ä»¶ä¸Šé™</th>
<th>å¹¶å‘ä»»åŠ¡æ•°</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Developer</td>
<td>Â¥249</td>
<td>1,000 æ¬¡</td>
<td>200 MB</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>Startup</td>
<td>Â¥677</td>
<td>5,000 æ¬¡</td>
<td>300 MB</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>Growth</td>
<td>Â¥1,247</td>
<td>15,000 æ¬¡</td>
<td>500 MB</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>Business</td>
<td>Â¥2,495</td>
<td>50,000 æ¬¡</td>
<td>1 GB</td>
<td>æ— é™åˆ¶</td>
</tr>
</tbody>
</table>
<h3 id="cloudconvert">CloudConvert</h3>
<table>
<colgroup>
<col style="width: 26%">
<col style="width: 22%">
<col style="width: 50%">
</colgroup>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>ä»·æ ¼</th>
<th>åŒ…å«å†…å®¹</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ä¸€æ¬¡æ€§è´­ä¹°ç§¯åˆ†</strong></td>
<td><strong>$9 ç¾å…ƒ</strong> èµ·</td>
<td>500 ä¸ªè½¬æ¢ç§¯åˆ†</td>
</tr>
<tr>
<td><strong>æœˆåº¦è®¢é˜…</strong></td>
<td><strong>$9 ç¾å…ƒ/æœˆ</strong></td>
<td>æ¯æœˆ 1000 ä¸ªè½¬æ¢ç§¯åˆ†ï¼Œæœªç”¨å®Œå¯æ»šå­˜</td>
</tr>
</tbody>
</table>
<p>æ¯å¤©å…è´¹ 10 æ¬¡è½¬æ¢</p>
<p>pdfè½¬pptï¼Œä¸€æ¬¡è¦èŠ±è´¹4ç§¯åˆ†ï¼Œå¹³å‡ä¸‹æ¥ä¸€ä»½éœ€è¦0.47å…ƒï¼Œä»˜è´¹æƒ…å†µä¸‹å¯ä»¥åšåˆ°
5ä¸ªå¹¶å‘ä»»åŠ¡</p>
<p><a target="_blank" rel="noopener" href="https://cloudconvert.com/pricing">å®šä»· |äº‘è½¬æ¢</a></p>
<p><a target="_blank" rel="noopener" href="https://cloudconvert.com/pdf-to-pptx">PDF to PowerPoint |
CloudConvert</a></p>
<h3 id="groupdocs.conversionaspose.pdf-cloud">GroupDocs.Conversion/Aspose.PDF
Cloud</h3>
<p>æ¯ä¸ªæœˆ1000æ¬¡ä»¥å†…çš„apiè°ƒç”¨æ˜¯30ç¾é‡‘ï¼Œå¹³å‡ä¸‹æ¥æ˜¯ä¸€ä»½0.21å…ƒï¼Œä½†æ˜¯å¦‚æœè¶…è¿‡1000æ¬¡æ¯ä¸ªæœˆï¼Œå°±è¦0.09ç¾é‡‘ä¸€æ¬¡è½¬æ¢</p>
<p>ä»˜è´¹é»˜è®¤5å¹¶å‘</p>
<p>https://products.groupdocs.cloud/conversion/python/pdf-to-ppt/</p>
<p><a target="_blank" rel="noopener" href="https://dashboard.groupdocs.cloud/#/">Dashboard</a></p>
<p><a target="_blank" rel="noopener" href="https://dashboard.aspose.cloud/#/">Dashboard</a></p>
<p><a target="_blank" rel="noopener" href="https://purchase.groupdocs.cloud/pricing/">Pricing Guide -
Purchase - groupdocs.cloud</a></p>
<h3 id="adobe-pdf">Adobe PDF</h3>
<p>æ¯ä¸ªæœˆäº”ç™¾æ¬¡çš„å…è´¹è½¬æ¢</p>
<p><a target="_blank" rel="noopener" href="https://developer.adobe.com/document-services/pricing/main/">Adobe
PDF Services API Pricing | PDF Embed API Pricing | Adobe Acrobat
Services Pricing - Adobe Developers</a></p>
<h3 id="åº¦æ…§ç§‘æŠ€">åº¦æ…§ç§‘æŠ€</h3>
<p>è¿™ä¸ªå¾ˆä¾¿å®œï¼Œæˆ‘åœ¨è…¾è®¯äº‘ä¸Šçœ‹ï¼Œ300rå¯ä»¥ä¹°äº”åƒæ¬¡ï¼Œ500rå¯ä»¥ä¹°5ä¸‡æ¬¡è½¬æ¢ã€‚é˜¿é‡Œäº‘ï¼Œ100rå¯ä»¥ä¹°3000æ¬¡ï¼Œæœ‰æ•ˆæœŸä¸€ä¸ªæœˆ</p>
<p>å¹¶å‘æ•°ä¸º200</p>
<p><a target="_blank" rel="noopener" href="https://try.dhconvert.com/">åº¦æ…§æ–‡æ¡£è½¬æ¢</a></p>
<p>[<a target="_blank" rel="noopener" href="https://market.cloud.tencent.com/products/24078?keyword=åº¦æ…§">åº¦æ…§]PDFè½¬Word,PPT,Excel,TXT,OFDï¼ˆOCRé«˜çº§ç‰ˆï¼‰-è…¾è®¯äº‘å¸‚åœº</a></p>
<p><a target="_blank" rel="noopener" href="https://market.aliyun.com/detail/cmapi00044824#sku=yuncode3882400007">ã€åº¦æ…§æ–‡æ¡£è½¬æ¢ã€‘PDFè½¬Word/PPT/Excel/TXT/OFD
- æ”¯æŒæ‰«æç‰ˆOCRã€æœ€æ–°ç‰ˆã€‘_æ•°æ®API_OCR_API-_äº‘å¸‚åœº-é˜¿é‡Œäº‘</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/28/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/deepagent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/28/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/deepagent/" class="post-title-link" itemprop="url">deepagentså®æˆ˜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-28 00:00:00" itemprop="dateCreated datePublished" datetime="2025-08-28T00:00:00+08:00">2025-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-10-20 08:50:19" itemprop="dateModified" datetime="2025-10-20T08:50:19+08:00">2025-10-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/agent%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">agentå®æˆ˜</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1hjeMzVEUu?spm_id_from=333.788.videopod.sections&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">LangChain
Deep Agents - æ„å»ºä½ è‡ªå·±çš„æ·±åº¦ç ”ç©¶æ™ºèƒ½ä½“_å“”å“©å“”å“©_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.langchain.com/deep-agents/">ã€Šæ·±åº¦æ™ºèƒ½ä½“ã€‹ â€”
Deep Agents</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/28/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/deepresearch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/28/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/deepresearch/" class="post-title-link" itemprop="url">deepresearchå®æˆ˜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-28 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š15:24:12" itemprop="dateCreated datePublished" datetime="2025-08-28T00:00:00+08:00">2025-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/agent%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">agentå®æˆ˜</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="ç†è§£deepresearch">ç†è§£deepresearch</h3>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1aXg5zzExm?buvid=XX7932A7E9DD8A1DA92D4974AB535749A9B44&amp;from_spmid=tm.recommend.0.0&amp;is_story_h5=false&amp;mid=25yhOI1fPeVYa5V16BFcAw%3D%3D&amp;plat_id=116&amp;share_from=ugc&amp;share_medium=android&amp;share_plat=android&amp;share_session_id=aec53502-2411-4bc1-8ccf-ce85bd6efc1e&amp;share_source=QQ&amp;share_tag=s_i&amp;spmid=united.player-video-detail.0.0&amp;timestamp=1753142992&amp;unique_k=tZcFKrS&amp;up_id=28357052&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">ğŸ¦œğŸ•¸ï¸
Open Deep Research V2ï¼šæ–°æ¶æ„ï¼ä¸Šä¸‹æ–‡å·¥ç¨‹æœ€æ–°å®è·µ
ğŸ“‹_å“”å“©å“”å“©_bilibili</a></p>
<p><a target="_blank" rel="noopener" href="https://academy.langchain.com/courses/take/deep-research-with-langgraph/lessons/67513388-course-overview">Project:
Deep Research with LangGraph - LangChain Academy</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/langchain-ai/open_deep_research">langchain-ai/open_deep_research
â€” langchain-ai/open_deep_research</a></p>
<p>å®˜æ–¹åšæ–‡<a target="_blank" rel="noopener" href="https://blog.langchain.com/open-deep-research/">å¼€å¯æ·±åº¦ç ”ç©¶ â€”
Open Deep Research</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/25/%E5%AE%9E%E4%B9%A0/Tosea.ai/aippt%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/25/%E5%AE%9E%E4%B9%A0/Tosea.ai/aippt%E6%8A%80%E6%9C%AF%E8%B0%83%E7%A0%94/" class="post-title-link" itemprop="url">aipptæŠ€æœ¯è°ƒç ”</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-25 00:00:00" itemprop="dateCreated datePublished" datetime="2025-08-25T00:00:00+08:00">2025-08-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-08-28 19:00:20" itemprop="dateModified" datetime="2025-08-28T19:00:20+08:00">2025-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%9E%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">å®ä¹ </span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AE%9E%E4%B9%A0/Tosea-ai/" itemprop="url" rel="index"><span itemprop="name">Tosea.ai</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="æŠ€æœ¯è·¯çº¿">æŠ€æœ¯è·¯çº¿</h3>
<p><strong>æ–¹æ¡ˆ Aï¼šhtml â†’ PDF â†’
pptx</strong>ï¼ˆæˆ‘å°è¯•ä¸‹æ¥ä¸å¤§å¯è¡Œï¼Œæ— æ³•å†è¿›è¡Œç¼–è¾‘äº†ï¼‰</p>
<p><strong>æ–¹æ¡ˆ Bï¼šhtml â†’ PPTXGenJS</strong></p>
<p><strong>æ–¹æ¡ˆ Cï¼šhtml â†’ python-pptx</strong> (ä¸»æµ)</p>
<p><strong>æ–¹æ¡ˆ Dï¼šmarkdown â†’ Slidev</strong></p>
<p>æˆ‘å°è¯•äº†å½“å‰å¸‚é¢çš„pptç”Ÿæˆäº§å“ï¼Œåœ¨ç½‘é¡µé‡Œé¢å±•ç¤ºè¿˜ä¼šæœ‰è‰¯å¥½çš„åŠ¨ç”»æ•ˆæœï¼Œä½†æ˜¯ä¸€æ—¦å¯¼å‡ºæˆpptxï¼Œéƒ½æ˜¯ä¼šå˜æˆé™æ€é¡µé¢ï¼Œæ²¡æœ‰åŠ¨ç”»</p>
<p>reveal.jså¯ä»¥åˆ©ç”¨é¡µé¢ç”Ÿæˆä¸°å¯Œçš„pptåŠ¨ç”»æ•ˆæœï¼›Slidevå¯ä»¥å°†markdownè¯­æ³•è½¬åŒ–æˆpptï¼Œå¯ä»¥å¯¼å‡ºä¸ºpdfæˆ–pptxï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒPPTX
æ–‡ä»¶ä¸­çš„æ‰€æœ‰å¹»ç¯ç‰‡éƒ½ä¼šè¢«å¯¼å‡ºä¸ºå›¾ç‰‡ã€‚</p>
<p>PPTXGenJSå’Œpython-pptxçš„åŸç†åŸºæœ¬ä¸€è‡´ï¼ŒåŒºåˆ«ä¸€ä¸ªæ˜¯ä½¿ç”¨jsä¸€ä¸ªæ˜¯pythonï¼Œä½¿ç”¨æ–¹æ³•éƒ½æ˜¯é€šè¿‡è§£æHTMLæ ‡ç­¾å†…å®¹ï¼Œå®šä¹‰ä¸€ä¸ªpptå®ä¾‹ï¼Œå°†htmlçš„å†…å®¹ä¸€ç‚¹ç‚¹åŠ å…¥è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæœ€åå¯¼å‡ºpptxã€‚è¿™æ ·éƒ½ä»…èƒ½å®ç°æœ€åŸºæœ¬çš„pptæ¼”ç¤ºï¼Œä¸ä¼šæœ‰å¤æ‚çš„ç»“æ„ï¼Œè€Œä¸”ç»å¸¸ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜â€”â€”æŸä¸ªæ ‡ç­¾å†…æ–‡å­—å¤ªå¤šå¾€å¾€ä¼šè¶…å‡ºpptæ¼”ç¤ºèŒƒå›´</p>
<p>ç›´æ¥è®©AIæ¥ç”Ÿæˆéå¸¸è‡ªç”±çš„PPTï¼Œæœ€ç»ˆçš„æ•ˆæœä¸€èˆ¬æ¥è¯´éƒ½æ¯”è¾ƒçƒ‚ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯é¢„å®šä¹‰ä¸€ä¸ªhtmlæ¨¡æ¿ï¼Œç„¶åè®©AIæ¥è‡ªåŠ¨çš„é€‰æ‹©æ¨¡æ¿å¾€é‡Œé¢å¡«å……å†…å®¹</p>
<h3 id="ç›¸å…³å·¥å…·">ç›¸å…³å·¥å…·</h3>
<p><a target="_blank" rel="noopener" href="https://cn.sli.dev/guide/">Slidev</a>
æ˜¯ä¸€ä¸ªä¸ºå¼€å‘è€…è®¾è®¡çš„åŸºäº Web çš„å¹»ç¯ç‰‡åˆ¶ä½œå·¥å…·ã€‚å®ƒå¸®åŠ©æ‚¨ä»¥ Markdown
çš„å½¢å¼ä¸“æ³¨äºç¼–å†™å¹»ç¯ç‰‡çš„å†…å®¹ï¼Œå¹¶åˆ¶ä½œå‡ºå…·æœ‰äº¤äº’å¼æ¼”ç¤ºåŠŸèƒ½çš„ã€é«˜åº¦å¯è‡ªå®šä¹‰çš„å¹»ç¯ç‰‡ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/hakimel/reveal.js">reveal.js</a>
æ˜¯ä¸€ä¸ªå¼€æºçš„ <strong>HTML æ¼”ç¤ºæ¡†æ¶</strong>ï¼Œç”¨ JavaScript
å†™æˆã€‚åªè¦ä½ ä¼šå†™ HTML/CSS/JSï¼Œå°±å¯ä»¥åƒåšç½‘é¡µä¸€æ ·åšå‡º
<strong>é…·ç‚«ã€å“åº”å¼ã€æ”¯æŒé”®ç›˜/é¼ æ ‡/è§¦æ§äº¤äº’</strong> çš„å¹»ç¯ç‰‡ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/gitbrent/PptxGenJS">PptxGenJS</a>
å…è®¸æ‚¨ä½¿ç”¨ JavaScript ç”Ÿæˆä¸“ä¸šçš„ PowerPoint æ¼”ç¤ºæ–‡ç¨¿â€”â€”ç›´æ¥ä»
Nodeã€Reactã€Viteã€Electronï¼Œç”šè‡³æµè§ˆå™¨ä¸­ç”Ÿæˆã€‚</p>
<p><a target="_blank" rel="noopener" href="https://github.com/scanny/python-pptx">python-pptx</a>
æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºã€è¯»å–å’Œæ›´æ–° PowerPoint (.pptx)æ–‡ä»¶çš„ Python
åº“ã€‚å…¸å‹çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»åŠ¨æ€å†…å®¹ï¼ˆå¦‚æ•°æ®åº“æŸ¥è¯¢ã€åˆ†æè¾“å‡ºæˆ– JSON è´Ÿè½½ï¼‰ç”Ÿæˆ
PowerPoint æ¼”ç¤ºæ–‡ç¨¿ï¼Œå¯èƒ½æ˜¯åœ¨å“åº” HTTP è¯·æ±‚æ—¶ç”Ÿæˆ PPTX æ–‡ä»¶å¹¶ä¸‹è½½ã€‚</p>
<blockquote>
<p>python-pptxä½¿ç”¨æ–¹å¼ï¼šæ ¹æ®æ ‡ç­¾è§£æhtmlæ–‡ä»¶ï¼Œå¦‚h1ï¼Œdivç­‰ï¼Œç„¶åä¸€ç‚¹ç‚¹æ·»åŠ åˆ°å®šä¹‰çš„é¡µä¸­</p>
</blockquote>
<h3 id="å¸‚é¢åŒç±»äº§å“">å¸‚é¢åŒç±»äº§å“</h3>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://www.genspark.ai/agents?type=slides_agent">Genspark</a>
<ul>
<li>Genspark æ˜¯ <strong>MainFunc</strong> å…¬å¸ï¼ˆç”±å‰å°åº¦ CEO
æ™¯é²²å’Œå‰å°åº¦ CTO æœ±å‡¯åè”åˆåˆ›ç«‹ï¼‰æ¨å‡ºçš„ <strong>AI Agent
æœç´¢å¼•æ“</strong>ï¼ˆæˆ–ç§°â€œAI åŸç”Ÿæœç´¢å¼•æ“â€ï¼‰ã€‚</li>
</ul></li>
<li><a target="_blank" rel="noopener" href="https://www.tiangong.cn/?from=ai-tab.cn">skywork</a>
<ul>
<li>Skywork æ˜¯æ˜†ä»‘ä¸‡ç»´ï¼ˆKunlun Inc.ï¼‰æ——ä¸‹ <strong>SkyWork AI</strong>
æ¨å‡ºçš„ä¸€ç³»åˆ— <strong>å¼€æºå¤§æ¨¡å‹</strong> ä¸ <strong>AI
æŠ€æœ¯å“ç‰Œ</strong>ã€‚</li>
</ul></li>
<li><a target="_blank" rel="noopener" href="https://manus.im/app">manus</a></li>
<li><a target="_blank" rel="noopener" href="https://gamma.app/">Gamma</a> æ˜¯ä¸€ä¸ª <strong>â€œAI
é©±åŠ¨çš„åœ¨çº¿å†…å®¹å·¥ä½œç«™â€</strong>ï¼šè¾“å…¥ä¸€å¥è¯ã€ä¸€æ®µå¤§çº²æˆ–ä»»ä½•èµ„æ–™ï¼Œå®ƒå°±èƒ½åœ¨
<strong>1-3 åˆ†é’Ÿå†…</strong> å¸®ä½ ç”Ÿæˆ
<strong>é«˜é¢œå€¼ã€å“ç‰ŒåŒ–ã€å¯äº’åŠ¨</strong> çš„æ¼”ç¤ºæ–‡ç¨¿ã€ç½‘ç«™ã€ç¤¾åª’å›¾æ–‡æˆ–
PDFï¼Œå¹¶å¯ä¸€é”®å¯¼å‡ºä¸º <strong>PPT / Google Slides / PDF /
ç½‘ç«™é“¾æ¥</strong>ã€‚</li>
</ol>
<p>manusæ˜¯æ¯é¡µpptéƒ½æ˜¯ä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œæˆ‘çŒœæµ‹åº”è¯¥æ˜¯ä½¿ç”¨åƒpython-pptxçš„åº“ç”Ÿæˆ</p>
<h3 id="ppt-mcp">ppt-mcp</h3>
<p>å¯ä»¥å‚è€ƒå…¶ä¸­çš„å·¥å…·å®ç°ï¼Œè¿™ä¸¤ä¸ªæˆ‘çœ‹ä¸‹æ¥éƒ½æ˜¯ä½¿ç”¨python-pptxåŒ…</p>
<p><a target="_blank" rel="noopener" href="https://github.com/GongRzhe/Office-PowerPoint-MCP-Server">GongRzhe/Office-PowerPoint-MCP-Server:
A MCP (Model Context Protocol) server for PowerPoint manipulation using
python-pptx. This server provides tools for creating, editing, and
manipulating PowerPoint presentations through the MCP protocol.</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/ltc6539/mcp-ppt">ltc6539/mcp-ppt: A mcp
server supporting you to generate powerpoint using LLM and natural
language automatically.</a></p>
<h3 id="æ¶æ„æ€è€ƒ">æ¶æ„æ€è€ƒ</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">flowchart TB</span><br><span class="line">    subgraph &quot;Plan-and-Executeé˜¶æ®µ&quot;</span><br><span class="line">        A[&quot;ç”¨æˆ·è¾“å…¥&quot;] --&gt; B[&quot;Planner Agent&quot;]</span><br><span class="line">        B --&gt; C[&quot;Agent Executor&quot;]</span><br><span class="line">        C --&gt; D[&quot;Replanner&quot;]</span><br><span class="line">        D --&gt;|&quot;éœ€è¦æ›´å¤šä¿¡æ¯&quot;| C</span><br><span class="line">        D --&gt;|&quot;ä¿¡æ¯å……è¶³&quot;| E[&quot;è¾“å‡ºç»“æ„åŒ–ä¿¡æ¯&quot;]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph &quot;å†…å®¹ç”Ÿæˆé˜¶æ®µ&quot;</span><br><span class="line">        E --&gt; F[&quot;å¤§çº²è®¾è®¡èŠ‚ç‚¹&quot;]</span><br><span class="line">        F --&gt; G[&quot;é¡µé¢å†…å®¹ç”ŸæˆèŠ‚ç‚¹&quot;]</span><br><span class="line">        G --&gt; H[&quot;HTMLä»£ç ç”ŸæˆèŠ‚ç‚¹&quot;]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph &quot;æ–‡ä»¶è½¬æ¢é˜¶æ®µ&quot;</span><br><span class="line">        H --&gt; I[&quot;htmlæ¼”ç¤ºç”Ÿæˆ&quot;]</span><br><span class="line">        I --&gt; J[&quot;è½¬æ¢pptxèŠ‚ç‚¹&quot;]</span><br><span class="line">        J --&gt; K[&quot;è¾“å‡ºPPTXæ–‡ä»¶&quot;]</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>
<h3 id="åˆ©ç”¨apryseå°†pdfè½¬æˆpptx">åˆ©ç”¨APRYSEå°†pdfè½¬æˆpptx</h3>
<p>Apryseï¼ˆæ›¾ç”¨å PDFTronï¼‰æ˜¯ä¸€å®¶åŠ æ‹¿å¤§å…¬å¸æ¨å‡ºçš„å•†ç”¨ SDK å®¶æ—ï¼Œä¸“æ³¨
â€œä»»ä½•æ ¼å¼è¿›ã€ä»»ä½•æ ¼å¼å‡ºâ€ çš„æ–‡æ¡£å¤„ç†ã€‚</p>
<p>è·å–apikey<a target="_blank" rel="noopener" href="https://docs.apryse.com/core/guides/get-started/trial-key">Free
trial key for Apryse SDK | Apryse documentation</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.apryse.com/core/guides/get-started/python3">Python
3.X PDF Library for Windows, Linux and Mac | Apryse
documentation</a></p>
<p><strong>å®‰è£… Apryse SDK çš„â€œç»“æ„åŒ–è¾“å‡ºæ¨¡å—â€ï¼ˆStructured Output
Moduleï¼‰</strong>ã€‚è¯¥æ¨¡å—æ˜¯ä¸€ä¸ªå¯é€‰çš„æ‰©å±•åŒ…ï¼ŒPDF â†’ PPTXã€PDF â†’ Word
ç­‰é«˜çº§è½¬æ¢åŠŸèƒ½éƒ½ä¾èµ–å®ƒã€‚<a target="_blank" rel="noopener" href="https://docs.apryse.com/core/guides/info/modules">åº“æ’ä»¶ï¼šOCRã€CAD
è½¬ PDF - é€‚ç”¨äºæœåŠ¡å™¨/æ¡Œé¢ SDK | Apryse æ–‡æ¡£ â€” Library Add-ons: OCR, CAD
to PDF - for Server/Desktop SDK | Apryse documentation</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from apryse_sdk import PDFNet, PDFDoc, Convert, StructuredOutputModule</span><br><span class="line"></span><br><span class="line"># 1. åˆå§‹åŒ–ï¼ˆè®¸å¯è¯ï¼‰</span><br><span class="line">PDFNet.Initialize(&quot;demo:1756369085114:&quot;)</span><br><span class="line"></span><br><span class="line"># 2. å‘Šè¯‰ SDK æ¨¡å—æ”¾åœ¨å“ªé‡Œ</span><br><span class="line">PDFNet.AddResourceSearchPath(r&quot;F:\project python\test\StructuredOutputWindows\Lib\Windows&quot;)</span><br><span class="line"></span><br><span class="line"># 3. å¯é€‰ï¼šç¡®è®¤æ¨¡å—å·²å°±ä½</span><br><span class="line">if not StructuredOutputModule.IsModuleAvailable():</span><br><span class="line">    raise RuntimeError(&quot;StructuredOutput module not found!&quot;)</span><br><span class="line"></span><br><span class="line"># 4. æ­£å¸¸è°ƒç”¨</span><br><span class="line">doc = PDFDoc(&quot;input.pdf&quot;)</span><br><span class="line">Convert.ToPowerPoint(doc, &quot;output.pptx&quot;)</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.convertapi.com/a">Overview</a></p>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Zftnz6Ewx/?spm_id_from=333.788.recommend_more_video.0&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">åŠ¨æ‰‹å®ç°ä¸€ä¸ªåšPPTçš„MCPæœåŠ¡å™¨_å“”å“©å“”å“©_bilibili</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/19/%E5%AD%A6%E4%B9%A0/rag/agentic-rag/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/19/%E5%AD%A6%E4%B9%A0/rag/agentic-rag/" class="post-title-link" itemprop="url">agentic-ragå®æˆ˜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-19 00:00:00" itemprop="dateCreated datePublished" datetime="2025-08-19T00:00:00+08:00">2025-08-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-09-08 10:05:23" itemprop="dateModified" datetime="2025-09-08T10:05:23+08:00">2025-09-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/rag/" itemprop="url" rel="index"><span itemprop="name">rag</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="å‰è¨€">å‰è¨€</h3>
<p><strong>è¿™ä¸ªagentic
ragä¸»è¦æ˜¯ä½œç”¨äºæ£€ç´¢éƒ¨åˆ†ï¼Œç”±æ˜¯å¦éœ€è¦è°ƒç”¨æ£€ç´¢å·¥å…·åˆ¤å®šæ˜¯å¦è¿›å…¥æ£€ç´¢é˜¶æ®µï¼Œå½“æ£€ç´¢åˆ°ç›¸å…³çš„æ–‡ç« ï¼Œåˆ™è¿›è¡Œå›ç­”ï¼Œå¦åˆ™å¯¹é—®é¢˜è¿›è¡Œæ”¹å†™ï¼Œå†æ¬¡æ£€ç´¢</strong></p>
<p>ä»£ç è§<a target="_blank" rel="noopener" href="https://github.com/zxj-2023/learn-rag-langchain/tree/main/agentic-rag">learn-rag-langchain/agentic-rag
at main Â· zxj-2023/learn-rag-langchain</a></p>
<p>åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªæ£€ç´¢ä»£ç†ã€‚å½“æ‚¨å¸Œæœ› LLM
å†³å®šæ˜¯å¦ä»å‘é‡å­˜å‚¨ä¸­æ£€ç´¢ä¸Šä¸‹æ–‡æˆ–ç›´æ¥å“åº”ç”¨æˆ·æ—¶ï¼Œæ£€ç´¢ä»£ç†éå¸¸æœ‰ç”¨ã€‚</p>
<p>å®Œæˆæ•™ç¨‹åï¼Œæˆ‘ä»¬å°†å®Œæˆä»¥ä¸‹å·¥ä½œï¼š</p>
<ol type="1">
<li>è·å–å¹¶é¢„å¤„ç†ç”¨äºæ£€ç´¢çš„æ–‡æ¡£ã€‚</li>
<li>ä¸ºè¿™äº›æ–‡æ¡£å»ºç«‹è¯­ä¹‰ç´¢å¼•ï¼Œå¹¶ä¸ºä»£ç†åˆ›å»ºä¸€ä¸ªæ£€ç´¢å·¥å…·ã€‚</li>
<li>æ„å»ºä¸€ä¸ªèƒ½å¤Ÿå†³å®šä½•æ—¶ä½¿ç”¨æ£€ç´¢å·¥å…·çš„ä»£ç†å¼ RAG ç³»ç»Ÿã€‚</li>
</ol>
<figure>
<img src="/2025/08/19/%E5%AD%A6%E4%B9%A0/rag/agentic-rag/image-20250819165309335.png" alt="image-20250819165309335">
<figcaption aria-hidden="true">image-20250819165309335</figcaption>
</figure>
<h3 id="é¢„å¤„ç†æ–‡æ¡£">1. é¢„å¤„ç†æ–‡æ¡£</h3>
<p>è·å–ç”¨äºæˆ‘ä»¬ RAG ç³»ç»Ÿçš„æ–‡æ¡£ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Lilian Weng
ä¼˜ç§€åšå®¢ä¸­æœ€æ–°çš„ä¸‰é¡µã€‚æˆ‘ä»¬å°†ä»ä½¿ç”¨ <code>WebBaseLoader</code>
å·¥å…·è·å–é¡µé¢å†…å®¹å¼€å§‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from langchain_community.document_loaders import WebBaseLoader</span><br><span class="line"></span><br><span class="line">urls = [</span><br><span class="line">    &quot;https://lilianweng.github.io/posts/2024-11-28-reward-hacking/&quot;,</span><br><span class="line">    &quot;https://lilianweng.github.io/posts/2024-07-07-hallucination/&quot;,</span><br><span class="line">    &quot;https://lilianweng.github.io/posts/2024-04-12-diffusion-video/&quot;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">docs = [WebBaseLoader(url).load() for url in urls]</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docs[0][0].page_content.strip()[:1000]</span><br></pre></td></tr></table></figure>
<p>å°†è·å–çš„æ–‡æ¡£åˆ†å‰²æˆæ›´å°çš„å—ï¼Œä»¥ä¾¿ç´¢å¼•åˆ°æˆ‘ä»¬çš„å‘é‡å­˜å‚¨ä¸­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from langchain_text_splitters import RecursiveCharacterTextSplitter</span><br><span class="line"></span><br><span class="line">docs_list = [item for sublist in docs for item in sublist]</span><br><span class="line"></span><br><span class="line">text_splitter = RecursiveCharacterTextSplitter.from_tiktoken_encoder(</span><br><span class="line">    chunk_size=100, chunk_overlap=50</span><br><span class="line">)</span><br><span class="line">doc_splits = text_splitter.split_documents(docs_list)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">doc_splits[0].page_content.strip()</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ£€ç´¢å·¥å…·">2. åˆ›å»ºæ£€ç´¢å·¥å…·</h3>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†åˆ†å‰²çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ç´¢å¼•åˆ°ä¸€ä¸ªå‘é‡å­˜å‚¨ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªå‘é‡å­˜å‚¨è¿›è¡Œè¯­ä¹‰æœç´¢ã€‚</p>
<p>ä½¿ç”¨å†…å­˜å‘é‡å­˜å‚¨å’Œ OpenAI åµŒå…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">from langchain_chroma import Chroma  # å¯¼å…¥ Chroma</span><br><span class="line">from langchain_openai import OpenAIEmbeddings</span><br><span class="line">import os</span><br><span class="line"></span><br><span class="line"># ç¡®ä¿å®‰è£…äº† langchain-chroma</span><br><span class="line"># pip install langchain-chroma</span><br><span class="line"></span><br><span class="line">embedding = OpenAIEmbeddings(</span><br><span class="line">    api_key=&quot;sk-&quot;, </span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;,</span><br><span class="line">    model=&quot;text-embedding-v4&quot;,</span><br><span class="line">    check_embedding_ctx_length=False,</span><br><span class="line">    dimensions=1536,</span><br><span class="line">    chunk_size=5  # è®¾ç½®è¾ƒå°çš„æ‰¹æ¬¡å¤§å°</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ Chroma æ›¿ä»£ InMemoryVectorStore</span><br><span class="line">vectorstore = Chroma.from_documents(</span><br><span class="line">    documents=doc_splits, </span><br><span class="line">    embedding=embedding,</span><br><span class="line">    persist_directory=&quot;./chroma_db&quot;  # æŒ‡å®šæŒä¹…åŒ–ç›®å½•</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># é‡æ–°åŠ è½½å·²å­˜åœ¨çš„ Chroma æ•°æ®åº“</span><br><span class="line">vectorstore = Chroma(</span><br><span class="line">    persist_directory=&quot;./chroma_db&quot;,</span><br><span class="line">    embedding_function=embedding</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">retriever = vectorstore.as_retriever()</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ LangChain çš„é¢„æ„å»º <code>create_retriever_tool</code>
åˆ›å»ºæ£€ç´¢å·¥å…·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from langchain.tools.retriever import create_retriever_tool</span><br><span class="line"></span><br><span class="line">retriever_tool = create_retriever_tool(</span><br><span class="line">    retriever,                    # ã€è¾“å…¥ã€‘ä¸€ä¸ªå·²ç»é…ç½®å¥½çš„æ£€ç´¢å™¨ï¼ˆä¾‹å¦‚ï¼šå‘é‡æ•°æ®åº“çš„æ£€ç´¢å™¨ï¼‰</span><br><span class="line">    &quot;retrieve_blog_posts&quot;,        # ã€å·¥å…·åç§°ã€‘è¿™ä¸ªå·¥å…·çš„å”¯ä¸€æ ‡è¯†åï¼ˆä¾›æ¨¡å‹å†…éƒ¨è°ƒç”¨ï¼‰</span><br><span class="line">    &quot;Search and return information about Lilian Weng blog posts.&quot;  # ã€å·¥å…·æè¿°ã€‘æ¨¡å‹çœ‹åˆ°çš„è¯´æ˜ï¼Œç”¨äºå†³å®šæ˜¯å¦è°ƒç”¨å®ƒ</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">retriever_tool.invoke(&#123;&quot;query&quot;: &quot;types of reward hacking&quot;&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="ç”ŸæˆæŸ¥è¯¢">3. ç”ŸæˆæŸ¥è¯¢</h3>
<p>ç°åœ¨æˆ‘ä»¬å°†å¼€å§‹æ„å»ºæˆ‘ä»¬æ™ºèƒ½ä½“ RAG å›¾ä¸­çš„ç»„ä»¶ï¼ˆèŠ‚ç‚¹å’Œè¾¹ï¼‰ã€‚</p>
<p>æ„å»ºä¸€ä¸ª <code>generate_query_or_respond</code> èŠ‚ç‚¹ã€‚å®ƒå°†è°ƒç”¨ LLM
æ¥æ ¹æ®å½“å‰å›¾çŠ¶æ€ï¼ˆæ¶ˆæ¯åˆ—è¡¨ï¼‰ç”Ÿæˆå“åº”ã€‚æ ¹æ®è¾“å…¥æ¶ˆæ¯ï¼Œå®ƒå°†å†³å®šä½¿ç”¨æ£€ç´¢å·¥å…·è¿›è¡Œæ£€ç´¢ï¼Œæˆ–ç›´æ¥å“åº”ç”¨æˆ·ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬é€šè¿‡
<code>.bind_tools</code> å‘èŠå¤©æ¨¡å‹æä¾›äº†å…ˆå‰åˆ›å»ºçš„
<code>retriever_tool</code> è®¿é—®æƒé™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from langchain_community.chat_models import ChatTongyi</span><br><span class="line">llm = ChatTongyi(</span><br><span class="line">    model=&quot;qwen3-235b-a22b&quot;,</span><br><span class="line">    api_key=&quot;sk-&quot;,</span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;,</span><br><span class="line">    model_kwargs=&#123;&quot;enable_thinking&quot;: False&#125;   # å…³é”®åœ¨è¿™é‡Œ</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">from langgraph.graph import MessagesState</span><br><span class="line"></span><br><span class="line">def generate_query_or_respond(state: MessagesState):</span><br><span class="line">    &quot;&quot;&quot;è°ƒç”¨æ¨¡å‹ï¼Œæ ¹æ®å½“å‰çŠ¶æ€ç”Ÿæˆå“åº”ã€‚æ ¹æ®é—®é¢˜ï¼Œæ¨¡å‹å°†å†³å®šæ˜¯ä½¿ç”¨æ£€ç´¢å·¥å…·è¿›è¡Œæ£€ç´¢ï¼Œè¿˜æ˜¯ç›´æ¥å›å¤ç”¨æˆ·ã€‚</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    response = (</span><br><span class="line">        llm</span><br><span class="line">        .bind_tools([retriever_tool]).invoke(state[&quot;messages&quot;])</span><br><span class="line">    )</span><br><span class="line">    return &#123;&quot;messages&quot;: [response]&#125;</span><br></pre></td></tr></table></figure>
<p>æå‡ºä¸€ä¸ªéœ€è¦è¯­ä¹‰æœç´¢çš„é—®é¢˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">input = &#123;</span><br><span class="line">    &quot;messages&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">            &quot;content&quot;: &quot;What does Lilian Weng say about types of reward hacking?&quot;,</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line">generate_query_or_respond(input)[&quot;messages&quot;][-1].pretty_print()</span><br></pre></td></tr></table></figure>
<h3 id="è¯„å®šæ–‡ä»¶">4.è¯„å®šæ–‡ä»¶</h3>
<p>æ·»åŠ ä¸€ä¸ªæ¡ä»¶è¾¹ â€” <code>grade_documents</code> â€”
æ¥åˆ¤æ–­æ£€ç´¢åˆ°çš„æ–‡æ¡£æ˜¯å¦ä¸é—®é¢˜ç›¸å…³ã€‚</p>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªå…·æœ‰ç»“æ„åŒ–è¾“å‡ºæ¨¡å¼ <code>GradeDocuments</code>
çš„æ¨¡å‹æ¥å¯¹æ–‡æ¡£è¿›è¡Œè¯„åˆ†ã€‚ <code>grade_documents</code>
å‡½æ•°å°†æ ¹æ®è¯„åˆ†å†³ç­–ï¼ˆ <code>generate_answer</code> æˆ–
<code>rewrite_question</code> ï¼‰è¿”å›è¦å‰å¾€çš„èŠ‚ç‚¹çš„åç§°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">from pydantic import BaseModel, Field</span><br><span class="line">from typing import Literal</span><br><span class="line"></span><br><span class="line"># å®šä¹‰è¯„åˆ†æç¤ºæ¨¡æ¿</span><br><span class="line">GRADE_PROMPT = (</span><br><span class="line">    &quot;ä½ æ˜¯ä¸€ä¸ªè¯„åˆ†å‘˜ï¼Œè´Ÿè´£è¯„ä¼°æ£€ç´¢åˆ°çš„æ–‡æ¡£ä¸ç”¨æˆ·é—®é¢˜çš„ç›¸å…³æ€§ã€‚\n &quot;</span><br><span class="line">    &quot;ä»¥ä¸‹æ˜¯æ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹ï¼š\n\n &#123;context&#125; \n\n&quot;</span><br><span class="line">    &quot;ä»¥ä¸‹æ˜¯ç”¨æˆ·çš„é—®é¢˜ï¼š&#123;question&#125; \n&quot;</span><br><span class="line">    &quot;å¦‚æœæ–‡æ¡£åŒ…å«ä¸ç”¨æˆ·é—®é¢˜ç›¸å…³çš„å…³é”®è¯æˆ–è¯­ä¹‰å«ä¹‰ï¼Œåˆ™å°†å…¶è¯„ä¸ºç›¸å…³ã€‚\n&quot;</span><br><span class="line">    &quot;è¯·ç»™å‡ºä¸€ä¸ªäºŒå…ƒè¯„åˆ†ï¼š&#x27;yes&#x27;ï¼ˆæ˜¯ï¼‰è¡¨ç¤ºç›¸å…³ï¼Œ&#x27;no&#x27;ï¼ˆå¦ï¼‰è¡¨ç¤ºä¸ç›¸å…³ã€‚&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># å®šä¹‰ç”¨äºè¯„ä¼°æ–‡æ¡£ç›¸å…³æ€§çš„ Pydantic æ¨¡å‹</span><br><span class="line">class GradeDocuments(BaseModel):</span><br><span class="line">    &quot;&quot;&quot;ä½¿ç”¨äºŒå…ƒè¯„åˆ†å¯¹æ–‡æ¡£è¿›è¡Œç›¸å…³æ€§è¯„ä¼°ã€‚&quot;&quot;&quot;</span><br><span class="line">    </span><br><span class="line">    binary_score: str = Field(</span><br><span class="line">        description=&quot;ç›¸å…³æ€§è¯„åˆ†ï¼š&#x27;yes&#x27; è¡¨ç¤ºç›¸å…³ï¼Œ&#x27;no&#x27; è¡¨ç¤ºä¸ç›¸å…³&quot;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"># åˆå§‹åŒ–ç”¨äºè¯„åˆ†çš„èŠå¤©æ¨¡å‹</span><br><span class="line">grader_model = llm</span><br><span class="line"></span><br><span class="line">def grade_documents(</span><br><span class="line">    state: MessagesState,</span><br><span class="line">) -&gt; Literal[&quot;generate_answer&quot;, &quot;rewrite_question&quot;]:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    åˆ¤æ–­æ£€ç´¢åˆ°çš„æ–‡æ¡£æ˜¯å¦ä¸ç”¨æˆ·é—®é¢˜ç›¸å…³ã€‚</span><br><span class="line">    </span><br><span class="line">    å‚æ•°:</span><br><span class="line">        state: åŒ…å«æ¶ˆæ¯å†å²çš„çŠ¶æ€å¯¹è±¡ï¼Œå…¶ä¸­ç¬¬ä¸€æ¡æ¶ˆæ¯æ˜¯ç”¨æˆ·é—®é¢˜ï¼Œ</span><br><span class="line">               æœ€åä¸€æ¡æ¶ˆæ¯æ˜¯æ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹ã€‚</span><br><span class="line">    </span><br><span class="line">    è¿”å›:</span><br><span class="line">        å¦‚æœæ–‡æ¡£ç›¸å…³ï¼Œè¿”å› &quot;generate_answer&quot;ï¼›</span><br><span class="line">        å¦‚æœä¸ç›¸å…³ï¼Œè¿”å› &quot;rewrite_question&quot;ï¼Œè¡¨ç¤ºéœ€è¦é‡å†™é—®é¢˜å¹¶é‡æ–°æ£€ç´¢ã€‚</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    question = state[&quot;messages&quot;][0].content  # è·å–ç”¨æˆ·é—®é¢˜</span><br><span class="line">    context = state[&quot;messages&quot;][-1].content  # è·å–æ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹</span><br><span class="line"></span><br><span class="line">    # å°†é—®é¢˜å’Œæ–‡æ¡£å†…å®¹å¡«å…¥æç¤ºæ¨¡æ¿</span><br><span class="line">    prompt = GRADE_PROMPT.format(question=question, context=context)</span><br><span class="line">    </span><br><span class="line">    # è°ƒç”¨æ¨¡å‹ï¼Œå¹¶ä»¥ç»“æ„åŒ–è¾“å‡ºï¼ˆPydantic æ¨¡å‹ï¼‰çš„å½¢å¼è·å–è¯„åˆ†ç»“æœ</span><br><span class="line">    response = (</span><br><span class="line">        grader_model</span><br><span class="line">        .with_structured_output(GradeDocuments)</span><br><span class="line">        .invoke([&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt&#125;])</span><br><span class="line">    )</span><br><span class="line">    #print(response)</span><br><span class="line">    score = response.binary_score  # è·å–äºŒå…ƒè¯„åˆ†ç»“æœ</span><br><span class="line"> </span><br><span class="line">    # æ ¹æ®è¯„åˆ†å†³å®šä¸‹ä¸€æ­¥æ“ä½œ</span><br><span class="line">    if score == &quot;yes&quot;:</span><br><span class="line">        return &quot;generate_answer&quot;  # æ–‡æ¡£ç›¸å…³ï¼Œç”Ÿæˆç­”æ¡ˆ</span><br><span class="line">    else:</span><br><span class="line">        return &quot;rewrite_question&quot;  # æ–‡æ¡£ä¸ç›¸å…³ï¼Œé‡å†™é—®é¢˜åé‡æ–°æ£€ç´¢</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">from langchain_core.messages import convert_to_messages</span><br><span class="line"></span><br><span class="line">input = &#123;</span><br><span class="line">    &quot;messages&quot;: convert_to_messages(#å°†ä¸€ç³»åˆ—æ¶ˆæ¯è½¬æ¢ä¸º BaseMessage ç±»å‹çš„æ¶ˆæ¯åˆ—è¡¨ã€‚</span><br><span class="line">        [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">                &quot;content&quot;: &quot;What does Lilian Weng say about types of reward hacking?&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">                &quot;content&quot;: &quot;&quot;,</span><br><span class="line">                &quot;tool_calls&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">                        &quot;name&quot;: &quot;retrieve_blog_posts&quot;,</span><br><span class="line">                        &quot;args&quot;: &#123;&quot;query&quot;: &quot;types of reward hacking&quot;&#125;,</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;&quot;role&quot;: &quot;tool&quot;, &quot;content&quot;: &quot;meow&quot;, &quot;tool_call_id&quot;: &quot;1&quot;&#125;,</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">grade_documents(input)</span><br></pre></td></tr></table></figure>
<h3 id="é‡å†™é—®é¢˜">5. é‡å†™é—®é¢˜</h3>
<p>æ„å»º <code>rewrite_question</code> èŠ‚ç‚¹ã€‚</p>
<p>æ£€ç´¢å·¥å…·å¯èƒ½ä¼šè¿”å›æ½œåœ¨çš„ä¸ç›¸å…³æ–‡æ¡£ï¼Œè¿™è¡¨æ˜éœ€è¦æ”¹è¿›åŸå§‹ç”¨æˆ·é—®é¢˜ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†è°ƒç”¨
<code>rewrite_question</code> èŠ‚ç‚¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">REWRITE_PROMPT = (</span><br><span class="line">    &quot;Look at the input and try to reason about the underlying semantic intent / meaning.\n&quot;</span><br><span class="line">    &quot;Here is the initial question:&quot;</span><br><span class="line">    &quot;\n ------- \n&quot;</span><br><span class="line">    &quot;&#123;question&#125;&quot;</span><br><span class="line">    &quot;\n ------- \n&quot;</span><br><span class="line">    &quot;Formulate an improved question:&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">def rewrite_question(state: MessagesState):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    é‡å†™ç”¨æˆ·æœ€åˆçš„æé—®ï¼Œä»¥æ›´å¥½åœ°è¡¨è¾¾å…¶è¯­ä¹‰æ„å›¾ã€‚</span><br><span class="line">    </span><br><span class="line">    å‚æ•°:</span><br><span class="line">        state: åŒ…å«æ¶ˆæ¯å†å²çš„çŠ¶æ€å¯¹è±¡ï¼Œå…¶ä¸­ç¬¬ä¸€æ¡æ¶ˆæ¯æ˜¯ç”¨æˆ·åŸå§‹é—®é¢˜ã€‚</span><br><span class="line">    </span><br><span class="line">    è¿”å›:</span><br><span class="line">        ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«ä¸€æ¡æ–°çš„ç”¨æˆ·æ¶ˆæ¯ï¼Œå†…å®¹ä¸ºæ”¹å†™åçš„é—®é¢˜ã€‚</span><br><span class="line">        è¯¥æ¶ˆæ¯å°†ç”¨äºåç»­çš„æ£€ç´¢æ­¥éª¤ï¼Œä»¥æé«˜æ£€ç´¢ç»“æœçš„ç›¸å…³æ€§ã€‚</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    messages = state[&quot;messages&quot;]</span><br><span class="line">    question = messages[0].content  # è·å–ç”¨æˆ·æœ€åˆçš„æé—®</span><br><span class="line">    prompt = REWRITE_PROMPT.format(question=question)  # å°†é—®é¢˜å¡«å…¥æç¤ºæ¨¡æ¿</span><br><span class="line">    response = llm.invoke([&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt&#125;])  # è°ƒç”¨æ¨¡å‹ç”Ÿæˆæ”¹å†™åçš„é—®é¢˜</span><br><span class="line">    </span><br><span class="line">    # è¿”å›æ–°çš„æ¶ˆæ¯ç»“æ„ï¼Œå†…å®¹ä¸ºæ”¹å†™åçš„é—®é¢˜</span><br><span class="line">    return &#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: response.content&#125;]&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">input = &#123;</span><br><span class="line">    &quot;messages&quot;: convert_to_messages(</span><br><span class="line">        [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">                &quot;content&quot;: &quot;What does Lilian Weng say about types of reward hacking?&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">                &quot;content&quot;: &quot;&quot;,</span><br><span class="line">                &quot;tool_calls&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">                        &quot;name&quot;: &quot;retrieve_blog_posts&quot;,</span><br><span class="line">                        &quot;args&quot;: &#123;&quot;query&quot;: &quot;types of reward hacking&quot;&#125;,</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;&quot;role&quot;: &quot;tool&quot;, &quot;content&quot;: &quot;meow&quot;, &quot;tool_call_id&quot;: &quot;1&quot;&#125;,</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = rewrite_question(input)</span><br><span class="line">print(response[&quot;messages&quot;][-1][&quot;content&quot;])</span><br></pre></td></tr></table></figure>
<h3 id="ç”Ÿæˆç­”æ¡ˆ">6. ç”Ÿæˆç­”æ¡ˆ</h3>
<p>æ„å»º <code>generate_answer</code>
èŠ‚ç‚¹ï¼šå¦‚æœæˆ‘ä»¬é€šè¿‡äº†è¯„åˆ†å™¨çš„æ£€æŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®åŸå§‹é—®é¢˜å’Œæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">GENERATE_PROMPT = (</span><br><span class="line">    &quot;You are an assistant for question-answering tasks. &quot;</span><br><span class="line">    &quot;Use the following pieces of retrieved context to answer the question. &quot;</span><br><span class="line">    &quot;If you don&#x27;t know the answer, just say that you don&#x27;t know. &quot;</span><br><span class="line">    &quot;Use three sentences maximum and keep the answer concise.\n&quot;</span><br><span class="line">    &quot;Question: &#123;question&#125; \n&quot;</span><br><span class="line">    &quot;Context: &#123;context&#125;&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def generate_answer(state: MessagesState):</span><br><span class="line">    &quot;&quot;&quot;Generate an answer.&quot;&quot;&quot;</span><br><span class="line">    question = state[&quot;messages&quot;][0].content</span><br><span class="line">    context = state[&quot;messages&quot;][-1].content</span><br><span class="line">    prompt = GENERATE_PROMPT.format(question=question, context=context)</span><br><span class="line">    response = llm.invoke([&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: prompt&#125;])</span><br><span class="line">    return &#123;&quot;messages&quot;: [response]&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">input = &#123;</span><br><span class="line">    &quot;messages&quot;: convert_to_messages(</span><br><span class="line">        [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;role&quot;: &quot;user&quot;,</span><br><span class="line">                &quot;content&quot;: &quot;What does Lilian Weng say about types of reward hacking?&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">                &quot;content&quot;: &quot;&quot;,</span><br><span class="line">                &quot;tool_calls&quot;: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;id&quot;: &quot;1&quot;,</span><br><span class="line">                        &quot;name&quot;: &quot;retrieve_blog_posts&quot;,</span><br><span class="line">                        &quot;args&quot;: &#123;&quot;query&quot;: &quot;types of reward hacking&quot;&#125;,</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;role&quot;: &quot;tool&quot;,</span><br><span class="line">                &quot;content&quot;: &quot;reward hacking can be categorized into two types: environment or goal misspecification, and reward tampering&quot;,</span><br><span class="line">                &quot;tool_call_id&quot;: &quot;1&quot;,</span><br><span class="line">            &#125;,</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = generate_answer(input)</span><br><span class="line">response[&quot;messages&quot;][-1].pretty_print()</span><br></pre></td></tr></table></figure>
<h3 id="ç»„è£…å›¾è¡¨">7. ç»„è£…å›¾è¡¨</h3>
<p>ä»¥ <code>generate_query_or_respond</code> å¼€å¤´ï¼Œå¹¶ç¡®å®šæ˜¯å¦éœ€è¦è°ƒç”¨
<code>retriever_tool</code></p>
<p>ä½¿ç”¨ <code>tools_condition</code> è·³è½¬åˆ°ä¸‹ä¸€æ­¥ï¼š</p>
<ul>
<li>å¦‚æœ <code>generate_query_or_respond</code> è¿”å›
<code>tool_calls</code> ï¼Œè°ƒç”¨ <code>retriever_tool</code>
è·å–ä¸Šä¸‹æ–‡</li>
<li>å¦åˆ™ï¼Œç›´æ¥å›å¤ç”¨æˆ·</li>
</ul>
<p>å¯¹æ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹æŒ‰ä¸é—®é¢˜çš„ç›¸å…³æ€§ï¼ˆ <code>grade_documents</code>
ï¼‰è¿›è¡Œè¯„åˆ†ï¼Œå¹¶è·¯ç”±åˆ°ä¸‹ä¸€æ­¥ï¼š</p>
<ul>
<li>å¦‚æœä¸ç›¸å…³ï¼Œä½¿ç”¨ <code>rewrite_question</code>
é‡å†™é—®é¢˜ï¼Œç„¶åå†æ¬¡è°ƒç”¨ <code>generate_query_or_respond</code></li>
<li>å¦‚æœç›¸å…³ï¼Œè¯·ç»§ç»­åˆ° <code>generate_answer</code>
å¹¶ä½¿ç”¨æ£€ç´¢åˆ°çš„æ–‡æ¡£ä¸Šä¸‹æ–‡ç”Ÿæˆæœ€ç»ˆå“åº” <code>ToolMessage</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">from langgraph.graph import StateGraph, START, END</span><br><span class="line">from langgraph.prebuilt import ToolNode</span><br><span class="line">from langgraph.prebuilt import tools_condition</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºä¸€ä¸ªåŸºäºçŠ¶æ€å›¾ï¼ˆStateGraphï¼‰çš„æµç¨‹ï¼Œç”¨äºç®¡ç†å¯¹è¯æˆ–ä»»åŠ¡çš„æ‰§è¡Œæµç¨‹</span><br><span class="line">workflow = StateGraph(MessagesState)</span><br><span class="line"></span><br><span class="line"># å®šä¹‰æµç¨‹ä¸­å°†å¾ªç¯æ‰§è¡Œçš„å„ä¸ªèŠ‚ç‚¹</span><br><span class="line">workflow.add_node(generate_query_or_respond)          # åˆ¤æ–­æ˜¯ç”Ÿæˆæ£€ç´¢æŸ¥è¯¢è¿˜æ˜¯ç›´æ¥å›å¤ç”¨æˆ·</span><br><span class="line">workflow.add_node(&quot;retrieve&quot;, ToolNode([retriever_tool]))  # æ£€ç´¢èŠ‚ç‚¹ï¼šä½¿ç”¨æ£€ç´¢å·¥å…·ï¼ˆretriever_toolï¼‰ä»çŸ¥è¯†åº“ä¸­æŸ¥æ‰¾ç›¸å…³æ–‡æ¡£</span><br><span class="line">workflow.add_node(rewrite_question)                  # é‡å†™é—®é¢˜èŠ‚ç‚¹ï¼šå½“æ£€ç´¢ç»“æœä¸ç›¸å…³æ—¶ï¼Œä¼˜åŒ–å¹¶é‡å†™ç”¨æˆ·çš„é—®é¢˜</span><br><span class="line">workflow.add_node(generate_answer)                   # ç”Ÿæˆç­”æ¡ˆèŠ‚ç‚¹ï¼šåŸºäºæ£€ç´¢åˆ°çš„ä¿¡æ¯ç”Ÿæˆæœ€ç»ˆå›ç­”</span><br><span class="line"></span><br><span class="line"># è®¾ç½®æµç¨‹çš„èµ·å§‹ç‚¹ï¼šä» `generate_query_or_respond` èŠ‚ç‚¹å¼€å§‹</span><br><span class="line">workflow.add_edge(START, &quot;generate_query_or_respond&quot;)</span><br><span class="line"></span><br><span class="line"># æ·»åŠ æ¡ä»¶è¾¹ï¼šå†³å®šæ˜¯å¦è¿›è¡Œæ–‡æ¡£æ£€ç´¢</span><br><span class="line">workflow.add_conditional_edges(</span><br><span class="line">    &quot;generate_query_or_respond&quot;,</span><br><span class="line">    # ä½¿ç”¨ `tools_condition` å‡½æ•°åˆ¤æ–­ LLM çš„è¾“å‡ºæ„å›¾ï¼š</span><br><span class="line">    # å¦‚æœ LLM å†³å®šè°ƒç”¨ `retriever_tool` å·¥å…·ï¼Œåˆ™è¿›å…¥æ£€ç´¢ï¼›å¦‚æœé€‰æ‹©ç›´æ¥å›å¤ï¼Œåˆ™ç»“æŸæµç¨‹</span><br><span class="line">    tools_condition,</span><br><span class="line">    &#123;</span><br><span class="line">        # å°†æ¡ä»¶åˆ¤æ–­ç»“æœæ˜ å°„åˆ°å›¾ä¸­çš„å…·ä½“èŠ‚ç‚¹</span><br><span class="line">        &quot;tools&quot;: &quot;retrieve&quot;,   # è‹¥éœ€è°ƒç”¨å·¥å…·ï¼Œåˆ™è·³è½¬åˆ°æ£€ç´¢èŠ‚ç‚¹</span><br><span class="line">        END: END               # è‹¥æ— éœ€è°ƒç”¨å·¥å…·ï¼ˆå³å¯ä»¥ç›´æ¥å›ç­”ï¼‰ï¼Œåˆ™ç»“æŸæµç¨‹</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># åœ¨ `retrieve` èŠ‚ç‚¹æ‰§è¡Œåï¼Œæ ¹æ®æ–‡æ¡£ç›¸å…³æ€§åˆ¤æ–­ä¸‹ä¸€æ­¥æ“ä½œ</span><br><span class="line">workflow.add_conditional_edges(</span><br><span class="line">    &quot;retrieve&quot;,</span><br><span class="line">    # è°ƒç”¨ `grade_documents` å‡½æ•°è¯„ä¼°æ£€ç´¢åˆ°çš„æ–‡æ¡£æ˜¯å¦ä¸é—®é¢˜ç›¸å…³</span><br><span class="line">    grade_documents,</span><br><span class="line">    # æ ¹æ®è¯„åˆ†ç»“æœå†³å®šæµå‘ï¼š</span><br><span class="line">    # - å¦‚æœç›¸å…³ï¼Œè¿›å…¥ `generate_answer`</span><br><span class="line">    # - å¦‚æœä¸ç›¸å…³ï¼Œè¿›å…¥ `rewrite_question`</span><br><span class="line">    # ï¼ˆè¯¥é€»è¾‘åœ¨ `grade_documents` å‡½æ•°ä¸­è¿”å› &quot;generate_answer&quot; æˆ– &quot;rewrite_question&quot;ï¼‰</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># æ·»åŠ å›ºå®šè¾¹ï¼šç”Ÿæˆç­”æ¡ˆåæµç¨‹ç»“æŸ</span><br><span class="line">workflow.add_edge(&quot;generate_answer&quot;, END)</span><br><span class="line"></span><br><span class="line"># é‡å†™é—®é¢˜åï¼Œå›åˆ°åˆå§‹èŠ‚ç‚¹é‡æ–°åˆ¤æ–­æ˜¯å¦éœ€è¦æ£€ç´¢</span><br><span class="line">workflow.add_edge(&quot;rewrite_question&quot;, &quot;generate_query_or_respond&quot;)</span><br><span class="line"></span><br><span class="line"># ç¼–è¯‘æ•´ä¸ªå·¥ä½œæµï¼Œç”Ÿæˆå¯æ‰§è¡Œçš„å›¾ç»“æ„</span><br><span class="line">graph = workflow.compile()</span><br></pre></td></tr></table></figure>
<figure>
<img src="/2025/08/19/%E5%AD%A6%E4%B9%A0/rag/agentic-rag/image-20250826170834571.png" alt="image-20250826170834571">
<figcaption aria-hidden="true">image-20250826170834571</figcaption>
</figure>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://langchain-ai.github.io/langgraph/tutorials/rag/langgraph_agentic_rag/#2-create-a-retriever-tool">ã€ŠAgentic
RAGã€‹ â€” Agentic RAG</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/18/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/Multi-Agent%20Workflows%E5%AE%9E%E6%88%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/18/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/Multi-Agent%20Workflows%E5%AE%9E%E6%88%98/" class="post-title-link" itemprop="url">Multi-Agent Workflowsæ¢³ç†ä¸å®æˆ˜</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-18 00:00:00" itemprop="dateCreated datePublished" datetime="2025-08-18T00:00:00+08:00">2025-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-08-28 15:13:56" itemprop="dateModified" datetime="2025-08-28T15:13:56+08:00">2025-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/agent%E5%AE%9E%E6%88%98/" itemprop="url" rel="index"><span itemprop="name">agentå®æˆ˜</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="å‰è¨€">å‰è¨€</h3>
<p>ä»£ç è§<a target="_blank" rel="noopener" href="https://github.com/zxj-2023/learn-rag-langchain/tree/main/multi-agent">learn-rag-langchain/multi-agent
at main Â· zxj-2023/learn-rag-langchain</a></p>
<h3 id="ä»€ä¹ˆæ˜¯å¤šæ™ºèƒ½ä½“">ä»€ä¹ˆæ˜¯å¤šæ™ºèƒ½ä½“</h3>
<p>å½“æˆ‘ä»¬è°ˆè®ºâ€å¤šæ™ºèƒ½ä½“â€æ—¶ï¼Œæˆ‘ä»¬æŒ‡çš„æ˜¯ç”±llmé©±åŠ¨çš„å¤šä¸ªç‹¬ç«‹çš„agentä»¥<strong>ç‰¹å®šæ–¹å¼</strong>è¿æ¥åœ¨ä¸€èµ·ã€‚</p>
<p>æ¯ä¸ªagentå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„æç¤ºã€LLMã€å·¥å…·å’Œå…¶ä»–è‡ªå®šä¹‰ä»£ç ï¼Œä»¥æœ€ä½³æ–¹å¼ä¸å…¶ä»–æ™ºèƒ½ä½“åä½œã€‚</p>
<p>è¿™ç§æ€ç»´æ–¹å¼éå¸¸é€‚åˆç”¨å›¾æ¥è¡¨ç¤ºï¼Œå°±åƒ <code>langgraph</code>
æ‰€æä¾›çš„é‚£æ ·ã€‚åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éƒ½æ˜¯å›¾ä¸­çš„<strong>ä¸€ä¸ªèŠ‚ç‚¹</strong>ï¼Œè€Œå®ƒä»¬ä¹‹é—´çš„<strong>è¿æ¥åˆ™è¡¨ç¤ºä¸ºä¸€æ¡è¾¹</strong>ã€‚<strong>æ§åˆ¶æµç”±è¾¹ç®¡ç†</strong>ï¼Œå®ƒä»¬é€šè¿‡å‘å›¾çš„çŠ¶æ€ä¸­<strong>æ·»åŠ ä¿¡æ¯æ¥è¿›è¡Œé€šä¿¡</strong>ã€‚</p>
<h3 id="å¤šæ™ºèƒ½ä½“æ¶æ„æ¢³ç†">å¤šæ™ºèƒ½ä½“æ¶æ„æ¢³ç†</h3>
<p>langgraphç»™æˆ‘ä»¬æä¾›äº†å‡ ç§<strong>å¤šæ™ºèƒ½ä½“æ¶æ„</strong></p>
<figure>
<img src="/2025/08/18/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/Multi-Agent%20Workflows%E5%AE%9E%E6%88%98/image-20250818163359517.png" alt="image-20250818163359517">
<figcaption aria-hidden="true">image-20250818163359517</figcaption>
</figure>
<p><strong>Network</strong>:
æ¯ä¸ªæ™ºèƒ½ä½“å¯ä»¥ä¸å…¶ä»–æ‰€æœ‰æ™ºèƒ½ä½“é€šä¿¡ã€‚ä»»ä½•æ™ºèƒ½ä½“éƒ½å¯ä»¥å†³å®šä¸‹ä¸€æ­¥è°ƒç”¨å“ªä¸ªå…¶ä»–æ™ºèƒ½ä½“ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://langchain-ai.github.io/langgraph/tutorials/multi_agent/multi-agent-collaboration/">Multi-agent
network</a></p>
<p><strong>Supervisor</strong>ï¼šæ¯ä¸ªæ™ºèƒ½ä½“ä¸ä¸€ä¸ªå•ä¸€çš„ç›‘ç£è€…æ™ºèƒ½ä½“é€šä¿¡ã€‚ç›‘ç£è€…æ™ºèƒ½ä½“å†³å®šä¸‹ä¸€æ­¥åº”è¯¥è°ƒç”¨å“ªä¸ªæ™ºèƒ½ä½“ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://langchain-ai.github.io/langgraph/tutorials/multi_agent/agent_supervisor/">ä»£ç†ç›‘ç£è€…
â€” Agent Supervisor</a></p>
<p><strong>Hierarchical</strong>:
ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªå…·æœ‰ç›‘ç£è€…ç›‘ç£è€…çš„å¤šä»£ç†ç³»ç»Ÿã€‚è¿™æ˜¯ç›‘ç£è€…æ¶æ„çš„æ³›åŒ–ï¼Œå¹¶å…è®¸æ›´å¤æ‚çš„æ§åˆ¶æµç¨‹ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://langchain-ai.github.io/langgraph/tutorials/multi_agent/hierarchical_agent_teams/">å±‚çº§ä»£ç†å›¢é˜Ÿ
â€” Hierarchical Agent Teams</a></p>
<p><strong>Custom multi-agent workflow</strong>:
æ¯ä¸ªä»£ç†åªä¸ä»£ç†å­é›†é€šä¿¡ã€‚æµç¨‹çš„éƒ¨åˆ†æ˜¯ç¡®å®šçš„ï¼Œåªæœ‰ä¸€äº›ä»£ç†å¯ä»¥å†³å®šä¸‹ä¸€æ­¥è°ƒç”¨å“ªäº›å…¶ä»–ä»£ç†ã€‚</p>
<h3 id="agent-supervisor">Agent Supervisor</h3>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œä½ å°†æ„å»ºä¸€ä¸ªåŒ…å«ä¸¤ä¸ªä»£ç†çš„ç›‘ç£è€…ç³»ç»Ÿâ€”â€”ä¸€ä¸ªç ”ç©¶ä¸“å®¶å’Œä¸€ä¸ªæ•°å­¦ä¸“å®¶ã€‚</p>
<h4 id="ç¯å¢ƒ">ç¯å¢ƒ</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U langgraph langgraph-supervisor langchain-tavily &quot;langchain[openai]&quot;</span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºå·¥ä½œä»£ç†">1. åˆ›å»ºå·¥ä½œä»£ç†</h4>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºæˆ‘ä»¬çš„ä¸“ä¸šå·¥ä½œä»£ç†â€”â€”ç ”ç©¶ä»£ç†å’Œæ•°å­¦ä»£ç†ï¼š</p>
<ul>
<li>ç ”ç©¶ä»£ç†å°†ä½¿ç”¨ Tavily API è®¿é—®ç½‘ç»œæœç´¢å·¥å…· <a target="_blank" rel="noopener" href="https://www.tavily.com/">Tavily - The Web Access Layer for AI
Agents</a></li>
<li>æ•°å­¦ä»£ç†å°†è®¿é—®ç®€å•çš„æ•°å­¦å·¥å…·ï¼ˆ <code>add</code> ,
<code>multiply</code> , <code>divide</code> ï¼‰</li>
</ul>
<h5 id="ç ”ç©¶ä»£ç†">ç ”ç©¶ä»£ç†</h5>
<p>å¯¹äºç½‘ç»œæœç´¢ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>TavilySearch</code> å·¥å…·æ¥è‡ª
<code>langchain-tavily</code> :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">from langchain_tavily import TavilySearch</span><br><span class="line"></span><br><span class="line">web_search = TavilySearch(max_results=3,tavily_api_key=&quot;tvly-dev-&quot;)</span><br><span class="line">web_search_results = web_search.invoke(&quot;å—äº¬åœ¨å“ª&quot;)</span><br><span class="line"></span><br><span class="line">print(web_search_results[&quot;results&quot;][0][&quot;content&quot;])</span><br></pre></td></tr></table></figure>
<p>ä¸ºäº†åˆ›å»ºå•ä¸ªå·¥ä½œä»£ç†ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ LangGraph çš„<a target="_blank" rel="noopener" href="https://langchain-ai.github.io/langgraph/agents/agents/">é¢„æ„å»ºä»£ç†</a>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">from langgraph.prebuilt import create_react_agent</span><br><span class="line">from langchain_openai import ChatOpenAI</span><br><span class="line"></span><br><span class="line">llm=ChatOpenAI(</span><br><span class="line">    model=&quot;qwen3-235b-a22b-thinking-2507&quot;,</span><br><span class="line">    api_key=&quot;sk-&quot;,</span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">research_agent = create_react_agent(</span><br><span class="line">    model=llm,</span><br><span class="line">    tools=[web_search],</span><br><span class="line">    prompt=(</span><br><span class="line">        &quot;ä½ æ˜¯ä¸€ä¸ªç ”ç©¶ä»£ç†ã€‚\n\næŒ‡ä»¤ï¼š\n- ä»…ååŠ©ä¸ç ”ç©¶ç›¸å…³çš„ä»»åŠ¡ï¼Œä¸å¾—è¿›è¡Œä»»ä½•æ•°å­¦è®¡ç®—\n- å®Œæˆä»»åŠ¡åï¼Œç›´æ¥å‘ä¸»ç®¡å›å¤\n- ä»…å›å¤ä½ çš„å·¥ä½œç»“æœï¼Œä¸å¾—åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ã€‚&quot;</span><br><span class="line">    ),</span><br><span class="line">    name=&quot;research_agent&quot;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬è¿è¡Œä»£ç†æ¥éªŒè¯å®ƒçš„è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚<strong>æˆ‘ä»¬å°†ä½¿ç”¨</strong>
<code>pretty_print_messages</code>
<strong>è¾…åŠ©å·¥å…·æ¥ç¾è§‚åœ°æ¸²æŸ“æµå¼ä»£ç†è¾“å‡º</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">from langchain_core.messages import convert_to_messages</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def pretty_print_message(message, indent=False):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    ç¾åŒ–æ‰“å°å•æ¡æ¶ˆæ¯</span><br><span class="line">    </span><br><span class="line">    Args:</span><br><span class="line">        message: è¦æ‰“å°çš„æ¶ˆæ¯å¯¹è±¡</span><br><span class="line">        indent: æ˜¯å¦éœ€è¦ç¼©è¿›æ‰“å°</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # å°†æ¶ˆæ¯è½¬æ¢ä¸ºç¾è§‚çš„HTMLæ ¼å¼è¡¨ç¤º</span><br><span class="line">    pretty_message = message.pretty_repr(html=True)</span><br><span class="line">    if not indent:</span><br><span class="line">        # å¦‚æœä¸éœ€è¦ç¼©è¿›ï¼Œç›´æ¥æ‰“å°</span><br><span class="line">        print(pretty_message)</span><br><span class="line">        return</span><br><span class="line"></span><br><span class="line">    # å¦‚æœéœ€è¦ç¼©è¿›ï¼Œä¸ºæ¯ä¸€è¡Œæ·»åŠ åˆ¶è¡¨ç¬¦å‰ç¼€</span><br><span class="line">    indented = &quot;\n&quot;.join(&quot;\t&quot; + c for c in pretty_message.split(&quot;\n&quot;))</span><br><span class="line">    print(indented)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def pretty_print_messages(update, last_message=False):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    ç¾åŒ–æ‰“å°æ¶ˆæ¯æ›´æ–°</span><br><span class="line">    </span><br><span class="line">    Args:</span><br><span class="line">        update: åŒ…å«æ¶ˆæ¯æ›´æ–°çš„æ•°æ®ç»“æ„</span><br><span class="line">        last_message: æ˜¯å¦åªæ‰“å°æœ€åä¸€æ¡æ¶ˆæ¯</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    is_subgraph = False  # æ ‡è®°æ˜¯å¦ä¸ºå­å›¾æ›´æ–°</span><br><span class="line">    </span><br><span class="line">    # æ£€æŸ¥æ›´æ–°æ˜¯å¦ä¸ºå…ƒç»„æ ¼å¼ï¼ˆåŒ…å«å‘½åç©ºé—´ä¿¡æ¯ï¼‰</span><br><span class="line">    if isinstance(update, tuple):</span><br><span class="line">        ns, update = update</span><br><span class="line">        # å¦‚æœå‘½åç©ºé—´ä¸ºç©ºï¼Œè·³è¿‡çˆ¶å›¾æ›´æ–°çš„æ‰“å°</span><br><span class="line">        if len(ns) == 0:</span><br><span class="line">            return</span><br><span class="line"></span><br><span class="line">        # æå–å›¾IDå¹¶æ‰“å°å­å›¾æ›´æ–°ä¿¡æ¯</span><br><span class="line">        graph_id = ns[-1].split(&quot;:&quot;)[0]</span><br><span class="line">        print(f&quot;æ¥è‡ªå­å›¾ &#123;graph_id&#125; çš„æ›´æ–°:&quot;)</span><br><span class="line">        print(&quot;\n&quot;)</span><br><span class="line">        is_subgraph = True</span><br><span class="line"></span><br><span class="line">    # éå†æ¯ä¸ªèŠ‚ç‚¹çš„æ›´æ–°</span><br><span class="line">    for node_name, node_update in update.items():</span><br><span class="line">        # æ„é€ æ›´æ–°æ ‡ç­¾</span><br><span class="line">        update_label = f&quot;æ¥è‡ªèŠ‚ç‚¹ &#123;node_name&#125; çš„æ›´æ–°:&quot;</span><br><span class="line">        if is_subgraph:</span><br><span class="line">            # å¦‚æœæ˜¯å­å›¾ï¼Œæ·»åŠ ç¼©è¿›</span><br><span class="line">            update_label = &quot;\t&quot; + update_label</span><br><span class="line"></span><br><span class="line">        print(update_label)</span><br><span class="line">        print(&quot;\n&quot;)</span><br><span class="line"></span><br><span class="line">        # å°†èŠ‚ç‚¹æ›´æ–°ä¸­çš„æ¶ˆæ¯è½¬æ¢ä¸ºæ¶ˆæ¯å¯¹è±¡åˆ—è¡¨</span><br><span class="line">        messages = convert_to_messages(node_update[&quot;messages&quot;])</span><br><span class="line">        # å¦‚æœåªè¦æ±‚æœ€åä¸€æ¡æ¶ˆæ¯ï¼Œåˆ™æˆªå–æœ€åä¸€æ¡</span><br><span class="line">        if last_message:</span><br><span class="line">            messages = messages[-1:]</span><br><span class="line"></span><br><span class="line">        # æ‰“å°æ¯æ¡æ¶ˆæ¯</span><br><span class="line">        for m in messages:</span><br><span class="line">            pretty_print_message(m, indent=is_subgraph)</span><br><span class="line">        print(&quot;\n&quot;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for chunk in research_agent.stream(</span><br><span class="line">    &#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;å—äº¬åœ¨å“ª?&quot;&#125;]&#125;</span><br><span class="line">):</span><br><span class="line">    pretty_print_messages(chunk)</span><br></pre></td></tr></table></figure>
<h5 id="æ•°å­¦ä»£ç†">æ•°å­¦ä»£ç†</h5>
<p>å¯¹äºæ•°å­¦ä»£ç†å·¥å…·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨çº¯ Python å‡½æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">def add(a: float, b: float):</span><br><span class="line">    &quot;&quot;&quot;å°†ä¸¤ä¸ªæ•°å­—ç›¸åŠ ã€‚&quot;&quot;&quot;</span><br><span class="line">    return a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def multiply(a: float, b: float):</span><br><span class="line">    &quot;&quot;&quot;å°†ä¸¤ä¸ªæ•°å­—ç›¸ä¹˜ã€‚&quot;&quot;&quot;</span><br><span class="line">    return a * b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def divide(a: float, b: float):</span><br><span class="line">    &quot;&quot;&quot;å°†ä¸¤ä¸ªæ•°å­—ç›¸é™¤ã€‚&quot;&quot;&quot;</span><br><span class="line">    return a / b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">math_agent = create_react_agent(</span><br><span class="line">    model=llm,</span><br><span class="line">    tools=[add, multiply, divide],</span><br><span class="line">    prompt=(</span><br><span class="line">        &quot;ä½ æ˜¯ä¸€ä¸ªæ•°å­¦ä»£ç†ã€‚\n\n&quot;</span><br><span class="line">        &quot;æŒ‡ä»¤ï¼š\n&quot;</span><br><span class="line">        &quot;- ä»…ååŠ©å¤„ç†æ•°å­¦ç›¸å…³ä»»åŠ¡\n&quot;</span><br><span class="line">        &quot;- å®Œæˆä»»åŠ¡åï¼Œç›´æ¥å›å¤ç»™ä¸»ç®¡\n&quot;</span><br><span class="line">        &quot;- ä»…å›å¤ä½ çš„å·¥ä½œç»“æœï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—ã€‚&quot;</span><br><span class="line">    ),</span><br><span class="line">    name=&quot;math_agent&quot;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>è®©æˆ‘ä»¬è¿è¡Œæ•°å­¦ä»£ç†ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for chunk in math_agent.stream(</span><br><span class="line">    &#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;what&#x27;s (3 + 5) x 7&quot;&#125;]&#125;</span><br><span class="line">):</span><br><span class="line">    pretty_print_messages(chunk)</span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºç›‘ç£è€…-langgraph-supervisor">2.åˆ›å»ºç›‘ç£è€…
<code>langgraph-supervisor</code></h4>
<p>ä¸ºäº†å®ç°æˆ‘ä»¬çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œæˆ‘ä»¬å°†ä½¿ç”¨é¢„æ„å»ºçš„
<code>langgraph-supervisor</code> åº“ä¸­çš„ <a target="_blank" rel="noopener" href="https://langchain-ai.github.io/langgraph/reference/supervisor/#langgraph_supervisor.supervisor.create_supervisor"><code>create_supervisor</code></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from langgraph_supervisor import create_supervisor</span><br><span class="line">from langchain.chat_models import init_chat_model</span><br><span class="line"></span><br><span class="line">supervisor = create_supervisor(</span><br><span class="line">    model=llm,</span><br><span class="line">    agents=[research_agent, math_agent],</span><br><span class="line">    prompt=(</span><br><span class="line">        &quot;ä½ æ˜¯ä¸€ä¸ªç®¡ç†ä¸¤ä¸ªä»£ç†çš„ä¸»ç®¡ï¼š\n&quot;</span><br><span class="line">        &quot;- ä¸€ä¸ªç ”ç©¶ä»£ç†ã€‚å°†ç ”ç©¶ç›¸å…³ä»»åŠ¡åˆ†é…ç»™è¿™ä¸ªä»£ç†\n&quot;</span><br><span class="line">        &quot;- ä¸€ä¸ªæ•°å­¦ä»£ç†ã€‚å°†æ•°å­¦ç›¸å…³ä»»åŠ¡åˆ†é…ç»™è¿™ä¸ªä»£ç†\n&quot;</span><br><span class="line">        &quot;ä¸€æ¬¡åªåˆ†é…å·¥ä½œç»™ä¸€ä¸ªä»£ç†ï¼Œä¸è¦å¹¶è¡Œè°ƒç”¨ä»£ç†ã€‚\n&quot;</span><br><span class="line">        &quot;ä¸è¦è‡ªå·±åšä»»ä½•å·¥ä½œã€‚&quot;</span><br><span class="line">    ),</span><br><span class="line">    add_handoff_back_messages=True,</span><br><span class="line">    output_mode=&quot;full_history&quot;,</span><br><span class="line">).compile()</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from IPython.display import display, Image</span><br><span class="line"></span><br><span class="line">display(Image(supervisor.get_graph().draw_mermaid_png()))</span><br></pre></td></tr></table></figure>
<figure>
<img src="/2025/08/18/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/Multi-Agent%20Workflows%E5%AE%9E%E6%88%98/image-20250819113009108.png" alt="image-20250819113009108">
<figcaption aria-hidden="true">image-20250819113009108</figcaption>
</figure>
<p>ç°åœ¨è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªéœ€è¦ä¸¤ä¸ªä»£ç†çš„æŸ¥è¯¢æ¥è¿è¡Œå®ƒï¼š</p>
<p>ç ”ç©¶ä»£ç†å°†æŸ¥æ‰¾å¿…è¦çš„ GDP ä¿¡æ¯ï¼›æ•°å­¦ä»£ç†å°†æ‰§è¡Œé™¤æ³•ä»¥æ‰¾åˆ°çº½çº¦å· GDP
çš„ç™¾åˆ†æ¯”ï¼Œå¦‚æ‰€è¯·æ±‚</p>
<h4 id="ä»å¤´åˆ›å»ºç›‘ç£è€…">3.ä»å¤´åˆ›å»ºç›‘ç£è€…</h4>
<p>ç°åœ¨è®©æˆ‘ä»¬ä»å¤´å®ç°è¿™ä¸ªå¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚æˆ‘ä»¬éœ€è¦ï¼š</p>
<ol type="1">
<li>è®¾ç½®ä¸»ç®¡å¦‚ä½•ä¸å„ä¸ªä»£ç†è¿›è¡Œæ²Ÿé€š</li>
<li>åˆ›å»ºç›‘ç£ä»£ç†</li>
<li>å°†ç›‘ç£ä»£ç†å’Œå·¥ä½œä»£ç†ç»„åˆæˆä¸€ä¸ªå¤šä»£ç†å›¾ã€‚</li>
</ol>
<h5 id="è®¾ç½®ä»£ç†é€šä¿¡">è®¾ç½®ä»£ç†é€šä¿¡</h5>
<p>æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ç§æ–¹å¼ï¼Œè®©ç›‘ç£ä»£ç†èƒ½å¤Ÿä¸å·¥ä½œä»£ç†è¿›è¡Œé€šä¿¡ã€‚åœ¨å¤šä»£ç†æ¶æ„ä¸­ï¼Œå®ç°è¿™ä¸€åŠŸèƒ½çš„ä¸€ç§å¸¸è§æ–¹æ³•æ˜¯ä½¿ç”¨<strong>handoffs</strong>ï¼Œå³ä¸€ä¸ªä»£ç†å°†æ§åˆ¶æƒäº¤ç»™å¦ä¸€ä¸ªä»£ç†ã€‚äº¤æ¥å…è®¸ä½ æŒ‡å®šï¼š</p>
<ul>
<li><strong>destination</strong>:è¦è½¬ç§»åˆ°çš„ç›®æ ‡ä»£ç†</li>
<li><strong>payload</strong>:è¦ä¼ é€’ç»™è¯¥æ™ºèƒ½ä½“çš„ä¿¡æ¯</li>
</ul>
<p>æˆ‘ä»¬å°†é€šè¿‡<strong>handoff
tools</strong>ï¼ˆè½¬æ¥å·¥å…·ï¼‰å®ç°è½¬æ¥ï¼Œå¹¶å°†è¿™äº›å·¥å…·äº¤ç»™ç›‘ç£ä»£ç†ï¼šå½“ç›‘ç£ä»£ç†è°ƒç”¨è¿™äº›å·¥å…·æ—¶ï¼Œå®ƒå°†æ§åˆ¶æƒè½¬äº¤ç»™å·¥ä½œä»£ç†ï¼Œå¹¶å°†å®Œæ•´æ¶ˆæ¯å†å²ä¼ é€’ç»™è¯¥ä»£ç†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">from typing import Annotated</span><br><span class="line">from langchain_core.tools import tool, InjectedToolCallId</span><br><span class="line">from langgraph.prebuilt import InjectedState</span><br><span class="line">from langgraph.graph import StateGraph, START, MessagesState</span><br><span class="line">from langgraph.types import Command</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def create_handoff_tool(*, agent_name: str, description: str | None = None):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    åˆ›å»ºä¸€ä¸ªâ€œäº¤æ¥â€å·¥å…·å‡½æ•°ï¼Œç”¨äºåœ¨ LangGraph çš„ Supervisor-Worker æ¶æ„ä¸­</span><br><span class="line">    æŠŠå½“å‰å¯¹è¯çŠ¶æ€ç§»äº¤ç»™æŒ‡å®šåç§°çš„å­ Agentã€‚</span><br><span class="line"></span><br><span class="line">    å‚æ•°</span><br><span class="line">    ----</span><br><span class="line">    agent_name : str</span><br><span class="line">        ç›®æ ‡å­ Agent çš„åç§°ï¼Œå¿…é¡»ä¸ Supervisor å›¾ä¸­æ³¨å†Œçš„èŠ‚ç‚¹åä¸€è‡´ã€‚</span><br><span class="line">    description : str | None</span><br><span class="line">        å·¥å…·çš„æè¿°æ–‡æœ¬ã€‚å¦‚æœä¸º Noneï¼Œåˆ™ä½¿ç”¨é»˜è®¤æè¿° &quot;Ask &#123;agent_name&#125; for help.&quot;ã€‚</span><br><span class="line"></span><br><span class="line">    è¿”å›</span><br><span class="line">    ----</span><br><span class="line">    handoff_tool : Callable</span><br><span class="line">        ä¸€ä¸ªå·²ç”¨ @tool è£…é¥°çš„å‡½æ•°ï¼Œå¯ç›´æ¥æ³¨å…¥åˆ° Supervisor çš„å·¥å…·åˆ—è¡¨ã€‚</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    # åŠ¨æ€ç”Ÿæˆå·¥å…·åï¼Œä¾‹å¦‚ agent_name=&quot;math_agent&quot; -&gt; &quot;transfer_to_math_agent&quot;</span><br><span class="line">    name = f&quot;transfer_to_&#123;agent_name&#125;&quot;</span><br><span class="line"></span><br><span class="line">    # å¦‚æœè°ƒç”¨è€…æ²¡æœ‰æä¾›æè¿°ï¼Œåˆ™ä½¿ç”¨é»˜è®¤æè¿°</span><br><span class="line">    description = description or f&quot;Ask &#123;agent_name&#125; for help.&quot;</span><br><span class="line"></span><br><span class="line">    # ç”¨ LangGraph çš„ @tool è£…é¥°å™¨æ³¨å†Œå·¥å…·</span><br><span class="line">    @tool(name, description=description)</span><br><span class="line">    def handoff_tool(</span><br><span class="line">        state: Annotated[MessagesState, InjectedState],</span><br><span class="line">        tool_call_id: Annotated[str, InjectedToolCallId],</span><br><span class="line">    ) -&gt; Command:</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        å®é™…æ‰§è¡Œäº¤æ¥é€»è¾‘çš„å·¥å…·å‡½æ•°ã€‚</span><br><span class="line"></span><br><span class="line">        å‚æ•°</span><br><span class="line">        ----</span><br><span class="line">        state : MessagesState</span><br><span class="line">            å½“å‰å¯¹è¯çŠ¶æ€ï¼Œç”± LangGraph æ³¨å…¥ã€‚</span><br><span class="line">        tool_call_id : str</span><br><span class="line">            æœ¬æ¬¡å·¥å…·è°ƒç”¨çš„å”¯ä¸€ IDï¼Œç”± LangGraph æ³¨å…¥ã€‚</span><br><span class="line"></span><br><span class="line">        è¿”å›</span><br><span class="line">        ----</span><br><span class="line">        Command</span><br><span class="line">            ä¸€ä¸ª LangGraph Command å¯¹è±¡ï¼Œå‘Šè¯‰æ¡†æ¶ï¼š</span><br><span class="line">            - goto=agent_name        : è·³è½¬åˆ°å“ªä¸ªå­ Agent</span><br><span class="line">            - update                 : æ›´æ–°åçš„çŠ¶æ€</span><br><span class="line">            - graph=Command.PARENT   : åœ¨çˆ¶å›¾ï¼ˆSupervisorï¼‰ä½œç”¨åŸŸå†…æ‰§è¡Œ</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        # æ„é€ ä¸€æ¡å·¥å…·æ¶ˆæ¯ï¼Œè®°å½•äº¤æ¥åŠ¨ä½œ</span><br><span class="line">        tool_message = &#123;</span><br><span class="line">            &quot;role&quot;: &quot;tool&quot;,</span><br><span class="line">            &quot;content&quot;: f&quot;Successfully transferred to &#123;agent_name&#125;&quot;,</span><br><span class="line">            &quot;name&quot;: name,</span><br><span class="line">            &quot;tool_call_id&quot;: tool_call_id,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # ä½¿ç”¨ Command æŠŠå¯¹è¯çŠ¶æ€è¿åŒæ–°æ¶ˆæ¯ä¸€èµ·å‘é€åˆ°ç›®æ ‡ Agent</span><br><span class="line">        return Command(</span><br><span class="line">            goto=agent_name,</span><br><span class="line">            update=&#123;**state, &quot;messages&quot;: state[&quot;messages&quot;] + [tool_message]&#125;,</span><br><span class="line">            graph=Command.PARENT,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    # è¿”å›å·²è£…é¥°çš„å·¥å…·å‡½æ•°ï¼Œä¾› Supervisor æ·»åŠ è¿› tools åˆ—è¡¨</span><br><span class="line">    return handoff_tool</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># åˆ›å»ºç ”ç©¶ä»£ç†çš„äº¤æ¥å·¥å…·</span><br><span class="line">assign_to_research_agent = create_handoff_tool(</span><br><span class="line">    agent_name=&quot;research_agent&quot;,</span><br><span class="line">    description=&quot;Assign task to a researcher agent.&quot;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºæ•°å­¦ä»£ç†çš„äº¤æ¥å·¥å…·</span><br><span class="line">assign_to_math_agent = create_handoff_tool(</span><br><span class="line">    agent_name=&quot;math_agent&quot;,</span><br><span class="line">    description=&quot;Assign task to a math agent.&quot;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="åˆ›å»ºç›‘ç£ä»£ç†">åˆ›å»ºç›‘ç£ä»£ç†</h5>
<p>ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨åˆšåˆšå®šä¹‰çš„äº¤æ¥å·¥å…·æ¥åˆ›å»ºç›‘ç£ä»£ç†ã€‚æˆ‘ä»¬å°†ä½¿ç”¨é¢„æ„å»ºçš„
<code>create_react_agent</code> :</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">supervisor_agent = create_react_agent(</span><br><span class="line">    model=llm,</span><br><span class="line">    tools=[assign_to_research_agent, assign_to_math_agent],</span><br><span class="line">    prompt=(</span><br><span class="line">        &quot;ä½ æ˜¯ä¸€ä¸ªç®¡ç†ä¸¤ä¸ªä»£ç†çš„ä¸»ç®¡ï¼š\n&quot;</span><br><span class="line">        &quot;- ä¸€ä¸ªç ”ç©¶ä»£ç†ã€‚å°†ç ”ç©¶ç›¸å…³ä»»åŠ¡åˆ†é…ç»™è¿™ä¸ªä»£ç†\n&quot;</span><br><span class="line">        &quot;- ä¸€ä¸ªæ•°å­¦ä»£ç†ã€‚å°†æ•°å­¦ç›¸å…³ä»»åŠ¡åˆ†é…ç»™è¿™ä¸ªä»£ç†\n&quot;</span><br><span class="line">        &quot;ä¸€æ¬¡åªåˆ†é…å·¥ä½œç»™ä¸€ä¸ªä»£ç†ï¼Œä¸è¦å¹¶è¡Œè°ƒç”¨ä»£ç†ã€‚\n&quot;</span><br><span class="line">        &quot;ä¸è¦è‡ªå·±åšä»»ä½•å·¥ä½œã€‚&quot;</span><br><span class="line">    ),</span><br><span class="line">    name=&quot;supervisor&quot;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="åˆ›å»ºå¤šæ™ºèƒ½ä½“å›¾">åˆ›å»ºå¤šæ™ºèƒ½ä½“å›¾</h5>
<p>å°†è¿™äº›å†…å®¹æ•´åˆèµ·æ¥ï¼Œè®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„æ•´ä½“å¤šä»£ç†ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªå›¾ã€‚æˆ‘ä»¬å°†æ·»åŠ ç›‘ç£ä»£ç†å’Œå„ä¸ªä»£ç†ä½œä¸ºå­å›¾èŠ‚ç‚¹ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from langgraph.graph import END</span><br><span class="line"></span><br><span class="line"># å®šä¹‰å¤šä»£ç†ä¸»ç®¡å›¾</span><br><span class="line">supervisor = (</span><br><span class="line">    StateGraph(MessagesState)</span><br><span class="line">    # æ³¨æ„ï¼š`destinations` ä»…ç”¨äºå¯è§†åŒ–ï¼Œä¸å½±å“è¿è¡Œæ—¶è¡Œä¸º</span><br><span class="line">    .add_node(supervisor_agent, destinations=(&quot;research_agent&quot;, &quot;math_agent&quot;, END))</span><br><span class="line">    .add_node(research_agent)</span><br><span class="line">    .add_node(math_agent)</span><br><span class="line">    .add_edge(START, &quot;supervisor&quot;)</span><br><span class="line">    # æ€»æ˜¯è¿”å›åˆ°ä¸»ç®¡</span><br><span class="line">    .add_edge(&quot;research_agent&quot;, &quot;supervisor&quot;)</span><br><span class="line">    .add_edge(&quot;math_agent&quot;, &quot;supervisor&quot;)</span><br><span class="line">    .compile()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨è¿™ä¸ªä»£ç ä¸­ï¼Œå» <code>research_agent</code> å’Œ
<code>math_agent</code>
çš„æ¡ä»¶è¾¹æ˜¯é€šè¿‡<strong>å·¥å…·è°ƒç”¨</strong>å®ç°çš„ï¼Œè€Œä¸æ˜¯æ˜¾å¼çš„æ¡ä»¶è¾¹ã€‚</p>
<p>å·¥ä½œæœºåˆ¶ï¼š</p>
<ol type="1">
<li><p><strong>å·¥å…·ä½œä¸ºäº¤æ¥æ‰‹æ®µ</strong>ï¼š</p>
<ul>
<li><code>assign_to_research_agent</code> å’Œ
<code>assign_to_math_agent</code> è¿™ä¸¤ä¸ªå·¥å…·è¢«æ·»åŠ åˆ°
<code>supervisor_agent</code> ä¸­</li>
<li>å½“ supervisor_agent å†³å®šéœ€è¦æŸä¸ªä»£ç†å¸®åŠ©æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ç›¸åº”çš„å·¥å…·</li>
</ul></li>
<li><p><strong>å·¥å…·å†…éƒ¨å®ç°äº¤æ¥</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def handoff_tool(...) -&gt; Command:</span><br><span class="line">    return Command(</span><br><span class="line">        goto=agent_name,  # è¿™é‡ŒæŒ‡å®šäº†è¦è·³è½¬åˆ°å“ªä¸ªä»£ç†</span><br><span class="line">        update=&#123;...&#125;,</span><br><span class="line">        graph=Command.PARENT,</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></li>
<li><p><strong>éšå¼çš„æ¡ä»¶è¾¹</strong>ï¼š</p>
<ul>
<li>å½“ supervisor_agent è°ƒç”¨ <code>assign_to_research_agent</code>
å·¥å…·æ—¶ â†’ è‡ªåŠ¨è·³è½¬åˆ° <code>research_agent</code></li>
<li>å½“ supervisor_agent è°ƒç”¨ <code>assign_to_math_agent</code> å·¥å…·æ—¶ â†’
è‡ªåŠ¨è·³è½¬åˆ° <code>math_agent</code></li>
</ul></li>
</ol>
</blockquote>
<blockquote>
<p>ä»€ä¹ˆæ˜¯ Command æœºåˆ¶</p>
<p>Command æœºåˆ¶æ˜¯ LangGraph
æä¾›çš„ä¸€ç§<strong>æ˜¾å¼æ§åˆ¶æµç¨‹è·³è½¬</strong>çš„æ–¹å¼ã€‚å®ƒå…è®¸å·¥å…·æˆ–èŠ‚ç‚¹ç›´æ¥æŒ‡å®šä¸‹ä¸€æ­¥è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Œè€Œä¸éœ€è¦é€šè¿‡ä¼ ç»Ÿçš„æ¡ä»¶è¾¹è·¯ç”±ã€‚</p>
<p>Command çš„æ ¸å¿ƒæ¦‚å¿µ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from langgraph.types import Command</span><br><span class="line"></span><br><span class="line">Command(</span><br><span class="line">    goto=agent_name,           # è¦è·³è½¬åˆ°çš„ç›®æ ‡èŠ‚ç‚¹</span><br><span class="line">    update=state_update,       # è¦æ›´æ–°çš„çŠ¶æ€</span><br><span class="line">    graph=Command.PARENT      # åœ¨å“ªä¸ªå›¾ä¸­æ‰§è¡Œï¼ˆçˆ¶å›¾/å­å›¾ï¼‰</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å·²ç»ä»å·¥ä½œä»£ç†æ·»åŠ äº†æ˜ç¡®çš„è¾¹å›åˆ°ä¸»ç®¡â€”â€”è¿™æ„å‘³ç€å®ƒä»¬ä¿è¯ä¼šå°†æ§åˆ¶æƒè¿”å›ç»™ä¸»ç®¡ã€‚å¦‚æœä½ å¸Œæœ›ä»£ç†ç›´æ¥å“åº”ç”¨æˆ·ï¼ˆå³ï¼Œå°†ç³»ç»Ÿè½¬å˜ä¸ºè·¯ç”±å™¨ï¼‰ï¼Œä½ å¯ä»¥ç§»é™¤è¿™äº›è¾¹ã€‚</p>
<h3 id="multi-agent-network">Multi-agent network</h3>
<p>ä¸€ä¸ªå•ä¸€æ™ºèƒ½ä½“é€šå¸¸å¯ä»¥ä½¿ç”¨å•ä¸ªé¢†åŸŸå†…çš„ä¸€å°æ‰¹å·¥å…·æ¥æœ‰æ•ˆè¿ä½œï¼Œä½†å³ä½¿ä½¿ç”¨åƒ
<code>gpt-4</code> è¿™æ ·å¼ºå¤§çš„æ¨¡å‹ï¼Œä½¿ç”¨å¤šä¸ªå·¥å…·æ—¶ä¹Ÿå¯èƒ½æ•ˆæœä¸ä½³ã€‚</p>
<p>å¤„ç†å¤æ‚ä»»åŠ¡çš„ä¸€ç§æ–¹æ³•æ˜¯é‡‡ç”¨â€œåˆ†è€Œæ²»ä¹‹â€çš„æ–¹æ³•ï¼šä¸ºæ¯ä¸ªä»»åŠ¡æˆ–é¢†åŸŸåˆ›å»ºä¸€ä¸ªä¸“é—¨çš„æ™ºèƒ½ä½“ï¼Œå¹¶å°†ä»»åŠ¡è·¯ç”±åˆ°æ­£ç¡®çš„â€œä¸“å®¶â€ã€‚è¿™æ˜¯ä¸€ä¸ªå¤šæ™ºèƒ½ä½“ç½‘ç»œæ¶æ„çš„ä¾‹å­ã€‚</p>
<figure>
<img src="/2025/08/18/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/Multi-Agent%20Workflows%E5%AE%9E%E6%88%98/image-20250819150039818.png" alt="image-20250819150039818">
<figcaption aria-hidden="true">image-20250819150039818</figcaption>
</figure>
<p><strong>è¿™ä¸ªå¤šagentæ¶æ„ï¼Œå°±åƒå¤šä¸ªagentè¿›è¡Œè®¨è®ºï¼Œæ‰€ä»¥ä¹Ÿå«Multi Agent
Collaborationï¼Œä½†æ˜¯ç»™æˆ‘çš„æ„Ÿè§‰ï¼Œæ¯”è¾ƒæ··ä¹±ï¼Œagentç›´æ¥çš„è·¯ç”±å¾ˆéš¾å»å®šä¹‰ï¼Œagentä¸€å¤šå°±æä¸æ¸…æ¥šäº†</strong>ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿä¸å®æˆ˜äº†ã€‚</p>
<h3 id="hierarchical-agent-teams">Hierarchical Agent Teams</h3>
<p>å¯¹äºæŸäº›åº”ç”¨ï¼Œå¦‚æœå·¥ä½œæŒ‰å±‚æ¬¡åˆ†å¸ƒï¼Œç³»ç»Ÿå¯èƒ½ä¼šæ›´æœ‰æ•ˆã€‚ä½ å¯ä»¥é€šè¿‡ç»„åˆä¸åŒçš„å­å›¾ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªé¡¶å±‚ç›‘ç£è€…ä»¥åŠä¸­å±‚ç›‘ç£è€…æ¥å®ç°è¿™ä¸€ç‚¹ã€‚</p>
<figure>
<img src="/2025/08/18/%E5%AD%A6%E4%B9%A0/agent%E5%AE%9E%E6%88%98/Multi-Agent%20Workflows%E5%AE%9E%E6%88%98/image-20250819151813264.png" alt="image-20250819151813264">
<figcaption aria-hidden="true">image-20250819151813264</figcaption>
</figure>
<p>ä½¿ç”¨é¢„è®¾çš„supervisoræ„å»º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"># 1. å®šä¹‰ç ”ç©¶å›¢é˜Ÿçš„ä»£ç†</span><br><span class="line">@tool</span><br><span class="line">def web_search(query: str) -&gt; str:</span><br><span class="line">    &quot;&quot;&quot;æ‰§è¡Œç½‘ç»œæœç´¢&quot;&quot;&quot;</span><br><span class="line">    return f&quot;æœç´¢ç»“æœï¼šå…³äº&#x27;&#123;query&#125;&#x27;çš„æœ€æ–°ä¿¡æ¯...&quot;</span><br><span class="line"></span><br><span class="line">@tool</span><br><span class="line">def analyze_data(data: str) -&gt; str:</span><br><span class="line">    &quot;&quot;&quot;åˆ†ææ•°æ®&quot;&quot;&quot;</span><br><span class="line">    return f&quot;æ•°æ®åˆ†æç»“æœï¼š&#123;data&#125;çš„è¶‹åŠ¿æ˜¾ç¤º...&quot;</span><br><span class="line"></span><br><span class="line">research_agent = create_react_agent(</span><br><span class="line">    model=llm,</span><br><span class="line">    tools=[web_search, analyze_data],</span><br><span class="line">    prompt=&quot;ä½ æ˜¯ä¸€ä¸ªç ”ç©¶ä¸“å®¶ï¼Œè´Ÿè´£è¿›è¡Œç½‘ç»œæœç´¢å’Œæ•°æ®åˆ†æã€‚&quot;,</span><br><span class="line">    name=&quot;research_specialist&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># 2. å®šä¹‰æ•°å­¦å›¢é˜Ÿçš„ä»£ç†</span><br><span class="line">@tool</span><br><span class="line">def calculate_statistics(numbers: list[float]) -&gt; str:</span><br><span class="line">    &quot;&quot;&quot;è®¡ç®—ç»Ÿè®¡å€¼&quot;&quot;&quot;</span><br><span class="line">    if not numbers:</span><br><span class="line">        return &quot;é”™è¯¯ï¼šæ•°æ®åˆ—è¡¨ä¸ºç©º&quot;</span><br><span class="line">    avg = sum(numbers) / len(numbers)</span><br><span class="line">    return f&quot;ç»Ÿè®¡ç»“æœï¼šå¹³å‡å€¼=&#123;avg:.2f&#125;ï¼Œæ•°æ®ç‚¹æ•°é‡=&#123;len(numbers)&#125;&quot;</span><br><span class="line"></span><br><span class="line">@tool</span><br><span class="line">def solve_equation(equation: str) -&gt; str:</span><br><span class="line">    &quot;&quot;&quot;è§£æ–¹ç¨‹&quot;&quot;&quot;</span><br><span class="line">    return f&quot;æ–¹ç¨‹ &#123;equation&#125; çš„è§£ä¸ºï¼šx = 42&quot;</span><br><span class="line"></span><br><span class="line">math_agent = create_react_agent(</span><br><span class="line">    model=llm,</span><br><span class="line">    tools=[calculate_statistics, solve_equation],</span><br><span class="line">    prompt=&quot;ä½ æ˜¯ä¸€ä¸ªæ•°å­¦ä¸“å®¶ï¼Œè´Ÿè´£ç»Ÿè®¡è®¡ç®—å’Œæ–¹ç¨‹æ±‚è§£ã€‚&quot;,</span><br><span class="line">    name=&quot;math_specialist&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"># 3. åˆ›å»ºç ”ç©¶å›¢é˜Ÿä¸»ç®¡</span><br><span class="line">research_supervisor = create_supervisor(</span><br><span class="line">    model=llm,</span><br><span class="line">    agents=[research_agent],</span><br><span class="line">    prompt=(</span><br><span class="line">        &quot;ä½ æ˜¯ç ”ç©¶å›¢é˜Ÿçš„ä¸»ç®¡ã€‚\n&quot;</span><br><span class="line">        &quot;ä½ çš„å›¢é˜Ÿæœ‰ä¸€ä¸ªç ”ç©¶ä¸“å®¶ï¼Œè´Ÿè´£ç½‘ç»œæœç´¢å’Œæ•°æ®åˆ†æã€‚\n&quot;</span><br><span class="line">        &quot;æ ¹æ®ä»»åŠ¡éœ€æ±‚ï¼Œå°†å·¥ä½œåˆ†é…ç»™ç ”ç©¶ä¸“å®¶ã€‚\n&quot;</span><br><span class="line">        &quot;ç­‰å¾…ä¸“å®¶å®Œæˆä»»åŠ¡åï¼Œæ€»ç»“ç»“æœå¹¶æŠ¥å‘Šç»™ä¸Šçº§ä¸»ç®¡ã€‚&quot;</span><br><span class="line">    ),</span><br><span class="line">    name=&quot;research_supervisor&quot;</span><br><span class="line">).compile(name=&quot;research_supervisor&quot;)</span><br><span class="line"></span><br><span class="line"># 4. åˆ›å»ºæ•°å­¦å›¢é˜Ÿä¸»ç®¡</span><br><span class="line">math_supervisor = create_supervisor(</span><br><span class="line">    model=llm,</span><br><span class="line">    agents=[math_agent],</span><br><span class="line">    prompt=(</span><br><span class="line">        &quot;ä½ æ˜¯æ•°å­¦å›¢é˜Ÿçš„ä¸»ç®¡ã€‚\n&quot;</span><br><span class="line">        &quot;ä½ çš„å›¢é˜Ÿæœ‰ä¸€ä¸ªæ•°å­¦ä¸“å®¶ï¼Œè´Ÿè´£ç»Ÿè®¡è®¡ç®—å’Œæ–¹ç¨‹æ±‚è§£ã€‚\n&quot;</span><br><span class="line">        &quot;æ ¹æ®ä»»åŠ¡éœ€æ±‚ï¼Œå°†å·¥ä½œåˆ†é…ç»™æ•°å­¦ä¸“å®¶ã€‚\n&quot;</span><br><span class="line">        &quot;ç­‰å¾…ä¸“å®¶å®Œæˆä»»åŠ¡åï¼Œæ€»ç»“ç»“æœå¹¶æŠ¥å‘Šç»™ä¸Šçº§ä¸»ç®¡ã€‚&quot;</span><br><span class="line">    ),</span><br><span class="line">    name=&quot;math_supervisor&quot;</span><br><span class="line">).compile(name=&quot;math_supervisor&quot;)</span><br><span class="line"></span><br><span class="line"># 5. åˆ›å»ºé¡¶å±‚ä¸»ç®¡</span><br><span class="line">top_supervisor = create_supervisor(</span><br><span class="line">    model=llm,</span><br><span class="line">    agents=[research_supervisor, math_supervisor],</span><br><span class="line">    prompt=(</span><br><span class="line">        &quot;ä½ æ˜¯é¡¶å±‚ä¸»ç®¡ï¼Œç®¡ç†ä¸¤ä¸ªä¸“ä¸šå›¢é˜Ÿï¼š\n&quot;</span><br><span class="line">        &quot;- ç ”ç©¶å›¢é˜Ÿï¼šè´Ÿè´£å¸‚åœºè°ƒç ”ã€æ•°æ®åˆ†æç­‰ä»»åŠ¡\n&quot;</span><br><span class="line">        &quot;- æ•°å­¦å›¢é˜Ÿï¼šè´Ÿè´£ç»Ÿè®¡è®¡ç®—ã€æ–¹ç¨‹æ±‚è§£ç­‰ä»»åŠ¡\n&quot;</span><br><span class="line">        &quot;æ ¹æ®ä»»åŠ¡çš„æ€§è´¨ï¼Œå°†å·¥ä½œåˆ†é…ç»™ç›¸åº”çš„å›¢é˜Ÿä¸»ç®¡ã€‚\n&quot;</span><br><span class="line">        &quot;ç­‰å¾…å›¢é˜Ÿå®Œæˆä»»åŠ¡åï¼Œæ•´åˆæ‰€æœ‰ç»“æœå¹¶ç»™å‡ºæœ€ç»ˆæŠ¥å‘Šã€‚&quot;</span><br><span class="line">    ),</span><br><span class="line">    name=&quot;top_supervisor&quot;</span><br><span class="line">).compile(name=&quot;top_supervisor&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://blog.langchain.com/langgraph-multi-agent-workflows/">LangGraphï¼šå¤šæ™ºèƒ½ä½“å·¥ä½œæµ
â€” LangGraph: Multi-Agent Workflows</a></p>
<p><a target="_blank" rel="noopener" href="https://langchain-ai.github.io/langgraph/concepts/multi_agent/">Overview</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/15/%E5%AD%A6%E4%B9%A0/python-web/react/react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/15/%E5%AD%A6%E4%B9%A0/python-web/react/react/" class="post-title-link" itemprop="url">python webâ€”â€”react</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-15 00:00:00" itemprop="dateCreated datePublished" datetime="2025-08-15T00:00:00+08:00">2025-08-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-08-18 15:44:24" itemprop="dateModified" datetime="2025-08-18T15:44:24+08:00">2025-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python-web/" itemprop="url" rel="index"><span itemprop="name">python-web</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/python-web/react/" itemprop="url" rel="index"><span itemprop="name">react</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="å‰è¨€">å‰è¨€</h3>
<p>ä¸ºäº†åç»­è‡ªå·±æ­å»ºå…¨æ ˆé¡¹ç›®åšå‡†å¤‡ï¼Œå¯¹reactåšä¸€å®šçš„äº†è§£</p>
<p>å­¦ä¹ ç›®æ ‡ï¼šå¤§è‡´çœ‹æ‡‚reactçš„åŸºæœ¬è¯­æ³•ï¼Œå¯ä»¥åœ¨aiçš„ååŠ©ä¸‹å®Œæˆå‰ç«¯çš„æ­å»º</p>
<h3 id="ä»‹ç»">ä»‹ç»</h3>
<p>React æ˜¯ Facebookï¼ˆç° Metaï¼‰äº 2013 å¹´å¼€æºçš„ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„
JavaScript åº“ï¼Œç°ç”± React æ ¸å¿ƒå›¢é˜Ÿä¸ç¤¾åŒºå…±åŒç»´æŠ¤ã€‚</p>
<h3 id="é¡¹ç›®æ­å»º">é¡¹ç›®æ­å»º</h3>
<p>é¡¹ç›®åˆ›å»º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app my-app</span><br></pre></td></tr></table></figure>
<blockquote>
<p>npx æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>npm 5.2+ è‡ªå¸¦çš„â€œåŒ…è¿è¡Œå™¨â€ï¼ˆNode Package eXecuteï¼‰ã€‚ç±»ä¼¼uv</p>
<p>è„šæ‰‹æ¶ï¼ˆScaffold / Boilerplateï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ol type="1">
<li>å®šä¹‰ï¼šå®˜æ–¹æˆ–ç¤¾åŒºæä¾›çš„â€œé¡¹ç›®æ¨¡æ¿ç”Ÿæˆå™¨â€ï¼Œä¸€æ¡å‘½ä»¤å°±èƒ½åˆ›å»ºå¸¦ç›®å½•ç»“æ„ã€é…ç½®ã€è„šæœ¬ã€ä¾èµ–çš„å®Œæ•´é¡¹ç›®éª¨æ¶ã€‚</li>
<li>ç›®çš„ï¼š â€¢ çœæ‰ç¹ççš„åˆå§‹åŒ–ã€Webpack/Rollup/Vite
é…ç½®ã€ESLint/TypeScript/æµ‹è¯•ç­‰ç¯å¢ƒæ­å»ºã€‚ â€¢
ç»Ÿä¸€å›¢é˜Ÿè§„èŒƒï¼Œé™ä½æ–°äººä¸Šæ‰‹æˆæœ¬ã€‚</li>
</ol>
</blockquote>
<p>å¯åŠ¨å¼€å‘æœåŠ¡å™¨</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> my-app</span><br><span class="line">npm start        <span class="comment"># æˆ– yarn start</span></span><br></pre></td></tr></table></figure>
<p>ç›®å½•é€Ÿè§ˆï¼ˆæ ¸å¿ƒï¼‰</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">my-app</span><br><span class="line">â”œâ”€ public/         # é™æ€èµ„æºï¼Œindex.html æ˜¯é¡µé¢æ¨¡æ¿</span><br><span class="line">â”œâ”€ src/</span><br><span class="line">â”‚  â”œâ”€ App.js       # æ ¹ç»„ä»¶</span><br><span class="line">â”‚  â”œâ”€ index.js     # åº”ç”¨å…¥å£ï¼ˆReactDOM.createRootï¼‰</span><br><span class="line">â””â”€ package.json    # ä¾èµ–ä¸è„šæœ¬</span><br></pre></td></tr></table></figure>
<h3 id="jsx">JSX</h3>
<p>JSXï¼ˆJavaScript XML çš„ç¼©å†™ï¼‰æ˜¯ React
å¼•å…¥çš„ä¸€ç§<strong>è¯­æ³•ç³–</strong>ï¼ˆsyntactic sugarï¼‰ã€‚å®ƒè®©ä½ åœ¨
JavaScript æ–‡ä»¶é‡Œç›´æ¥å†™<strong>ç±» HTML
æ ‡è®°</strong>ï¼Œç„¶åç”±æ„å»ºå·¥å…·ï¼ˆBabelã€TypeScriptã€esbuildã€swcï¼‰æŠŠå®ƒç¿»è¯‘æˆ<strong>æ™®é€šçš„
JavaScript å‡½æ•°è°ƒç”¨</strong>ã€‚</p>
<p>å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 1. æ‰¾åˆ° public/index.html ä¸­ id=&quot;root&quot; çš„ DOM èŠ‚ç‚¹ï¼Œä½œä¸º React åº”ç”¨çš„æŒ‚è½½ç‚¹</span><br><span class="line">const root = ReactDOM.createRoot(document.getElementById(&#x27;root&#x27;));</span><br><span class="line"></span><br><span class="line">// 2. å°†æ ¹ç»„ä»¶ &lt;App /&gt; æ¸²æŸ“åˆ°è¯¥æŒ‚è½½ç‚¹</span><br><span class="line">root.render(</span><br><span class="line">  // 3. &lt;React.StrictMode&gt; æ˜¯ React æä¾›çš„å¼€å‘æ¨¡å¼è¾…åŠ©å·¥å…·</span><br><span class="line">  //    ä½œç”¨ï¼šåœ¨å¼€å‘é˜¶æ®µè‡ªåŠ¨æ£€æµ‹æ½œåœ¨é—®é¢˜ï¼ˆå¦‚è¿‡æ—¶çš„ APIã€å‰¯ä½œç”¨é‡å¤æ‰§è¡Œç­‰ï¼‰</span><br><span class="line">  //    æ³¨æ„ï¼šå®ƒä»…åœ¨å¼€å‘ç¯å¢ƒç”Ÿæ•ˆï¼Œç”Ÿäº§ç¯å¢ƒä¸ä¼šæ¸²æŸ“ä»»ä½•é¢å¤– DOM</span><br><span class="line">  &lt;React.StrictMode&gt;</span><br><span class="line">    &#123;/* 4. é¡¹ç›®çœŸæ­£çš„æ ¹ç»„ä»¶ Appï¼Œæ‰€æœ‰ä¸šåŠ¡é€»è¾‘éƒ½ä»è¿™é‡Œå¼€å§‹ */&#125;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/React.StrictMode&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3 id="ç®­å¤´å‡½æ•°">ç®­å¤´å‡½æ•°</h3>
<p>Reactï¼ˆä»¥åŠæ‰€æœ‰ç°ä»£ JavaScriptï¼‰é‡Œï¼Œâ€œç®­å¤´â€æŒ‡çš„æ˜¯
<strong>ç®­å¤´å‡½æ•°ï¼ˆArrow Functionï¼‰</strong>ï¼Œè¯­æ³•æ˜¯ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> å‡½æ•°å = <span class="function">(<span class="params">å‚æ•°</span>) =&gt;</span> è¿”å›å€¼æˆ–è¯­å¥å—</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„ä½œç”¨å¯ä»¥æ¦‚æ‹¬ä¸º <strong>â€œæ›´ç®€æ´çš„å‡½æ•°å£°æ˜ + è¯æ³•ä½œç”¨åŸŸçš„
thisâ€</strong>ã€‚</p>
<p>é€šä¿—ç†è§£ï¼šæŠŠå°æ‹¬å·çš„å†…å®¹å˜æˆç®­å¤´åçš„å†…å®¹</p>
<h3 id="å‡½æ•°ç»„ä»¶">å‡½æ•°ç»„ä»¶</h3>
<p>å‡½æ•°ç»„ä»¶ + JSX çš„ç»„åˆä½œç”¨æ˜¯ï¼š <strong>ä»¥å‡½æ•°çš„å½¢å¼è¿”å›â€œè™šæ‹Ÿ DOM
æè¿°â€ï¼Œäº¤ç”± React æ¸²æŸ“æˆçœŸå® DOM</strong>ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å› HTML
ç»„ä»¶æˆ–å­—ç¬¦ä¸²ã€‚</p>
<ol type="1">
<li>å‡½æ•°ç»„ä»¶çš„â€œè¿”å›å€¼â€</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello &#123;props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»è¿‡ Babel ç¼–è¯‘åç­‰ä»·äºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Welcome</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;h1&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;Hello &#x27;</span>, props.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>React.createElement</code> ä¼šç”Ÿæˆä¸€ä¸ª<strong>çº¯ JS
å¯¹è±¡</strong>ï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰ï¼Œè€Œä¸æ˜¯ä¸€æ®µ HTML å­—ç¬¦ä¸²ã€‚</p>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„ props</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Card</span>(<span class="params">&#123; title, children &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// 2. è¿”å›ä¸€æ®µ JSXï¼ˆæœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆè™šæ‹Ÿ DOMï¼‰</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;title&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Card</span> title=<span class="string">&quot;å‡½æ•°ç»„ä»¶&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">Card</span>&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>DOMï¼ˆDocument Object Modelï¼Œæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰æ˜¯æµè§ˆå™¨åœ¨å†…å­˜é‡ŒæŠŠä¸€ä»½
HTML/XML
æ–‡æ¡£è¡¨ç¤ºæˆ<strong>æ ‘å½¢ç»“æ„</strong>çš„<strong>ç¼–ç¨‹æ¥å£</strong>ï¼ˆAPIï¼‰ã€‚</p>
<p>æ¯ä¸ªèŠ‚ç‚¹ï¼ˆå…ƒç´ ã€æ–‡æœ¬ã€æ³¨é‡Šâ€¦ï¼‰éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‹¥æœ‰å±æ€§ä¸æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> title = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line">title.<span class="property">textContent</span> = <span class="string">&#x27;Hi React&#x27;</span>;   <span class="comment">// æ”¹æ–‡æœ¬</span></span><br><span class="line">title.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span>;        <span class="comment">// æ”¹æ ·å¼</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="æ’å€¼å†™æ³•">æ’å€¼å†™æ³•</h3>
<p>åœ¨ React ä¸­ï¼Œâ€œæ’å€¼â€ä¸“æŒ‡<strong>æŠŠä¸€æ®µ JavaScript è¡¨è¾¾å¼çš„å®æ—¶ç»“æœå¡è¿›
JSX</strong> çš„å†™æ³•ã€‚ æ ¸å¿ƒç¬¦å·åªæœ‰ä¸€å¯¹èŠ±æ‹¬å·
<code>&#123; &#125;</code>ï¼Œè®°ä½å£è¯€ï¼š<strong>â€œJSX é‡Œå‡¡æ˜¯ {} åŒ…èµ·æ¥çš„ï¼Œå°±æ˜¯
JavaScript è¿è¡Œåçš„å€¼ã€‚â€</strong></p>
<p><strong>åŸºæœ¬æ–‡æœ¬æ’å€¼</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const name = &#x27;React&#x27;;</span><br><span class="line">&lt;h1&gt;Hello, &#123;name&#125;!&lt;/h1&gt;          // â†’ Hello, React!</span><br></pre></td></tr></table></figure>
<p><strong>å±æ€§æ’å€¼</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function App() &#123;</span><br><span class="line">  const mytitle=&quot;hello&quot;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div title=&#123;mytitle&#125;&gt;&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ•°æ®æ¸²æŸ“">æ•°æ®æ¸²æŸ“</h3>
<p><strong>æ¡ä»¶æ¸²æŸ“</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function App() &#123;</span><br><span class="line">  const mytitle=&quot;hello&quot;</span><br><span class="line"></span><br><span class="line">  let mycontent=null</span><br><span class="line">  const flag=true</span><br><span class="line">  if(flag)&#123;</span><br><span class="line">    mycontent=&lt;h2&gt;hello&lt;/h2&gt;</span><br><span class="line">  &#125;</span><br><span class="line">  else&#123;</span><br><span class="line">    mycontent=&lt;h2&gt;world&lt;/h2&gt;</span><br><span class="line">  &#125;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div title=&#123;mytitle&#125;&gt;&#123;mycontent&#125;&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ—è¡¨æ¸²æŸ“</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function App() &#123;</span><br><span class="line">  const list=[&#x27;1&#x27;,&#x27;2&#x27;,&#x27;3&#x27;]</span><br><span class="line">  const mycontent=list.map((item)=&gt;&#123;</span><br><span class="line">    return &lt;li&gt;&#123;item&#125;&lt;/li&gt;</span><br><span class="line">  &#125;)</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;&#123;mycontent&#125;&lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ol type="1">
<li><code>.map((item) =&gt; &#123; ... &#125;)</code> â€‘
<code>Array.prototype.map</code>ï¼šéå†æ•°ç»„ï¼ŒæŠŠæ¯ä¸ªå…ƒç´ ä¾æ¬¡äº¤ç»™å›è°ƒå‡½æ•°å¤„ç†ï¼Œå¹¶<strong>è¿”å›ä¸€ä¸ªæ–°æ•°ç»„</strong>ã€‚
â€‘ <code>(item)</code> æ˜¯æ¯æ¬¡å¾ªç¯æ‹¿åˆ°çš„å½“å‰å…ƒç´ ã€‚</li>
<li><code>return &lt;li&gt;&#123;item&#125;&lt;/li&gt;</code> â€‘
æ¯ä¸€æ¬¡å¾ªç¯é‡Œï¼ŒæŠŠå½“å‰å…ƒç´  <code>item</code> ç”¨ JSX æ’å€¼è¯­æ³•
<code>&#123;item&#125;</code> æ”¾è¿› <code>&lt;li&gt;</code> æ ‡ç­¾é‡Œã€‚</li>
</ol>
</blockquote>
<h3 id="çŠ¶æ€å¤„ç†">çŠ¶æ€å¤„ç†</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useState &#125; from &#x27;react&#x27;;</span><br><span class="line">function App() &#123;</span><br><span class="line">  const [mycontent,setmycontent]=useState(&quot;hello world&quot;);</span><br><span class="line">  function changeContent()&#123;</span><br><span class="line">    setmycontent(&quot;hello world2&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div&gt;&#123;mycontent&#125;&lt;/div&gt;</span><br><span class="line">      &lt;button onClick=&#123;changeContent&#125;&gt;change&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>useState æ˜¯ React æä¾›çš„
<strong>Hook</strong>ï¼Œè®©<strong>å‡½æ•°ç»„ä»¶ä¹Ÿèƒ½æ‹¥æœ‰å†…éƒ¨çŠ¶æ€</strong>ï¼ˆstateï¼‰ã€‚å¯ä»¥é€šè¿‡æ›´æ–°å‡½æ•°ï¼Œè°ƒç”¨åè§¦å‘é‡æ–°æ¸²æŸ“ã€‚</p>
<p><strong>å¯¹è±¡çš„çŠ¶æ€æ›´æ–°</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useState &#125; from &#x27;react&#x27;;</span><br><span class="line">function App() &#123;</span><br><span class="line">  const [mycontent,setmycontent]=useState(&#123;</span><br><span class="line">    title:&#x27;hello world&#x27;,</span><br><span class="line">    content :&#x27;hello world content&#x27;</span><br><span class="line">&#125;);</span><br><span class="line">  function changeContent()&#123;</span><br><span class="line">    setmycontent(&#123;</span><br><span class="line">      ...mycontent,</span><br><span class="line">      content:&#x27;new content&#x27;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;div title=&#123;mycontent.title&#125;&gt;&#123;mycontent.content&#125;&lt;/div&gt;</span><br><span class="line">      &lt;button onClick=&#123;changeContent&#125;&gt;change&lt;/button&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>...mycontent</code> æ˜¯ ES6 çš„ <strong>å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ï¼ˆobject
spreadï¼‰</strong>ã€‚ ä¸€å¥è¯ï¼šæŠŠ <code>mycontent</code>
é‡Œæ‰€æœ‰â€œæ—§å±æ€§â€å…ˆæŠ„å‡ºæ¥ï¼Œç„¶åå†è¦†ç›–/æ–°å¢ä½ åé¢å†™çš„å±æ€§ã€‚</p>
<h3 id="reactç»„ä»¶çš„ä½¿ç”¨">reactç»„ä»¶çš„ä½¿ç”¨</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useState &#125; from &#x27;react&#x27;;</span><br><span class="line">function App() &#123;</span><br><span class="line">return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;img src=&#123;logo&#125; className=&quot;App-logo&quot; alt=&quot;logo&quot; style=&#123;&#123; width: &#x27;100px&#x27;,backgroundColor: &#x27;grey&#x27;&#125;&#125;/&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol type="1">
<li><p><code>className</code> ä»£æ›¿ <code>class</code> ä¼ ç»Ÿ HTML å†™
<code>&lt;img class="App-logo"&gt;</code>ï¼›React ç»„ä»¶é‡Œå¿…é¡»ç”¨
<code>className</code>ï¼Œå› ä¸º JSX æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆ JavaScript å¯¹è±¡ï¼Œè€Œ
<code>class</code> æ˜¯ JS çš„ä¿ç•™å…³é”®å­—ã€‚</p></li>
<li><p>æ ·å¼å†™æˆ<strong>å¯¹è±¡</strong></p></li>
</ol>
<p>HTML
å†™è¡Œå†…æ ·å¼ï¼š<code>style="width:100px;background-color:grey"</code> React
å¿…é¡»å†™æˆå¯¹è±¡ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">style=&#123;&#123;</span><br><span class="line">  <span class="attr">width</span>: <span class="string">&#x27;100px&#x27;</span>,</span><br><span class="line">  <span class="attr">backgroundColor</span>: <span class="string">&#x27;grey&#x27;</span>   <span class="comment">// é©¼å³°å‘½å</span></span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>å› ä¸º JSX å±æ€§æœ€ç»ˆä¼šå˜æˆ JS
å¯¹è±¡çš„é”®å€¼å¯¹ï¼Œé”®åå¿…é¡»åˆæ³•ï¼ˆé©¼å³°ï¼‰ï¼Œå€¼å¯ä»¥æ˜¯ä»»ä½• JS
å€¼ï¼ˆæ•°å­—ã€å˜é‡ã€è®¡ç®—ç»“æœï¼‰ã€‚</p>
<ol start="3" type="1">
<li>æœ€ç»ˆäº§ç‰©æ˜¯<strong>è™šæ‹Ÿ DOM èŠ‚ç‚¹</strong></li>
</ol>
<p><code>&lt;img src=&#123;logo&#125; ... /&gt;</code> åœ¨æµè§ˆå™¨é‡Œä¸ä¼šç›´æ¥å˜æˆ
<code>&lt;img&gt;</code> æ ‡ç­¾ï¼Œè€Œæ˜¯å…ˆè¢«ç¼–è¯‘æˆï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;img&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">src</span>: logo,</span><br><span class="line">  <span class="attr">className</span>: <span class="string">&#x27;App-logo&#x27;</span>,</span><br><span class="line">  <span class="attr">alt</span>: <span class="string">&#x27;logo&#x27;</span>,</span><br><span class="line">  <span class="attr">style</span>: &#123; <span class="attr">width</span>: <span class="string">&#x27;100px&#x27;</span>, <span class="attr">backgroundColor</span>: <span class="string">&#x27;grey&#x27;</span> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>React å†æ‹¿è¿™ä¸ªå¯¹è±¡å»åš diffã€æ›´æ–°çœŸå® DOMï¼Œè€Œä¸æ˜¯ç›´æ¥ innerHTMLã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function App() &#123;</span><br><span class="line"></span><br><span class="line">  const imgdata=&#123;</span><br><span class="line">    className:&quot;App-logo&quot;,</span><br><span class="line">    style:&#123;</span><br><span class="line">      width:&#x27;100px&#x27;,</span><br><span class="line">      backgroundColor:&#x27;grey&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;img src=&#123;logo&#125; alt=&quot;logo&quot; &#123;...imgdata&#125;/&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ©ç”¨ <strong>JSX å±•å¼€è¿ç®—ç¬¦ï¼ˆspread attributesï¼‰</strong> æŠŠ
<code>imgdata</code> é‡Œçš„æ‰€æœ‰é”®å€¼ä¸€æ¬¡æ€§â€œæ‹å¹³â€åˆ° <code>&lt;img&gt;</code>
æ ‡ç­¾ä¸Š</p>
<h3 id="ç»„ä»¶å¤ç”¨">ç»„ä»¶å¤ç”¨</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">function Article(props) &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h2&gt;&#123;props.title&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;p&gt;&#123;props.content&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function App() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;Article title=&quot;æ ‡ç­¾1&quot; content=&quot;å†…å®¹1&quot; /&gt;</span><br><span class="line">      &lt;Article title=&quot;æ ‡ç­¾2&quot; content=&quot;å†…å®¹2&quot; /&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç»„ä»¶é€šä¿¡">ç»„ä»¶é€šä¿¡</h3>
<p>ç»„ä»¶é€šä¿¡çš„ 4 æ¡ä¸»çº¿</p>
<p>1ï¸âƒ£ çˆ¶ â†’ å­ï¼šprops 2ï¸âƒ£ å­ â†’ çˆ¶ï¼šå›è°ƒå‡½æ•° 3ï¸âƒ£ éš”ä»£/ä»»æ„ï¼šContext 4ï¸âƒ£
å…¨å±€/è¿œç«¯ï¼šçŠ¶æ€ç®¡ç†åº“ï¼ˆZustandã€Reduxã€React Queryï¼‰</p>
<h4 id="çˆ¶-å­">çˆ¶ â†’ å­</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function Parent() &#123;</span><br><span class="line">  const title = &#x27;Hello React&#x27;;</span><br><span class="line">  return &lt;Child title=&#123;title&#125; /&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Child(&#123; title &#125;) &#123;</span><br><span class="line">  return &lt;h1&gt;&#123;title&#125;&lt;/h1&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="å­-çˆ¶">å­ â†’ çˆ¶</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function Parent() &#123;</span><br><span class="line">  const [count, setCount] = useState(0);</span><br><span class="line">  return (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;p&gt;çˆ¶ï¼š&#123;count&#125;&lt;/p&gt;</span><br><span class="line">      &lt;Child onInc=&#123;() =&gt; setCount(c =&gt; c + 1)&#125; /&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Child(&#123; onInc &#125;) &#123;</span><br><span class="line">  return &lt;button onClick=&#123;onInc&#125;&gt;å­æŒ‰é’® +1&lt;/button&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>çˆ¶ç»„ä»¶æŠŠâ€œä¿®æ”¹å‡½æ•°â€é€šè¿‡ props
ä¼ ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶åœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨å®ƒï¼ŒæŠŠæ•°æ®ä½œä¸ºå‚æ•°ä¼ å›å»ã€‚</strong></p>
<h3 id="react-hooks">react hooks</h3>
<p><strong>Hook æ˜¯ä»€ä¹ˆï¼Ÿ</strong> Hook æ˜¯ React 16.8 å¼•å…¥çš„
<strong>å‡½æ•°çº§ API</strong>ï¼Œè®©å‡½æ•°ç»„ä»¶æ‹¥æœ‰</p>
<ul>
<li>çŠ¶æ€ï¼ˆuseStateï¼‰</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼ˆuseEffectï¼‰</li>
<li>ä¸Šä¸‹æ–‡ï¼ˆuseContextï¼‰</li>
<li>è‡ªå®šä¹‰é€»è¾‘ï¼ˆè‡ªå®šä¹‰ Hookï¼‰ è€Œä¸å¿…å†™ classã€‚</li>
</ul>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1kc411D7F9?spm_id_from=333.788.videopod.sections&amp;vd_source=bacf29bd4bb51f2ecf08a1ac7c7d8f11">20åˆ†é’Ÿå­¦ä¼šReact
Hooks å‰ç«¯å¼€å‘å¿…çœ‹ AIç¼–ç¨‹å·¥å…· CodeGeeX ä½“éªŒ_å“”å“©å“”å“©_bilibili</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/14/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langmem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/14/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langmem/" class="post-title-link" itemprop="url">Langmemå¿«é€Ÿå…¥é—¨</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-14 00:00:00 / ä¿®æ”¹æ—¶é—´ï¼š17:42:04" itemprop="dateCreated datePublished" datetime="2025-08-14T00:00:00+08:00">2025-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ai%E6%A1%86%E6%9E%B6/" itemprop="url" rel="index"><span itemprop="name">aiæ¡†æ¶</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ai%E6%A1%86%E6%9E%B6/langmem/" itemprop="url" rel="index"><span itemprop="name">langmem</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="å‰è¨€">å‰è¨€</h3>
<p>æœ¬æ–‡ç®€å•æµ‹è¯•äº†ä¸€ä¸‹langgraphå®˜æ–¹æä¾›çš„è®°å¿†ç®¡ç†å·¥å…·ï¼Œå‘ç°è¿˜æ˜¯å­˜åœ¨bugï¼Œæˆ‘åœ¨açº¿ç¨‹å…ˆè®©ä»–è®°ä½æˆ‘æ˜¯å¼ ç†™æµšï¼Œç„¶ååˆå‘Šè¯‰ä»–æˆ‘ä¸æ˜¯å¼ ç†™æµšæˆ‘æ˜¯å¼ ä¿Šç»†ï¼Œåœ¨çº¿ç¨‹bè¯¢é—®ä»–æˆ‘æ˜¯è°æ—¶ï¼Œä»–è¿˜æ˜¯è®¤ä¸ºæˆ‘æ˜¯å¼ ç†™æµšã€‚è®°å¿†çš„ç®¡ç†éƒ¨åˆ†ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œä½†ä¸­å°å¼€å‘è€…æˆ‘è®¤ä¸ºè¿˜æ˜¯ç›´æ¥ä½¿ç”¨äººå®¶é€ å¥½çš„è½®å­æ–¹ä¾¿äº›ï¼ˆæˆ‘å°è¯•å»é˜…è¯»äº†ä»–çš„è®°å¿†ç®¡ç†å·¥å…·çš„æºç ï¼Œä»¥æˆ‘ç›®å‰çš„æ°´å¹³ï¼Œæƒ³æ‰‹æ“èŠ±è´¹çš„ç²¾åŠ›è¿˜æ˜¯å¤ªå¤šäº†ï¼‰</p>
<p>æˆ‘è¿˜æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼Œå½“å‰è®°å¿†çš„å­˜å‚¨åŸºæœ¬ä¸Šä¾èµ–äºagentçš„å†³å®šï¼Œæ‰€ä»¥å¹¶ä¸ç¨³å®šï¼Œæˆ‘ä¹Ÿæä¸æ¸…æ¥šä»–ä»€ä¹ˆæ—¶å€™ä¼šæŠŠå“ªäº›ä¿¡æ¯å­˜å…¥è®°å¿†ï¼Œå¯ä»¥è®¾ç½®
schemasç»“æ„ï¼Œæ§åˆ¶å­˜å‚¨çš„å†…å®¹ï¼Œä½†æ˜¯é•¿æœŸè®°å¿†ä»…å­˜å‚¨æŒ‡å®šçš„è¿™äº›ä¿¡æ¯ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰äº›é¸¡è‚‹å•Š</p>
<p>ä»£ç è§<a target="_blank" rel="noopener" href="https://github.com/zxj-2023/learn-rag-langchain/tree/main/langmem">learn-rag-langchain/langmem
at main Â· zxj-2023/learn-rag-langchain</a></p>
<h3 id="ä»‹ç»">ä»‹ç»</h3>
<p>LangMem æ˜¯ LangChain æ¨å‡ºçš„å¼€æº SDKï¼Œé€šè¿‡ä¸€å¥—å­˜å‚¨-æå–-ä¼˜åŒ–æœºåˆ¶ï¼Œè®©
Agent
èƒ½å¤Ÿåœ¨å¤šè½®ã€å¤šå¤©ç”šè‡³å¤šç”¨æˆ·ä¹‹é—´æŒç»­å­¦ä¹ ã€è®°ä½ç”¨æˆ·åå¥½å¹¶ä¸æ–­æ”¹è¿›å›ç­”ã€‚</p>
<p>LangMem çš„è®°å¿†å·¥å…·æŒ‰ä¸¤ä¸ªå±‚æ¬¡çš„é›†æˆæ¨¡å¼ç»„ç»‡ï¼š</p>
<ol type="1">
<li>æ ¸å¿ƒ API</li>
</ol>
<p>LangMem
çš„æ ¸å¿ƒæ˜¯æä¾›æ— å‰¯ä½œç”¨åœ°è½¬æ¢è®°å¿†çŠ¶æ€çš„å‡½æ•°ã€‚è¿™äº›åŸè¯­æ˜¯è®°å¿†æ“ä½œçš„æ„å»ºå—ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langmem/reference/memory/#langmem.create_memory_manager"><strong>è®°å¿†ç®¡ç†å™¨</strong></a>ï¼šæ ¹æ®æ–°çš„å¯¹è¯ä¿¡æ¯ï¼Œæå–æ–°è®°å¿†ã€æ›´æ–°æˆ–åˆ é™¤è¿‡æ—¶è®°å¿†ï¼Œå¹¶ä»ç°æœ‰è®°å¿†ä¸­è¿›è¡Œæ•´åˆå’Œæ³›åŒ–ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langmem/reference/prompt_optimization/#langmem.create_prompt_optimizer"><strong>æç¤ºä¼˜åŒ–å™¨</strong></a>ï¼šæ ¹æ®å¯¹è¯ä¿¡æ¯ï¼ˆå¯é€‰åé¦ˆï¼‰æ›´æ–°æç¤ºè§„åˆ™å’Œæ ¸å¿ƒè¡Œä¸ºã€‚</li>
</ul>
<p>è¿™äº›æ ¸å¿ƒå‡½æ•°ä¸ä¾èµ–äºä»»ä½•ç‰¹å®šçš„æ•°æ®åº“æˆ–å­˜å‚¨ç³»ç»Ÿã€‚æ‚¨å¯ä»¥åœ¨ä»»ä½•åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p>
<ol start="2" type="1">
<li>æœ‰çŠ¶æ€é›†æˆ</li>
</ol>
<p>ä¸Šä¸€å±‚ä¾èµ–äº LangGraph çš„é•¿æœŸè®°å¿†å­˜å‚¨ã€‚è¿™äº›ç»„ä»¶ä½¿ç”¨ä¸Šè¿°æ ¸å¿ƒ API
æ¥è½¬æ¢å­˜å‚¨ä¸­å­˜åœ¨çš„è®°å¿†ï¼Œå¹¶åœ¨æ–°å¯¹è¯ä¿¡æ¯ä¼ å…¥æ—¶æ ¹æ®éœ€è¦è¿›è¡Œæ›´æ–°/æ’å…¥æˆ–åˆ é™¤ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langmem/reference/memory/#langmem.create_memory_store_manager"><strong>å­˜å‚¨ç®¡ç†å™¨</strong></a>ï¼šè‡ªåŠ¨æŒä¹…åŒ–æå–çš„è®°å¿†ã€‚</li>
<li><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langmem/reference/tools/#langmem.create_manage_memory_tool"><strong>è®°å¿†ç®¡ç†å·¥å…·</strong></a>ï¼šè®©æ™ºèƒ½ä½“ç›´æ¥è®¿é—®è®°å¿†æ“ä½œã€‚</li>
</ul>
<figure>
<img src="/2025/08/14/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langmem/image-20250814152044798.png" alt="image-20250814152044798">
<figcaption aria-hidden="true">image-20250814152044798</figcaption>
</figure>
<p>langmemå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼åˆ›å»ºè®°å¿†</p>
<ol type="1">
<li><strong>åœ¨çƒ­è·¯å¾„ä¸­ï¼š</strong> Agent ä½¿ç”¨å·¥å…·ä¸»åŠ¨ä¿å­˜ç¬”è®°ã€‚</li>
<li><strong>åœ¨åå°ï¼š</strong>è®°å¿†ä»å¯¹è¯ä¸­è‡ªåŠ¨â€œæ½œæ„è¯†åœ°â€æå–ã€‚</li>
</ol>
<h3 id="çƒ­è·¯å¾„å¿«é€Ÿå…¥é—¨æŒ‡å—">çƒ­è·¯å¾„å¿«é€Ÿå…¥é—¨æŒ‡å—</h3>
<p>åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª LangGraph Agentï¼Œå®ƒé€šè¿‡ LangMem çš„
<code>manage_memory</code> å·¥å…·æ¥ä¸»åŠ¨ç®¡ç†è‡ªå·±çš„é•¿æœŸè®°å¿†ã€‚</p>
<h4 id="create_manage_memory_tool">create_manage_memory_tool</h4>
<p>create_manage_memory_toolé€šè¿‡åˆ›å»ºä¸€ä¸ªå·¥å…·ï¼ˆToolï¼‰ï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥è¢«
agentç”¨æ¥<strong>ç®¡ç†æŒä¹…åŒ–è®°å¿†</strong>ã€‚è¿™äº›è®°å¿†å¯ä»¥åœ¨ä¸åŒçš„å¯¹è¯ã€ä¼šè¯ç”šè‡³åº”ç”¨é‡å¯åä¾ç„¶å­˜åœ¨ã€‚</p>
<ol type="1">
<li><p><strong>æŒä¹…åŒ–å­˜å‚¨ (Persistent Storage):</strong> å®ƒåˆ©ç”¨äº†
LangGraph æä¾›çš„ <code>BaseStore</code>
æ¥å£ã€‚è¿™ä½¿å¾—æ•°æ®å¯ä»¥å­˜å‚¨åœ¨å†…å­˜ã€æ•°æ®åº“ï¼ˆå¦‚
Postgresï¼‰ç­‰åœ°æ–¹ï¼Œè€Œä¸æ˜¯ä»…ä»…å­˜åœ¨äºç¨‹åºçš„è¿è¡Œæ—¶å†…å­˜ä¸­ã€‚</p></li>
<li><p><strong>å‘½åç©ºé—´ (Namespace):</strong>
ä¸ºäº†ç»„ç»‡å’Œéš”ç¦»ä¸åŒç”¨æˆ·æˆ–ä¸åŒç±»å‹çš„è®°å¿†ï¼Œæ•°æ®è¢«å­˜å‚¨åœ¨å±‚çº§åŒ–çš„å‘½åç©ºé—´ä¸­ã€‚ä¾‹å¦‚ï¼Œ<code>("memories", "user-123")</code>
å¯ä»¥ç¡®ä¿ç”¨æˆ· â€œuser-123â€
çš„è®°å¿†ä¸å…¶ä»–ç”¨æˆ·æˆ–ç³»ç»Ÿè®°å¿†åˆ†å¼€ã€‚å‘½åç©ºé—´å¯ä»¥åŒ…å«å ä½ç¬¦ï¼ˆå¦‚
<code>&#123;langgraph_user_id&#125;</code>ï¼‰ï¼Œåœ¨å®é™…æ‰§è¡Œæ—¶ä¼šè¢«å…·ä½“çš„é…ç½®å€¼æ›¿æ¢ã€‚</p></li>
<li><p><strong>è®°å¿† (Memory):</strong>
åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œä¸€ä¸ªâ€œè®°å¿†â€å°±æ˜¯å­˜å‚¨åœ¨ <code>BaseStore</code>
ä¸­çš„ä¸€ä¸ªæ•°æ®é¡¹ï¼ˆ<code>Item</code>ï¼‰ã€‚å®ƒæœ‰ä¸€ä¸ªå”¯ä¸€çš„
<code>key</code>ï¼ˆé€šå¸¸æ˜¯ UUIDï¼‰ï¼Œä¸€ä¸ª <code>namespace</code>ï¼Œä¸€ä¸ª
<code>value</code>ï¼ˆå­˜å‚¨å®é™…å†…å®¹ï¼‰ï¼Œä»¥åŠåˆ›å»ºå’Œæ›´æ–°æ—¶é—´æˆ³ã€‚</p></li>
<li><p><strong>å·¥å…· (Tool):</strong> åœ¨ AI
åº”ç”¨ä¸­ï¼Œå·¥å…·æ˜¯ä»£ç†ï¼ˆAgentï¼‰å¯ä»¥è°ƒç”¨çš„å‡½æ•°æˆ–èƒ½åŠ›ã€‚è¿™ä¸ªå‡½æ•°åˆ›å»ºçš„å·¥å…·å°±æ˜¯ä¸€ä¸ªå°è£…å¥½çš„ã€å¯ä»¥è¢«
Agent è°ƒç”¨çš„å‡½æ•°ï¼Œç”¨äºæ‰§è¡Œåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤è®°å¿†çš„æ“ä½œã€‚</p></li>
</ol>
<h4 id="ä»€ä¹ˆæ—¶å€™agentä¼šè°ƒç”¨è®°å¿†å·¥å…·">ä»€ä¹ˆæ—¶å€™agentä¼šè°ƒç”¨è®°å¿†å·¥å…·</h4>
<figure>
<img src="/2025/08/14/%E5%AD%A6%E4%B9%A0/ai%E6%A1%86%E6%9E%B6/langmem/image-20250814163150589.png" alt="image-20250814163150589">
<figcaption aria-hidden="true">image-20250814163150589</figcaption>
</figure>
<p>aiæ˜¯è¿™æ ·å›ç­”çš„ï¼ŒReActæ¶æ„çš„agentæ˜¯å¦è°ƒç”¨å·¥å…·ç”±ä»–è‡ªå·±å†³å®š</p>
<h4 id="å®æˆ˜">å®æˆ˜</h4>
<p><strong>å¯¼å…¥åº“</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from langgraph.checkpoint.memory import MemorySaver</span><br><span class="line">from langgraph.prebuilt import create_react_agent</span><br><span class="line">from langgraph.store.memory import InMemoryStore</span><br><span class="line">from langgraph.utils.config import get_store </span><br><span class="line">from langmem import (</span><br><span class="line">    # è®©æ™ºèƒ½ä½“åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤è®°å¿† </span><br><span class="line">    create_manage_memory_tool,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>è¿”å›è®°å¿†æç¤ºè¯</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">def prompt(state):</span><br><span class="line">    &quot;&quot;&quot;ä¸ºLLMå‡†å¤‡æ¶ˆæ¯ã€‚&quot;&quot;&quot;</span><br><span class="line">    # ä»é…ç½®çš„ä¸Šä¸‹æ–‡å˜é‡ä¸­è·å–å­˜å‚¨; </span><br><span class="line">    store = get_store() # ä¸æä¾›ç»™ `create_react_agent` çš„ç›¸åŒ</span><br><span class="line">    memories = store.search(</span><br><span class="line">        # åœ¨ä¸æˆ‘ä»¬ä¸ºæ™ºèƒ½ä½“é…ç½®çš„ç›¸åŒå‘½åç©ºé—´å†…æœç´¢</span><br><span class="line">        (&quot;memories&quot;,),</span><br><span class="line">        query=state[&quot;messages&quot;][-1].content,</span><br><span class="line">    )</span><br><span class="line">    system_msg = f&quot;&quot;&quot;You are a helpful assistant.</span><br><span class="line"></span><br><span class="line">## Memories</span><br><span class="line">&lt;memories&gt;</span><br><span class="line">&#123;memories&#125;</span><br><span class="line">&lt;/memories&gt;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">    return [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: system_msg&#125;, *state[&quot;messages&quot;]]</span><br></pre></td></tr></table></figure>
<p><strong>å®šä¹‰storeä¸checkpoint</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from langchain import embeddings</span><br><span class="line">from langchain_openai import OpenAIEmbeddings</span><br><span class="line">embedding=OpenAIEmbeddings(</span><br><span class="line">    api_key=&quot;sk-&quot;, </span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;,</span><br><span class="line">    model=&quot;text-embedding-v4&quot;,</span><br><span class="line">    check_embedding_ctx_length = False,</span><br><span class="line">    dimensions=1536 </span><br><span class="line">)</span><br><span class="line">store = InMemoryStore(</span><br><span class="line">    index=&#123; # å­˜å‚¨æå–çš„è®°å¿† </span><br><span class="line">        &quot;dims&quot;: 1536,</span><br><span class="line">        &quot;embed&quot;: embedding,</span><br><span class="line">    &#125;</span><br><span class="line">) </span><br><span class="line">checkpointer = MemorySaver() # æ£€æŸ¥ç‚¹å›¾çŠ¶æ€ </span><br></pre></td></tr></table></figure>
<p><strong>å®šä¹‰agent</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">from langchain_openai import ChatOpenAI</span><br><span class="line">model_qwen=ChatOpenAI(</span><br><span class="line">    api_key=&quot;sk-&quot;, </span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;,</span><br><span class="line">    model=&quot;qwen3-30b-a3b-instruct-2507&quot;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">agent = create_react_agent( </span><br><span class="line">    model=model_qwen,</span><br><span class="line">    prompt=prompt,</span><br><span class="line">    tools=[ # æ·»åŠ è®°å¿†å·¥å…· </span><br><span class="line">        # æ™ºèƒ½ä½“å¯ä»¥è°ƒç”¨ &quot;manage_memory&quot; æ¥</span><br><span class="line">        # é€šè¿‡IDåˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤è®°å¿†</span><br><span class="line">        # å‘½åç©ºé—´ä¸ºè®°å¿†æ·»åŠ ä½œç”¨åŸŸã€‚è¦</span><br><span class="line">        # ä¸ºæ¯ä¸ªç”¨æˆ·é™å®šè®°å¿†èŒƒå›´ï¼Œä½¿ç”¨ (&quot;memories&quot;, &quot;&#123;user_id&#125;&quot;): </span><br><span class="line">        create_manage_memory_tool(namespace=(&quot;memories&quot;,)),</span><br><span class="line">    ],</span><br><span class="line">    # æˆ‘ä»¬çš„è®°å¿†å°†å­˜å‚¨åœ¨è¿™ä¸ªæä¾›çš„BaseStoreå®ä¾‹ä¸­</span><br><span class="line">    store=store,</span><br><span class="line">    # å›¾çš„&quot;çŠ¶æ€&quot;å°†åœ¨æ¯ä¸ªèŠ‚ç‚¹å®Œæˆæ‰§è¡Œåè¿›è¡Œæ£€æŸ¥ç‚¹</span><br><span class="line">    # ç”¨äºè·Ÿè¸ªèŠå¤©å†å²å’ŒæŒä¹…æ‰§è¡Œ</span><br><span class="line">    checkpointer=checkpointer, </span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><strong>å¯è§†åŒ–å›¾</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">agent.get_graph().draw_mermaid_png(output_file_path=&quot;agent.png&quot;)</span><br></pre></td></tr></table></figure>
<p><strong>åœ¨çº¿ç¨‹aè®©agentè®°ä½æˆ‘ä»¬çš„åå¥½</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">config = &#123;&quot;configurable&quot;: &#123;&quot;thread_id&quot;: &quot;thread-a&quot;&#125;&#125; </span><br><span class="line">agent.invoke( </span><br><span class="line">    &#123; </span><br><span class="line">        &quot;messages&quot;: [ </span><br><span class="line">            &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;æˆ‘å–œæ¬¢é»‘è‰²çš„æ˜¾ç¤ºæ¨¡å¼&quot;&#125; </span><br><span class="line">        ] </span><br><span class="line">    &#125;, </span><br><span class="line">    # æˆ‘ä»¬å°†é€šè¿‡ä½¿ç”¨å…·æœ‰ç›¸åŒthread_idçš„config</span><br><span class="line">    # æ¥ç»§ç»­å¯¹è¯(thread-a)</span><br><span class="line">    config=config, </span><br><span class="line">) </span><br><span class="line">print(response[&quot;messages&quot;][-1].content) </span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ˜¯çš„ï¼Œæˆ‘çŸ¥é“ï¼ä½ åå¥½é»‘è‰²æ˜¾ç¤ºæ¨¡å¼ã€‚æˆ‘ä¼šåœ¨åç»­äº¤äº’ä¸­ä¿æŒè¿™ä¸€è®¾ç½®ã€‚</span><br></pre></td></tr></table></figure>
<p><strong>åœ¨çº¿ç¨‹bæŸ¥çœ‹æ˜¯å¦è®°ä½</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># æ–°çº¿ç¨‹ = æ–°å¯¹è¯ï¼</span><br><span class="line">new_config = &#123;&quot;configurable&quot;: &#123;&quot;thread_id&quot;: &quot;thread-b&quot;&#125;&#125; </span><br><span class="line"># æ™ºèƒ½ä½“åªèƒ½å›å¿†èµ·</span><br><span class="line"># å®ƒä½¿ç”¨manage_memorieså·¥å…·æ˜ç¡®ä¿å­˜çš„å†…å®¹</span><br><span class="line">response = agent.invoke( </span><br><span class="line">    &#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ã€‚ä½ è¿˜è®°å¾—æˆ‘å—ï¼Ÿä½ çŸ¥é“æˆ‘æœ‰ä»€ä¹ˆåå¥½å—ï¼Ÿ&quot;&#125;]&#125;,</span><br><span class="line">    config=new_config, </span><br><span class="line">) </span><br><span class="line">print(response[&quot;messages&quot;][-1].content) </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½ å¥½ï¼è™½ç„¶æˆ‘æ— æ³•è®°ä½ä½ ä½œä¸ºä¸ªä½“çš„è¯¦ç»†ä¿¡æ¯ï¼Œä½†æˆ‘å¯ä»¥è®¿é—®ä¸€äº›å…³äºä½ çš„åå¥½ä¿¡æ¯ã€‚æ ¹æ®ä¹‹å‰çš„è®°å½•ï¼Œæˆ‘çŸ¥é“ä½ åå¥½ä½¿ç”¨é»‘è‰²æ˜¾ç¤ºæ¨¡å¼ã€‚å¦‚æœä½ è¿˜æœ‰å…¶ä»–åå¥½æˆ–å¸Œæœ›æˆ‘è®°ä½ä»€ä¹ˆï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šå¸®ä½ è®°å½•ä¸‹æ¥ã€‚</span><br></pre></td></tr></table></figure>
<h3 id="åå°å¿«é€Ÿå…¥é—¨æŒ‡å—">åå°å¿«é€Ÿå…¥é—¨æŒ‡å—</h3>
<p>æœ¬æŒ‡å—å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langmem/background_quickstart/"><code>create_memory_store_manager</code></a>
åœ¨åå°æå–å’Œæ•´åˆè®°å¿†ã€‚å½“è®°å¿†åœ¨åå°å¤„ç†æ—¶ï¼Œæ™ºèƒ½ä½“å°†æ­£å¸¸ç»§ç»­è¿è¡Œã€‚</p>
<ol type="1">
<li><p><strong>Runnable:</strong> LangChain/LangGraph
ä¸­çš„æ ¸å¿ƒæŠ½è±¡ï¼Œä»£è¡¨ä¸€ä¸ªå¯ä»¥è¢«è°ƒç”¨ï¼ˆ<code>invoke</code>/<code>ainvoke</code>ï¼‰æ¥å¤„ç†è¾“å…¥å¹¶äº§ç”Ÿè¾“å‡ºçš„å•å…ƒã€‚<code>MemoryStoreManager</code>
æœ¬èº«å°±æ˜¯ä¸€ä¸ª Runnableã€‚</p></li>
<li><p><strong>BaseStore:</strong> LangGraph
æä¾›çš„æŒä¹…åŒ–å­˜å‚¨æ¥å£ã€‚Manager
ä¼šä½¿ç”¨å®ƒæ¥è¯»å–ï¼ˆæœç´¢ï¼‰å’Œå†™å…¥ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ï¼‰è®°å¿†ã€‚</p></li>
<li><p><strong>Memory (è®°å¿†):</strong> åœ¨ Manager
çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè®°å¿†é€šå¸¸æ˜¯æŒ‡ä»å¯¹è¯ä¸­æå–çš„ã€å€¼å¾—ä¿å­˜çš„ç‰‡æ®µä¿¡æ¯ï¼ˆå¦‚ç”¨æˆ·åå¥½ã€äº‹å®ç­‰ï¼‰ã€‚å®ƒä»¬å­˜å‚¨åœ¨
<code>BaseStore</code> ä¸­ï¼Œæœ‰è‡ªå·±çš„ <code>namespace</code> å’Œ
<code>key</code>ã€‚</p></li>
<li><p><strong>Schema (æ¨¡å¼):</strong> ä¸€ä¸ª Pydantic
æ¨¡å‹ï¼Œç”¨äºå®šä¹‰è®°å¿†çš„ç»“æ„ã€‚è¿™å…è®¸ä½ å¼ºåˆ¶è®°å¿†éµå¾ªç‰¹å®šçš„æ ¼å¼ï¼ˆä¾‹å¦‚ï¼ŒåŒ…å«
<code>category</code>, <code>preference</code>, <code>context</code>
å­—æ®µï¼‰ã€‚å¦‚æœæœªæä¾›
<code>schemas</code>ï¼Œåˆ™é»˜è®¤ä½¿ç”¨éç»“æ„åŒ–çš„å­—ç¬¦ä¸²ã€‚</p></li>
<li><p><strong>Namespace (å‘½åç©ºé—´):</strong> ç”¨äºç»„ç»‡å­˜å‚¨åœ¨
<code>BaseStore</code> ä¸­çš„è®°å¿†ã€‚æ”¯æŒä½¿ç”¨å ä½ç¬¦ï¼ˆå¦‚
<code>&#123;langgraph_user_id&#125;</code>ï¼‰è¿›è¡ŒåŠ¨æ€é…ç½®ã€‚</p></li>
<li><p>è‡ªåŠ¨åŒ–æµç¨‹:</p>
<p>Manager ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ul>
<li><strong>æœç´¢ (Search):</strong> æ ¹æ®æ–°å¯¹è¯å†…å®¹ï¼Œåœ¨
<code>BaseStore</code> ä¸­æŸ¥æ‰¾ç›¸å…³çš„ç°æœ‰è®°å¿†ã€‚</li>
<li><strong>åˆ†æ/æå– (Analyze/Extract):</strong> ä½¿ç”¨ LLM
åˆ†ææ–°å¯¹è¯å’Œæ£€ç´¢åˆ°çš„è®°å¿†ï¼Œå†³å®šæ˜¯å¦éœ€è¦åˆ›å»ºæ–°è®°å¿†ã€æ›´æ–°ç°æœ‰è®°å¿†æˆ–åˆ é™¤è¿‡æ—¶è®°å¿†ã€‚</li>
<li><strong>åº”ç”¨æ›´æ”¹ (Apply Changes):</strong>
å°†åˆ†æç»“æœï¼ˆè®°å¿†çš„å¢åˆ æ”¹ï¼‰å†™å›åˆ° <code>BaseStore</code>ã€‚</li>
</ul></li>
</ol>
<h4 id="å®æˆ˜-1">å®æˆ˜</h4>
<p><strong>å¯¼å…¥åº“</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from langchain.chat_models import init_chat_model </span><br><span class="line">from langgraph.func import entrypoint </span><br><span class="line">from langgraph.store.memory import InMemoryStore </span><br><span class="line"></span><br><span class="line">from langmem import ReflectionExecutor, create_memory_store_manager </span><br></pre></td></tr></table></figure>
<p><strong>å®šä¹‰store</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from langchain_openai import OpenAIEmbeddings</span><br><span class="line">embedding=OpenAIEmbeddings(</span><br><span class="line">    api_key=&quot;sk-&quot;, </span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;,</span><br><span class="line">    model=&quot;text-embedding-v4&quot;,</span><br><span class="line">    check_embedding_ctx_length = False,</span><br><span class="line">    dimensions=1536 </span><br><span class="line">)</span><br><span class="line">store = InMemoryStore(</span><br><span class="line">    index=&#123; # å­˜å‚¨æå–çš„è®°å¿† </span><br><span class="line">        &quot;dims&quot;: 1536,</span><br><span class="line">        &quot;embed&quot;: embedding,</span><br><span class="line">    &#125;</span><br><span class="line">) </span><br></pre></td></tr></table></figure>
<p><strong>åˆ›å»ºè®°å¿†ç®¡ç†å™¨</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºè®°å¿†ç®¡ç†å™¨ Runnable æ¥ä»å¯¹è¯ä¸­æå–è®°å¿†</span><br><span class="line">memory_manager = create_memory_store_manager( </span><br><span class="line">    model_qwen, </span><br><span class="line">    # å°†è®°å¿†å­˜å‚¨åœ¨ &quot;memories&quot; å‘½åç©ºé—´ï¼ˆå³ç›®å½•ï¼‰ä¸­</span><br><span class="line">    namespace=(&quot;memories&quot;,),  </span><br><span class="line">    instructions=&quot;ç”¨ä¸­æ–‡å­˜å‚¨è®°å¿†ã€‚&quot;</span><br><span class="line">) </span><br><span class="line"></span><br><span class="line"># åŒ…è£… memory_manager ä»¥å¤„ç†å»¶è¿Ÿçš„åå°å¤„ç†</span><br><span class="line">executor = ReflectionExecutor(memory_manager) </span><br></pre></td></tr></table></figure>
<p>å¯¹æ¯æ¡æ¶ˆæ¯éƒ½è¿›è¡Œè®°å¿†å¤„ç†å­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š -
å½“æ¶ˆæ¯å¿«é€Ÿè¿ç»­åˆ°è¾¾æ—¶ï¼Œä¼šäº§ç”Ÿå†—ä½™å·¥ä½œ -
åœ¨å¯¹è¯ä¸­é€”è¿›è¡Œå¤„ç†æ—¶ï¼Œä¸Šä¸‹æ–‡ä¸å®Œæ•´ - ä¸å¿…è¦çš„ token æ¶ˆè€—</p>
<p><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langmem/reference/utils/#langmem.ReflectionExecutor"><code>ReflectionExecutor</code></a>
å¯ä»¥å»¶è¿Ÿè®°å¿†å¤„ç†å¹¶å–æ¶ˆå†—ä½™å·¥ä½œã€‚</p>
<p><strong>åˆ›å»ºå·¥ä½œæµ</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">from langchain_openai import ChatOpenAI</span><br><span class="line">model_qwen=ChatOpenAI(</span><br><span class="line">    api_key=&quot;sk-&quot;, </span><br><span class="line">    base_url=&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;,</span><br><span class="line">    model=&quot;qwen3-30b-a3b-instruct-2507&quot;,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">@entrypoint(store=store)  # åˆ›å»ºä¸€ä¸ª LangGraph å·¥ä½œæµ</span><br><span class="line">async def chat(message: str): </span><br><span class="line">    response = model_qwen.invoke(message) </span><br><span class="line"></span><br><span class="line">    # memory_manager ä»å¯¹è¯å†å²ä¸­æå–è®°å¿†</span><br><span class="line">    # æˆ‘ä»¬å°†ä»¥ OpenAI çš„æ¶ˆæ¯æ ¼å¼æä¾›å®ƒ</span><br><span class="line">    to_process = &#123;&quot;messages&quot;: [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: message&#125;] + [response]&#125; </span><br><span class="line">    await memory_manager.ainvoke(to_process)  </span><br><span class="line">    return response.content </span><br><span class="line"></span><br><span class="line"># æ­£å¸¸è¿è¡Œå¯¹è¯</span><br><span class="line">response = await chat.ainvoke( </span><br><span class="line">    &quot;è®°ä½æˆ‘æ˜¯å¼ ç†™æµš&quot;, </span><br><span class="line">) </span><br><span class="line">print(response) </span><br></pre></td></tr></table></figure>
<p><strong>æŸ¥çœ‹è®°å¿†</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(store.search((&quot;memories&quot;,)))</span><br></pre></td></tr></table></figure>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langmem/">ç®€ä»‹ - LangChain
æ¡†æ¶</a></p>
<p><a target="_blank" rel="noopener" href="https://github.langchain.ac.cn/langmem/concepts/conceptual_guide/#semantic-memory-facts-and-knowledge">æ ¸å¿ƒæ¦‚å¿µ
- LangChain æ¡†æ¶</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/08/14/%E5%AD%A6%E4%B9%A0/ai%E7%9B%B8%E5%85%B3/A2A%E5%8D%8F%E8%AE%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/zxjavatar.gif">
      <meta itemprop="name" content="å¼ ç†™æµš">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhang XiJun">
      <meta itemprop="description" content="zxj Blogs">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Zhang XiJun">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/08/14/%E5%AD%A6%E4%B9%A0/ai%E7%9B%B8%E5%85%B3/A2A%E5%8D%8F%E8%AE%AE/" class="post-title-link" itemprop="url">A2Aåè®®</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2025-08-14 00:00:00" itemprop="dateCreated datePublished" datetime="2025-08-14T00:00:00+08:00">2025-08-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2025-08-28 15:09:28" itemprop="dateModified" datetime="2025-08-28T15:09:28+08:00">2025-08-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ai%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">aiç›¸å…³</span></a>
        </span>
          ï¼Œ
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ai%E7%9B%B8%E5%85%B3/A2A%E5%8D%8F%E8%AE%AE/" itemprop="url" rel="index"><span itemprop="name">A2Aåè®®</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="å‰è¨€">å‰è¨€</h3>
<p>å°±æ˜¯clientè°ƒç”¨agenté‚£ä¸€å—ï¼Œæ„Ÿè§‰è¿˜æ˜¯æ¯”è¾ƒå›°æƒ‘ï¼Œæˆ‘çœ‹ä¾‹å­æ˜¯è¦é€šè¿‡å®šä¹‰ç»™çš„executå’Œcancelå‡½æ•°ï¼Œé‚£å°±æ„å‘³ç€agentæä¾›è€…éƒ½è¦å»è‡ªå·±å»å®šä¹‰è¿™äº›æ€ä¹ˆæ‰§è¡Œçš„å‡½æ•°ï¼Œè¿˜æœ‰æè¿°agentçš„skillå’Œcardï¼Œå·¥ä½œé‡æ˜æ˜¾æ¯”mcpå¤§äº†å¾ˆå¤šï¼Œå¯èƒ½è¿™ä¹Ÿæ˜¯ç°åœ¨a2aä¼ æ’­æ²¡æœ‰mcpå¥½çš„ä¸€å¤§åŸå› å§ï¼Œæˆ‘çš„ç†è§£ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹</p>
<hr>
<p>æ€è€ƒï¼šç°åœ¨åˆ©ç”¨a2aæ­å»ºå¤šagentçš„ç°å®ä¾‹å­å¤šå—ï¼Œä»æ¦‚å¿µä¸Šï¼Œæˆ‘è®¤ä¸ºa2açš„æ€è·¯æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ„Ÿè§‰ä¸‹æ¥ï¼Œç°åœ¨å¤§å¤šæ•°çš„å¤šagentçš„å®ç°æ–¹å¼è¿˜æ˜¯åƒlanggraphä¸­<strong>æ¡ä»¶è¾¹</strong>æ¥æ§åˆ¶ä½¿ç”¨å“ªä¸ªagentï¼Œæ˜¯ä¸æ˜¯å› ä¸ºa2aå¯¹äºä¸­å°å¼€å‘è€…æ­å»ºèµ·æ¥è¿˜æ˜¯æœ‰äº›å¤æ‚ï¼Œä½†æˆ‘è¿˜æ˜¯è®¤ä¸ºä»–è¿™ç§äºmcpç±»ä¼¼ï¼Œæ¨¡å—åŒ–ï¼Œå¯ä»¥è‡ªå®šä¹‰çš„å½¢å¼ä¼šæ˜¯åç»­æ–¹å‘ã€‚å°±åƒç°åœ¨çš„mcp
clientï¼Œå¯ä»¥åœ¨å¸‚åœºä¸Šä¸‹è½½è‡ªå·±æƒ³è¦çš„mcpï¼Œåˆ©ç”¨a2aåè®®ï¼Œç”¨æˆ·å¯ä»¥åœ¨å¸‚åœºä¸Šä¸‹è½½æƒ³ç”¨çš„agentï¼Œæ­å»ºè‡ªå·±çš„å¤šagentç®¡å®¶ï¼Œç°åœ¨å¸‚åœºä¸Šæœ‰ç±»ä¼¼çš„äº§å“å—ï¼Ÿ</p>
<p>a2aåè®®å…¶å®ä¸mcpç±»ä¼¼ï¼Œå¯¹è±¡ä¸åŒï¼Œä¸€ä¸ªæ˜¯mcp clientä¸mcp
serverï¼ˆtoolï¼‰ï¼Œä¸€ä¸ªæ˜¯agent clientä¸agent
serverã€‚å…·ä½“å®ç°ä¸­ï¼Œéœ€è¦å®Œæˆå¯¹agent
serverçš„ä¿¡æ¯æš´éœ²ä¸executorçš„ç¼–å†™ï¼Œä»¥ä¾¿è®©clientæ­£ç¡®è°ƒç”¨agentï¼Œè°ƒç”¨å‰è¦å¯åŠ¨æœåŠ¡ã€‚</p>
<p>ä¸€ä¸ªagent
serveræ‰€è¦åŒ…å«çš„è¦ç´ åŒ…æ‹¬ï¼š1.AgentSkillï¼Œç”¨äºæè¿°agentå¯ä»¥å®ç°çš„èƒ½åŠ›</p>
<p>2.AgentCardï¼Œæè¿°agentçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿è¡Œçš„urlï¼Œè¾“å…¥å’Œè¿”å›çš„æ•°æ®ç±»å‹ï¼Œæ‰€åŒ…å«çš„skills</p>
<p>3.AgentExecutorï¼Œå®šä¹‰äº†å¦‚ä½•æ‰§è¡Œæ™ºèƒ½ä½“ï¼Œé€šè¿‡å®šä¹‰executeæ–¹æ³•ï¼Œä»¥ä¾¿æ­£ç¡®è°ƒç”¨agent
server</p>
<p>4.é€šè¿‡DefaultRequestHandlerï¼Œå°è£…è°ƒç”¨agentçš„æ¥å£ï¼Œä¸ç”¨å†æ‰‹å†™æ¥å£ï¼Œåªè¦æä¾›ä¸€ä¸ª
executor å’Œä¸€ä¸ª store
å³å¯ï¼Œæ”¶åˆ°å¯¹è¯å†…å®¹åï¼Œ<code>DefaultRequestHandler</code>
ä¼šæŠŠå¯¹è¯æ‰“åŒ…æˆä»»åŠ¡ï¼Œäº¤ç»™ <code>HelloWorldAgentExecutor</code>
å»æ‰§è¡Œã€‚ã€</p>
<p>5.é€šè¿‡A2AStarletteApplicationæ‰“åŒ…æˆåº”ç”¨ï¼ˆå¦‚fastapiï¼‰ï¼Œä»–çš„ä½œç”¨å¦‚ä¸‹ï¼š1.æŠŠè¿™ä¸ª
handler æ³¨å†ŒæˆçœŸæ­£çš„ HTTP è·¯ç”±ï¼Œäºæ˜¯å¤–éƒ¨å°±èƒ½é€šè¿‡ <code>POST /</code>
è°ƒç”¨ä¸Šè¿° JSON-RPC æ–¹æ³•ã€‚2.å¯¹å¤–æš´éœ²åç‰‡</p>
<h3 id="ä»€ä¹ˆæ˜¯a2aåè®®">ä»€ä¹ˆæ˜¯A2Aåè®®</h3>
<p>A2A åè®®ï¼ˆAgent2Agent Protocolï¼Œæ™ºèƒ½ä½“é—´é€šä¿¡åè®®ï¼‰æ˜¯ Google åœ¨ 2025
å¹´ 4 æœˆå‘å¸ƒå¹¶å¼€æºçš„é¦–ä¸ª AI
æ™ºèƒ½ä½“äº¤äº’æ ‡å‡†ã€‚å®ƒé€šè¿‡ç»Ÿä¸€çš„é€šä¿¡è§„èŒƒï¼Œè§£å†³ä¸åŒå›¢é˜Ÿã€ä¸åŒæ¡†æ¶ã€ä¸åŒä¾›åº”å•†å¼€å‘çš„
AI æ™ºèƒ½ä½“å¦‚ä½•â€œå¯¹è¯â€å’ŒååŒå·¥ä½œçš„é—®é¢˜ã€‚</p>
<blockquote>
<p>ä¸mcpåŒºåˆ†ï¼Œ<strong>MCP</strong> è§£å†³
<strong>â€œå•ä¸ªæ™ºèƒ½ä½“å¦‚ä½•è°ƒç”¨å¤–éƒ¨å·¥å…·/æ•°æ®â€</strong>
çš„é—®é¢˜ï¼Œè€Œ<strong>A2A</strong> è§£å†³
<strong>â€œå¤šä¸ªæ™ºèƒ½ä½“å¦‚ä½•ååŒå®Œæˆä»»åŠ¡â€</strong> çš„é—®é¢˜ã€‚</p>
</blockquote>
<figure>
<img src="/2025/08/14/%E5%AD%A6%E4%B9%A0/ai%E7%9B%B8%E5%85%B3/A2A%E5%8D%8F%E8%AE%AE/image-20250809222720192.png" alt="image-20250809222720192">
<figcaption aria-hidden="true">image-20250809222720192</figcaption>
</figure>
<h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨a2aåè®®">ä¸ºä»€ä¹ˆè¦ä½¿ç”¨A2Aåè®®</h3>
<p>éšç€ AI åº”ç”¨æ·±åŒ–ï¼Œå•ä¸€â€œä¸‡èƒ½â€æ¨¡å‹éš¾ä»¥å…¼é¡¾æ‰€æœ‰é¢†åŸŸã€‚A2A
é¼“åŠ±æ„å»ºâ€œå°è€Œä¸“â€çš„æ™ºèƒ½ä½“ç”Ÿæ€ï¼š</p>
<ul>
<li>æ¯ä¸ªæ™ºèƒ½ä½“ä¸“æ³¨ä¸€ä¸ªé¢†åŸŸï¼ˆå¦‚è®¢ç¥¨ã€æŠ¥ç¨ã€å›¾åƒå¤„ç†ï¼‰ã€‚</li>
<li>é€šè¿‡ A2A
åè®®ï¼Œå®ƒä»¬åƒä¹é«˜ç§¯æœ¨ä¸€æ ·è‡ªç”±ç»„åˆï¼Œå¿«é€Ÿå“åº”æ–°çš„ä¸šåŠ¡éœ€æ±‚ã€‚</li>
</ul>
<p>æ¯”å¦‚ä½ è®©ä¸€ä¸ªagentä½¿ç”¨å¤šä¸ªå·¥å…·ï¼Œä¸ä»…ä¼šæµªè´¹tokensï¼Œä¹Ÿä¼šé™ä½å…¶è°ƒç”¨å·¥å…·çš„å‡†ç¡®æ€§ã€‚æ‰€æœ‰ï¼Œä¸“ä¸šçš„é¢†åŸŸä½¿ç”¨ä¸“ä¸šçš„agentï¼Œè€Œagenté—´çš„é€šä¿¡ä¾¿è¦ä¾é A2Aåè®®</p>
<h3 id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®</h3>
<p><strong>å…‹éš†ä»“åº“</strong></p>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰å…‹éš†ï¼Œè¯·å…‹éš† A2A Samples ä»“åº“ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/a2aproject/a2a-samples.git -b main --depth 1</span><br><span class="line">cd a2a-samples</span><br></pre></td></tr></table></figure>
<p><strong>Python ç¯å¢ƒå’Œ SDK å®‰è£…</strong></p>
<p>æˆ‘ä»¬æ¨èä¸º Python é¡¹ç›®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒã€‚A2A Python SDK ä½¿ç”¨
<code>uv</code> è¿›è¡Œä¾èµ–ç®¡ç†ï¼Œä½†ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>pip</code> ä¸
<code>venv</code>ã€‚</p>
<ol type="1">
<li><p><strong>åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š</strong></p>
<p>ä½¿ç”¨ <code>venv</code>ï¼ˆæ ‡å‡†åº“ï¼‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python -m venv .venv</span><br><span class="line">source .venv/bin/activate</span><br></pre></td></tr></table></figure></li>
<li><p><strong>å®‰è£…æ‰€éœ€çš„ Python ä¾èµ–é¡¹ä»¥åŠ A2A SDK
åŠå…¶ä¾èµ–é¡¹ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r samples/python/requirements.txt</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="agent-skills-agent-card">Agent Skills &amp; Agent Card</h3>
<h4 id="agent-skills">Agent Skills</h4>
<p>ä¸€ä¸ª<strong>ä»£ç†æŠ€èƒ½</strong>æè¿°äº†ä»£ç†å¯ä»¥æ‰§è¡Œçš„å…·ä½“èƒ½åŠ›æˆ–åŠŸèƒ½ã€‚å®ƒæ˜¯å‘Šè¯‰å®¢æˆ·ç«¯ä»£ç†æ“…é•¿å“ªäº›ä»»åŠ¡çš„æ„å»ºæ¨¡å—ã€‚</p>
<p><code>AgentSkill</code> çš„å…³é”®å±æ€§ï¼ˆå®šä¹‰åœ¨ <code>a2a.types</code>
ä¸­ï¼‰ï¼š</p>
<ul>
<li><code>id</code>: æŠ€èƒ½çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li>
<li><code>name</code>: äººç±»å¯è¯»çš„åç§°ã€‚</li>
<li><code>description</code>ï¼šå¯¹æŠ€èƒ½åŠŸèƒ½çš„æ›´è¯¦ç»†è¯´æ˜ã€‚</li>
<li><code>tags</code>ï¼šç”¨äºåˆ†ç±»å’Œå‘ç°çš„å…³é”®è¯ã€‚</li>
<li><code>examples</code>ï¼šç¤ºä¾‹æç¤ºæˆ–ä½¿ç”¨æ¡ˆä¾‹ã€‚</li>
<li><code>inputModes</code> / <code>outputModes</code>:
æ”¯æŒçš„è¾“å…¥å’Œè¾“å‡ºåª’ä½“ç±»å‹ï¼ˆä¾‹å¦‚ï¼Œâ€œtext/plainâ€ï¼Œâ€œapplication/jsonâ€ï¼‰ã€‚</li>
</ul>
<p>åœ¨ <code>__main__.py</code> ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°å¦‚ä½•ä¸º Helloworld
ä»£ç†å®šä¹‰ä¸€ä¸ªæŠ€èƒ½ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">skill = AgentSkill(</span><br><span class="line">    id=&#x27;hello_world&#x27;,</span><br><span class="line">    name=&#x27;Returns hello world&#x27;,</span><br><span class="line">    description=&#x27;just returns hello world&#x27;,</span><br><span class="line">    tags=[&#x27;hello world&#x27;],</span><br><span class="line">    examples=[&#x27;hi&#x27;, &#x27;hello world&#x27;],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæŠ€èƒ½éå¸¸ç®€å•ï¼šå®ƒçš„åç§°æ˜¯ â€œReturns hello
worldâ€ï¼Œå¹¶ä¸”ä¸»è¦å¤„ç†æ–‡æœ¬ã€‚</p>
<h4 id="agent-card">Agent Card</h4>
<p><strong>ä»£ç†å¡</strong>æ˜¯ä¸€ä¸ª A2A æœåŠ¡å™¨æä¾›çš„ JSON æ–‡æ¡£ï¼Œé€šå¸¸ä½äº
<code>.well-known/agent-card.json</code>
ç«¯ç‚¹ã€‚å®ƒå°±åƒä»£ç†çš„æ•°å­—åç‰‡ã€‚</p>
<p><code>AgentCard</code> çš„å…³é”®å±æ€§ï¼ˆå®šä¹‰åœ¨ <code>a2a.types</code>
ä¸­ï¼‰ï¼š</p>
<ul>
<li><code>name</code>, <code>description</code>, <code>version</code>:
åŸºæœ¬èº«ä»½ä¿¡æ¯ã€‚</li>
<li><code>url</code>ï¼šA2A æœåŠ¡å¯è®¿é—®çš„ç«¯ç‚¹ã€‚</li>
<li><code>capabilities</code>ï¼šæŒ‡å®šæ”¯æŒçš„ A2A åŠŸèƒ½ï¼Œå¦‚
<code>streaming</code> æˆ– <code>pushNotifications</code>ã€‚</li>
<li><code>defaultInputModes</code> / <code>defaultOutputModes</code>:
ä»£ç†çš„é»˜è®¤åª’ä½“ç±»å‹ã€‚</li>
<li><code>skills</code>: ä»£ç†æä¾›çš„ <code>AgentSkill</code>
å¯¹è±¡åˆ—è¡¨ã€‚</li>
</ul>
<p><code>helloworld</code> ç¤ºä¾‹å®šä¹‰å…¶ Agent Card å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># This will be the public-facing agent card</span><br><span class="line">public_agent_card = AgentCard(</span><br><span class="line">    name=&#x27;Hello World Agent&#x27;,</span><br><span class="line">    description=&#x27;Just a hello world agent&#x27;,</span><br><span class="line">    url=&#x27;http://localhost:9999/&#x27;,</span><br><span class="line">    version=&#x27;1.0.0&#x27;,</span><br><span class="line"> 	# é»˜è®¤è¾“å…¥æ¨¡å¼ï¼šAgent èƒ½å¤Ÿæ¥æ”¶çš„è¾“å…¥ç±»å‹åˆ—è¡¨ï¼Œè¿™é‡Œä»…æ”¯æŒçº¯æ–‡æœ¬</span><br><span class="line">    default_input_modes=[&#x27;text&#x27;],</span><br><span class="line">    # é»˜è®¤è¾“å‡ºæ¨¡å¼ï¼šAgent èƒ½å¤Ÿäº§ç”Ÿçš„è¾“å‡ºç±»å‹åˆ—è¡¨ï¼Œè¿™é‡Œä»…è¿”å›çº¯æ–‡æœ¬</span><br><span class="line">    default_output_modes=[&#x27;text&#x27;],</span><br><span class="line">    # èƒ½åŠ›å£°æ˜ï¼šå‘ŠçŸ¥è°ƒç”¨æ–¹ Agent æ”¯æŒçš„èƒ½åŠ›ï¼Œä¾‹å¦‚æ˜¯å¦æ”¯æŒæµå¼è¾“å‡ºï¼ˆstreamingï¼‰</span><br><span class="line">    capabilities=AgentCapabilities(streaming=True),</span><br><span class="line">    skills=[skill],  # Only the basic skill for the public card</span><br><span class="line">    supports_authenticated_extended_card=True,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>è¿™å¼ å¡ç‰‡å‘Šè¯‰æˆ‘ä»¬ä»£ç†åä¸º â€œHello World Agentâ€ï¼Œè¿è¡Œåœ¨
<code>http://localhost:9999/</code>ï¼Œæ”¯æŒæ–‡æœ¬äº¤äº’ï¼Œå¹¶å…·æœ‰
<code>hello_world</code>
æŠ€èƒ½ã€‚å®ƒè¿˜è¡¨æ˜æ”¯æŒå…¬å¼€è®¤è¯ï¼Œæ„å‘³ç€æ— éœ€ç‰¹å®šå‡­è¯ã€‚</p>
<h3 id="agent-executor">Agent Executor</h3>
<p>A2A ä»£ç†å¤„ç†è¯·æ±‚å’Œç”Ÿæˆå“åº”/äº‹ä»¶çš„æ ¸å¿ƒé€»è¾‘ç”±ä¸€ä¸ª <strong>Agent
Executor</strong> è´Ÿè´£ã€‚A2A Python SDK æä¾›äº†ä¸€ä¸ªæŠ½è±¡åŸºç±»
<code>a2a.server.agent_execution.AgentExecutor</code> ä¾›ä½ å®ç°ã€‚</p>
<p><strong><code>AgentExecutor</code> æ¥å£</strong></p>
<p><code>AgentExecutor</code> ç±»å®šä¹‰äº†ä¸¤ä¸ªä¸»è¦æ–¹æ³•ï¼š</p>
<ul>
<li><code>async def execute(self, context: RequestContext, event_queue: EventQueue)</code>
: å¤„ç†æœŸæœ›å“åº”æˆ–äº‹ä»¶æµçš„ä¼ å…¥è¯·æ±‚ã€‚å®ƒå¤„ç†ç”¨æˆ·è¾“å…¥ï¼ˆå¯é€šè¿‡
<code>context</code> è·å–ï¼‰å¹¶ä½¿ç”¨ <code>event_queue</code> å‘é€
<code>Message</code>ã€<code>Task</code>ã€<code>TaskStatusUpdateEvent</code>
æˆ– <code>TaskArtifactUpdateEvent</code> å¯¹è±¡ã€‚</li>
<li><code>async def cancel(self, context: RequestContext, event_queue: EventQueue)</code>
: å¤„ç†å–æ¶ˆæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡çš„è¯·æ±‚ã€‚</li>
</ul>
<p><code>RequestContext</code>
æä¾›æœ‰å…³ä¼ å…¥è¯·æ±‚çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·æ¶ˆæ¯å’Œä»»ä½•ç°æœ‰çš„ä»»åŠ¡è¯¦æƒ…ã€‚<code>EventQueue</code>
ç”±æ‰§è¡Œå™¨ä½¿ç”¨ï¼Œç”¨äºå°†äº‹ä»¶å‘é€å›å®¢æˆ·ç«¯ã€‚</p>
<p><strong>Helloworld AgentExecutor</strong></p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ <code>agent_executor.py</code>ã€‚å®ƒå®šä¹‰äº†
<code>HelloWorldAgentExecutor</code>ã€‚</p>
<ol type="1">
<li><p><strong>ä»£ç†ï¼ˆ<code>HelloWorldAgent</code>ï¼‰</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªç®€å•çš„è¾…åŠ©ç±»ï¼Œå°è£…äº†å®é™…çš„â€œä¸šåŠ¡é€»è¾‘â€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class HelloWorldAgent:</span><br><span class="line">    &quot;&quot;&quot;Hello World Agent.&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    async def invoke(self) -&gt; str:</span><br><span class="line">        return &#x27;Hello World&#x27;</span><br></pre></td></tr></table></figure>
<p>å®ƒæœ‰ä¸€ä¸ªç®€å•çš„ <code>invoke</code> æ–¹æ³•ï¼Œè¿”å›å­—ç¬¦ä¸²â€Hello
Worldâ€ã€‚</p></li>
<li><p><strong>æ‰§è¡Œå™¨ï¼ˆ<code>HelloWorldAgentExecutor</code>ï¼‰</strong>ï¼šè¿™ä¸ªç±»å®ç°äº†
<code>AgentExecutor</code> æ¥å£ã€‚</p>
<ul>
<li><p><strong><code>__init__</code></strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class HelloWorldAgentExecutor(AgentExecutor):</span><br><span class="line">    &quot;&quot;&quot;Test AgentProxy Implementation.&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.agent = HelloWorldAgent()</span><br></pre></td></tr></table></figure>
<p>å®ƒå®ä¾‹åŒ–äº† <code>HelloWorldAgent</code>ã€‚</p></li>
<li><p><strong><code>execute</code></strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">async def execute(</span><br><span class="line">    self,</span><br><span class="line">    context: RequestContext,</span><br><span class="line">    event_queue: EventQueue,</span><br><span class="line">) -&gt; None:</span><br><span class="line">    result = await self.agent.invoke()</span><br><span class="line">    await event_queue.enqueue_event(new_agent_text_message(result))</span><br></pre></td></tr></table></figure>
<p>å½“æ”¶åˆ°ä¸€ä¸ª <code>message/send</code> æˆ– <code>message/stream</code>
è¯·æ±‚æ—¶ï¼ˆè¿™ä¸¤ç§è¯·æ±‚åœ¨è¿™ä¸ªç®€åŒ–çš„æ‰§è¡Œå™¨ä¸­å‡ç”± <code>execute</code>
å¤„ç†ï¼‰ï¼š</p>
<ol type="1">
<li>å®ƒè°ƒç”¨ <code>self.agent.invoke()</code> æ¥è·å– â€œHello Worldâ€
å­—ç¬¦ä¸²ã€‚</li>
<li>å®ƒä½¿ç”¨ <code>new_agent_text_message</code> å·¥å…·å‡½æ•°åˆ›å»ºä¸€ä¸ª A2A
<code>Message</code> å¯¹è±¡ã€‚</li>
<li>å®ƒå°†æ­¤æ¶ˆæ¯å…¥é˜Ÿåˆ° <code>event_queue</code>ã€‚åº•å±‚çš„
<code>DefaultRequestHandler</code>
éšåä¼šå¤„ç†è¿™ä¸ªé˜Ÿåˆ—ä»¥å‘å®¢æˆ·ç«¯å‘é€å“åº”ã€‚å¯¹äºåƒè¿™æ ·çš„ä¸€æ¡æ¶ˆæ¯ï¼Œåœ¨æµå…³é—­ä¹‹å‰ï¼Œå®ƒå°†å¯¼è‡´ä¸€ä¸ª
<code>message/send</code> çš„å•ä¸€å“åº”æˆ–ä¸€ä¸ª <code>message/stream</code>
çš„å•ä¸€äº‹ä»¶ã€‚</li>
</ol></li>
<li><p><strong><code>cancel</code></strong>: Helloworld ç¤ºä¾‹çš„
<code>cancel</code>
æ–¹æ³•ç®€å•åœ°æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¡¨æ˜è¿™ä¸ªåŸºæœ¬ä»£ç†ä¸æ”¯æŒå–æ¶ˆæ“ä½œã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">async def cancel(</span><br><span class="line">    self, context: RequestContext, event_queue: EventQueue</span><br><span class="line">) -&gt; None:</span><br><span class="line">    raise Exception(&#x27;cancel not supported&#x27;)</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ol>
<p><code>AgentExecutor</code> å……å½“ A2A
åè®®ï¼ˆç”±è¯·æ±‚å¤„ç†å™¨å’ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºç®¡ç†ï¼‰ä¸æ‚¨çš„ä»£ç†ç‰¹å®šé€»è¾‘ä¹‹é—´çš„æ¡¥æ¢ã€‚å®ƒæ¥æ”¶å…³äºè¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨äº‹ä»¶é˜Ÿåˆ—æ¥é€šä¿¡ç»“æœæˆ–æ›´æ–°ã€‚</p>
<h3 id="å¯åŠ¨server">å¯åŠ¨server</h3>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº† Agent Card å’Œ Agent Executorï¼Œå¯ä»¥è®¾ç½®å¹¶å¯åŠ¨ A2A
æœåŠ¡å™¨ã€‚</p>
<p>A2A Python SDK æä¾›äº†ä¸€ä¸ª <code>A2AStarletteApplication</code>
ç±»ï¼Œç®€åŒ–äº†è¿è¡Œç¬¦åˆ A2A æ ‡å‡†çš„ HTTP æœåŠ¡å™¨ã€‚å®ƒä½¿ç”¨ <a target="_blank" rel="noopener" href="https://www.starlette.io/">Starlette</a> ä½œä¸º Web æ¡†æ¶ï¼Œé€šå¸¸ä¸ <a target="_blank" rel="noopener" href="https://www.uvicorn.org/">Uvicorn</a> ç­‰ ASGI æœåŠ¡å™¨ä¸€èµ·è¿è¡Œã€‚</p>
<p>è®©æˆ‘ä»¬å†æ¬¡æŸ¥çœ‹
<code>__main__.py</code>ï¼Œçœ‹çœ‹æœåŠ¡å™¨æ˜¯å¦‚ä½•åˆå§‹åŒ–å’Œå¯åŠ¨çš„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">import uvicorn</span><br><span class="line"></span><br><span class="line">from a2a.server.apps import A2AStarletteApplication</span><br><span class="line">from a2a.server.request_handlers import DefaultRequestHandler</span><br><span class="line">from a2a.server.tasks import InMemoryTaskStore</span><br><span class="line">from a2a.types import (</span><br><span class="line">    AgentCapabilities,</span><br><span class="line">    AgentCard,</span><br><span class="line">    AgentSkill,</span><br><span class="line">)</span><br><span class="line">from agent_executor import (</span><br><span class="line">    HelloWorldAgentExecutor,  # type: ignore[import-untyped]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    skill = AgentSkill(</span><br><span class="line">        id=&#x27;hello_world&#x27;,</span><br><span class="line">        name=&#x27;è¿”å› hello world&#x27;,</span><br><span class="line">        description=&#x27;ç®€å•åœ°è¿”å› hello world&#x27;,</span><br><span class="line">        tags=[&#x27;hello world&#x27;],</span><br><span class="line">        examples=[&#x27;hi&#x27;, &#x27;hello world&#x27;],</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    extended_skill = AgentSkill(</span><br><span class="line">        id=&#x27;super_hello_world&#x27;,</span><br><span class="line">        name=&#x27;è¿”å› SUPER Hello World&#x27;,</span><br><span class="line">        description=&#x27;ä»…é™å·²è®¤è¯ç”¨æˆ·ä½¿ç”¨çš„æ›´çƒ­æƒ…çš„é—®å€™ã€‚&#x27;,</span><br><span class="line">        tags=[&#x27;hello world&#x27;, &#x27;super&#x27;, &#x27;extended&#x27;],</span><br><span class="line">        examples=[&#x27;super hi&#x27;, &#x27;give me a super hello&#x27;],</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    # è¿™æ˜¯é¢å‘å…¬ä¼—çš„ Agent å¡ç‰‡</span><br><span class="line">    public_agent_card = AgentCard(</span><br><span class="line">        name=&#x27;Hello World Agent&#x27;,</span><br><span class="line">        description=&#x27;åªæ˜¯ä¸€ä¸ª hello world ä»£ç†&#x27;,</span><br><span class="line">        url=&#x27;http://localhost:9999/&#x27;,</span><br><span class="line">        version=&#x27;1.0.0&#x27;,</span><br><span class="line">        default_input_modes=[&#x27;text&#x27;],</span><br><span class="line">        default_output_modes=[&#x27;text&#x27;],</span><br><span class="line">        capabilities=AgentCapabilities(streaming=True),</span><br><span class="line">        skills=[skill],  # å…¬å¼€å¡ç‰‡ä»…åŒ…å«åŸºç¡€æŠ€èƒ½</span><br><span class="line">        supports_authenticated_extended_card=True,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    # è¿™æ˜¯å·²è®¤è¯ç”¨æˆ·çš„æ‰©å±• Agent å¡ç‰‡</span><br><span class="line">    # é¢å¤–åŒ…å« &#x27;extended_skill&#x27;</span><br><span class="line">    specific_extended_agent_card = public_agent_card.model_copy(</span><br><span class="line">        update=&#123;</span><br><span class="line">            &#x27;name&#x27;: &#x27;Hello World Agent - Extended Edition&#x27;,  # ä½¿ç”¨ä¸åŒåç§°ä»¥ä¾¿åŒºåˆ†</span><br><span class="line">            &#x27;description&#x27;: &#x27;é¢å‘å·²è®¤è¯ç”¨æˆ·çš„å®Œæ•´åŠŸèƒ½ hello world ä»£ç†ã€‚&#x27;,</span><br><span class="line">            &#x27;version&#x27;: &#x27;1.0.1&#x27;,  # ç”šè‡³å¯ä»¥æ˜¯ä¸åŒçš„ç‰ˆæœ¬</span><br><span class="line">            # capabilities åŠå…¶ä»–å­—æ®µï¼ˆå¦‚ urlã€default_input_modesã€default_output_modesã€</span><br><span class="line">            # supports_authenticated_extended_cardï¼‰å‡ä» public_agent_card ç»§æ‰¿ï¼Œ</span><br><span class="line">            # é™¤éåœ¨æ­¤å¤„å¦è¡ŒæŒ‡å®šã€‚</span><br><span class="line">            &#x27;skills&#x27;: [</span><br><span class="line">                skill,</span><br><span class="line">                extended_skill,</span><br><span class="line">            ],  # æ‰©å±•å¡ç‰‡åŒ…å«ä¸¤ä¸ªæŠ€èƒ½</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    request_handler = DefaultRequestHandler(</span><br><span class="line">        agent_executor=HelloWorldAgentExecutor(),</span><br><span class="line">        task_store=InMemoryTaskStore(),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    server = A2AStarletteApplication(</span><br><span class="line">        agent_card=public_agent_card,</span><br><span class="line">        http_handler=request_handler,</span><br><span class="line">        extended_agent_card=specific_extended_agent_card,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    # ä½¿ç”¨ uvicorn å¯åŠ¨æœåŠ¡ï¼Œç›‘å¬ 0.0.0.0:9999</span><br><span class="line">    uvicorn.run(server.build(), host=&#x27;0.0.0.0&#x27;, port=9999)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹ï¼š</p>
<ol type="1">
<li><strong><code>DefaultRequestHandler</code></strong>:
<ul>
<li>SDK æä¾›äº† <code>DefaultRequestHandler</code>ã€‚è¿™ä¸ªå¤„ç†å™¨æ¥æ”¶ä½ çš„
<code>AgentExecutor</code>
å®ç°ï¼ˆè¿™é‡Œï¼Œ<code>HelloWorldAgentExecutor</code>ï¼‰å’Œä¸€ä¸ª
<code>TaskStore</code>ï¼ˆè¿™é‡Œï¼Œ<code>InMemoryTaskStore</code>ï¼‰ã€‚</li>
<li>å®ƒå°†ä¼ å…¥çš„ A2A RPC è°ƒç”¨è·¯ç”±åˆ°ä½ çš„æ‰§è¡Œå™¨çš„é€‚å½“æ–¹æ³•ä¸Šï¼ˆæ¯”å¦‚
<code>execute</code> æˆ– <code>cancel</code>ï¼‰ã€‚</li>
<li><code>TaskStore</code> è¢« <code>DefaultRequestHandler</code>
ç”¨æ¥ç®¡ç†ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œç‰¹åˆ«æ˜¯å¯¹äºæœ‰çŠ¶æ€äº¤äº’ã€æµå¼ä¼ è¾“å’Œé‡æ–°è®¢é˜…ã€‚å³ä½¿ä½ çš„ä»£ç†æ‰§è¡Œå™¨å¾ˆç®€å•ï¼Œå¤„ç†å™¨ä¹Ÿéœ€è¦ä¸€ä¸ªä»»åŠ¡å­˜å‚¨ã€‚</li>
</ul></li>
<li><strong><code>A2AStarletteApplication</code></strong>:
<ul>
<li><code>A2AStarletteApplication</code> ç±»ä½¿ç”¨ <code>agent_card</code>
å’Œ <code>request_handler</code>ï¼ˆåœ¨å…¶æ„é€ å‡½æ•°ä¸­ç§°ä¸º
<code>http_handler</code>ï¼‰è¿›è¡Œå®ä¾‹åŒ–ã€‚</li>
<li><code>agent_card</code> è‡³å…³é‡è¦ï¼Œå› ä¸ºæœåŠ¡å™¨å°†åœ¨
<code>/.well-known/agent-card.json</code>
ç«¯ç‚¹ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ä¸Šå…¬å¼€å®ƒã€‚</li>
<li><code>request_handler</code> è´Ÿè´£é€šè¿‡ä¸å…¶ <code>AgentExecutor</code>
äº¤äº’æ¥å¤„ç†æ‰€æœ‰ä¼ å…¥çš„ A2A æ–¹æ³•è°ƒç”¨ã€‚</li>
</ul></li>
<li><strong><code>uvicorn.run(server_app_builder.build(), ...)</code></strong>:
<ul>
<li><code>A2AStarletteApplication</code> æœ‰ä¸€ä¸ª <code>build()</code>
æ–¹æ³•ï¼Œç”¨äºæ„å»ºå®é™…çš„ Starlette åº”ç”¨ç¨‹åºã€‚</li>
<li>ç„¶åä½¿ç”¨ <code>uvicorn.run()</code> è¿è¡Œè¯¥åº”ç”¨ç¨‹åºï¼Œä½¿æ‚¨çš„ä»£ç†å¯é€šè¿‡
HTTP è®¿é—®ã€‚</li>
<li><code>host='0.0.0.0'</code>
ä½¿æœåŠ¡å™¨å¯åœ¨æ‚¨æœºå™¨ä¸Šçš„æ‰€æœ‰ç½‘ç»œæ¥å£ä¸Šè®¿é—®ã€‚</li>
<li><code>port=9999</code> æŒ‡å®šç›‘å¬çš„ç«¯å£ã€‚è¿™éœ€è¦ä¸
<code>AgentCard</code> ä¸­çš„ <code>url</code> åŒ¹é…ã€‚</li>
</ul></li>
<li><code>specific_extended_agent_card</code>
<ul>
<li><strong>ç»™åŒä¸€ä¸ª Agent
å‡†å¤‡â€œä¸¤å¼ ä¸åŒæƒé™çš„åç‰‡â€</strong>ï¼Œåˆ†åˆ«ç”¨äºâ€œæ™®é€šè®¿å®¢â€å’Œâ€œå·²è®¤è¯ç”¨æˆ·â€ã€‚ã€</li>
</ul></li>
</ol>
<h3 id="ä¸æœåŠ¡å™¨äº¤äº’">ä¸æœåŠ¡å™¨äº¤äº’</h3>
<p>Helloworld A2A æœåŠ¡å™¨è¿è¡Œåï¼Œè®©æˆ‘ä»¬å‘å®ƒå‘é€ä¸€äº›è¯·æ±‚ã€‚SDK
åŒ…å«ä¸€ä¸ªå®¢æˆ·ç«¯ï¼ˆ<code>A2AClient</code>ï¼‰ï¼Œå¯ä»¥ç®€åŒ–è¿™äº›äº¤äº’ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ <code>test_client.py</code> çš„å…³é”®éƒ¨åˆ†ï¼š</p>
<ol type="1">
<li><p><strong>è·å–ä»£ç†å¡ &amp; åˆå§‹åŒ–å®¢æˆ·ç«¯</strong> ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">base_url = &#x27;http://localhost:9999&#x27;</span><br><span class="line"></span><br><span class="line">async with httpx.AsyncClient() as httpx_client:</span><br><span class="line">    # åˆå§‹åŒ– A2ACardResolver</span><br><span class="line">    resolver = A2ACardResolver(</span><br><span class="line">        httpx_client=httpx_client,</span><br><span class="line">        base_url=base_url,</span><br><span class="line">        # agent_card_path ä½¿ç”¨é»˜è®¤å€¼ï¼Œextended_agent_card_path ä¹Ÿä½¿ç”¨é»˜è®¤å€¼</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p><code>A2ACardResolver</code> ç±»æ˜¯ä¸€ä¸ªä¾¿æ·å·¥å…·ã€‚å®ƒé¦–å…ˆä»æœåŠ¡å™¨ç«¯çš„
<code>/.well-known/agent-card.json</code> ç«¯ç‚¹ï¼ˆåŸºäºæä¾›çš„åŸº URLï¼‰è·å–
<code>AgentCard</code>ï¼Œç„¶åä½¿ç”¨å®ƒåˆå§‹åŒ–å®¢æˆ·ç«¯ã€‚</p></li>
<li><p><strong>å‘é€éæµå¼æ¶ˆæ¯ (<code>send_message</code>)</strong>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">client = A2AClient(</span><br><span class="line">    httpx_client=httpx_client, </span><br><span class="line">    agent_card=final_agent_card_to_use#è¿™ä¸ªcardä¸ºç»è¿‡è®¤è¯å¤„ç†åæš´éœ²çš„card</span><br><span class="line">)</span><br><span class="line">logger.info(&#x27;A2AClient initialized.&#x27;)</span><br><span class="line"></span><br><span class="line">send_message_payload: dict[str, Any] = &#123;</span><br><span class="line">    &#x27;message&#x27;: &#123;</span><br><span class="line">        &#x27;role&#x27;: &#x27;user&#x27;,</span><br><span class="line">        &#x27;parts&#x27;: [</span><br><span class="line">            &#123;&#x27;kind&#x27;: &#x27;text&#x27;, &#x27;text&#x27;: &#x27;how much is 10 USD in INR?&#x27;&#125;</span><br><span class="line">        ],</span><br><span class="line">        &#x27;messageId&#x27;: uuid4().hex,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">request = SendMessageRequest(</span><br><span class="line">    id=str(uuid4()), params=MessageSendParams(**send_message_payload)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">response = await client.send_message(request)</span><br><span class="line">print(response.model_dump(mode=&#x27;json&#x27;, exclude_none=True))</span><br></pre></td></tr></table></figure>
<ul>
<li><code>send_message_payload</code> æ„å»ºäº†
<code>MessageSendParams</code> çš„æ•°æ®ã€‚</li>
<li>è¿™äº›æ•°æ®è¢«å°è£…åœ¨ <code>SendMessageRequest</code> ä¸­ã€‚</li>
<li>å®ƒåŒ…å«ä¸€ä¸ª <code>message</code> å¯¹è±¡ï¼Œå…¶ä¸­ <code>role</code>
è®¾ç½®ä¸ºâ€ç”¨æˆ·â€ï¼Œå†…å®¹åœ¨ <code>parts</code> ä¸­ã€‚</li>
<li>Helloworld ä»£ç†çš„ <code>execute</code> æ–¹æ³•å°†å…¥é˜Ÿä¸€æ¡â€Hello
Worldâ€æ¶ˆæ¯ã€‚<code>DefaultRequestHandler</code>
å°†è·å–è¿™æ¡æ¶ˆæ¯å¹¶å°†å…¶ä½œä¸ºå“åº”å‘é€ã€‚</li>
<li><code>response</code> å°†æ˜¯ä¸€ä¸ª <code>SendMessageResponse</code>
å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å« <code>SendMessageSuccessResponse</code>ï¼ˆä»¥ä»£ç†çš„
<code>Message</code> ä½œä¸ºç»“æœï¼‰æˆ–
<code>JSONRPCErrorResponse</code>ã€‚</li>
</ul></li>
<li><p><strong>å¤„ç†ä»»åŠ¡ IDï¼ˆHelloworld çš„è¯´æ˜æ€§æ³¨é‡Šï¼‰</strong>:</p>
<p>Helloworld å®¢æˆ·ç«¯ï¼ˆ<code>test_client.py</code>ï¼‰ä¸ä¼šç›´æ¥å°è¯•
<code>get_task</code> æˆ– <code>cancel_task</code>ï¼Œå› ä¸ºç®€å•çš„ Helloworld
ä»£ç†çš„ <code>execute</code> æ–¹æ³•ï¼Œé€šè¿‡ <code>message/send</code>
è°ƒç”¨æ—¶ï¼Œä¼šå¯¼è‡´ <code>DefaultRequestHandler</code> è¿”å›ä¸€ä¸ªç›´æ¥çš„
<code>Message</code> å“åº”ï¼Œè€Œä¸æ˜¯ <code>Task</code>
å¯¹è±¡ã€‚æ›´å¤æ‚çš„ã€æ˜ç¡®ç®¡ç†ä»»åŠ¡çš„ä»£ç†ï¼ˆå¦‚ LangGraph ç¤ºä¾‹ï¼‰ä¼šä»
<code>message/send</code> è¿”å›ä¸€ä¸ª <code>Task</code> å¯¹è±¡ï¼Œç„¶åå…¶
<code>id</code> å¯ç”¨äº <code>get_task</code> æˆ–
<code>cancel_task</code>ã€‚</p></li>
<li><p><strong>å‘é€æµå¼æ¶ˆæ¯ï¼ˆ<code>send_message_streaming</code>ï¼‰</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">streaming_request = SendStreamingMessageRequest(</span><br><span class="line">    id=str(uuid4()), params=MessageSendParams(**send_message_payload)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">stream_response = client.send_message_streaming(streaming_request)</span><br><span class="line"></span><br><span class="line">async for chunk in stream_response:</span><br><span class="line">    print(chunk.model_dump(mode=&#x27;json&#x27;, exclude_none=True))</span><br></pre></td></tr></table></figure>
<ul>
<li>æ­¤æ–¹æ³•è°ƒç”¨ä»£ç†çš„ <code>message/stream</code>
ç«¯ç‚¹ã€‚<code>DefaultRequestHandler</code> å°†è°ƒç”¨
<code>HelloWorldAgentExecutor.execute</code> æ–¹æ³•ã€‚</li>
<li><code>execute</code> æ–¹æ³•å°†ä¸€ä¸ªâ€Hello
Worldâ€æ¶ˆæ¯å…¥é˜Ÿï¼Œç„¶åå…³é—­äº‹ä»¶é˜Ÿåˆ—ã€‚</li>
<li>å®¢æˆ·ç«¯å°†æ¥æ”¶è¿™æ¡å•æ¡æ¶ˆæ¯ä¸ºä¸€ä¸ª
<code>SendStreamingMessageResponse</code> äº‹ä»¶ï¼Œç„¶åæµå°†ç»ˆæ­¢ã€‚</li>
<li><code>stream_response</code> æ˜¯ä¸€ä¸ª
<code>AsyncGenerator</code>ã€‚</li>
</ul></li>
</ol>
<h3 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h3>
<p><a target="_blank" rel="noopener" href="https://github.com/a2aproject/a2a-samples?tab=readme-ov-file">a2aproject/a2a-samples:
Samples using the Agent2Agent (A2A) Protocol</a></p>
<p><a target="_blank" rel="noopener" href="https://a2a-protocol.org/latest/">Agent2Agent (A2A)
Protocol</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/a2aproject/a2a-python">a2aproject/a2a-python:
Agent2Agent (A2A) åè®®çš„å®˜æ–¹ Python SDK â€” a2aproject/a2a-python:
Official Python SDK for the Agent2Agent (A2A) Protocol</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="ä¸Šä¸€é¡µ" aria-label="ä¸Šä¸€é¡µ" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" title="ä¸‹ä¸€é¡µ" aria-label="ä¸‹ä¸€é¡µ" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">å¼ ç†™æµš</span>
  </div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="æœ¬ç«™è®¿é—®æ•° fa fa-user æ¬¡"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="æœ¬ç«™æ€»è®¿é—®é‡ fa fa-eye æ¬¡"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="400" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js" integrity="sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.1.0/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.0/mermaid.min.js","integrity":"sha256-stuqcu2FrjYCXDOytWFA5SoUE/r3nkp6gTglzNSlavU="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  <script src="/js/third-party/pace.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"all","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
